# Configuração do Redis para Utmify
# Baseado no Redis 7.x

# Configurações de rede
bind 0.0.0.0
port 6379
protected-mode no

# Configurações de memória
maxmemory 512mb
maxmemory-policy allkeys-lru

# Configurações de persistência
save 900 1
save 300 10
save 60 10000

# Configurações de log
loglevel notice
logfile ""

# Configurações de performance
tcp-keepalive 300
timeout 0

# Configurações para Bull/BullMQ
# Habilitar keyspace notifications para jobs
notify-keyspace-events Ex

# Configurações de segurança
# requirepass utmify123  # Descomente para produção

# Configurações de database
databases 16

# Database 0: Cache geral
# Database 1: Sessões de usuário
# Database 2: Rate limiting
# Database 3: Bull/BullMQ jobs
# Database 4: Temporary data
# Database 5-15: Reservado para uso futuro

# Configurações de compressão
rdbcompression yes
rdbchecksum yes

# Configurações de cliente
maxclients 10000

# Configurações de slow log
slowlog-log-slower-than 10000
slowlog-max-len 128

# Configurações de latência
latency-monitor-threshold 100