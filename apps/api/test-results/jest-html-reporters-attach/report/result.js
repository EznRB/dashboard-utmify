window.jest_html_reporters_callback__({"numFailedTestSuites":9,"numFailedTests":89,"numPassedTestSuites":3,"numPassedTests":28,"numPendingTestSuites":0,"numPendingTests":6,"numRuntimeErrorTestSuites":5,"numTodoTests":0,"numTotalTestSuites":12,"numTotalTests":123,"startTime":1757638423120,"success":false,"testResults":[{"numFailingTests":0,"numPassingTests":4,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1757638430420,"runtime":7127,"slow":true,"start":1757638423293},"testFilePath":"C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\__tests__\\google-ads.service.test.ts","failureMessage":null,"testResults":[{"ancestorTitles":["GoogleAdsService","generateAuthUrl"],"duration":10,"failureMessages":[],"fullName":"GoogleAdsService generateAuthUrl should generate a valid OAuth URL","status":"passed","title":"should generate a valid OAuth URL"},{"ancestorTitles":["GoogleAdsService","exchangeCodeForToken"],"duration":7,"failureMessages":[],"fullName":"GoogleAdsService exchangeCodeForToken should exchange authorization code for tokens","status":"passed","title":"should exchange authorization code for tokens"},{"ancestorTitles":["GoogleAdsService","exchangeCodeForToken"],"duration":43,"failureMessages":[],"fullName":"GoogleAdsService exchangeCodeForToken should throw error for invalid authorization code","status":"passed","title":"should throw error for invalid authorization code"},{"ancestorTitles":["GoogleAdsService","getCustomerAccounts"],"duration":5,"failureMessages":[],"fullName":"GoogleAdsService getCustomerAccounts should fetch Google Ads customer accounts","status":"passed","title":"should fetch Google Ads customer accounts"}]},{"numFailingTests":0,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":0,"runtime":0,"slow":false,"start":0},"testFilePath":"C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\modules\\__tests__\\google-ads.module.integration.test.ts","failureMessage":"  \u001b[1m● \u001b[22mTest suite failed to run\n\n    Cannot find module '@nestjs/testing' from 'src/modules/__tests__/google-ads.module.integration.test.ts'\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mTest\u001b[39m\u001b[33m,\u001b[39m \u001b[33mTestingModule\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@nestjs/testing'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mINestApplication\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@nestjs/common'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m \u001b[33m*\u001b[39m \u001b[36mas\u001b[39m request \u001b[36mfrom\u001b[39m \u001b[32m'supertest'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 4 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mGoogleAdsModule\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../google-ads.module'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22m../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[0m\u001b[36msrc/modules/__tests__/google-ads.module.integration.test.ts\u001b[39m\u001b[0m\u001b[2m:1:1)\u001b[22m\n","testResults":[]},{"numFailingTests":0,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":0,"runtime":0,"slow":false,"start":0},"testFilePath":"C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\integration\\metrics-system.integration.test.ts","failureMessage":"  \u001b[1m● \u001b[22mTest suite failed to run\n\n    Cannot find module '@nestjs/testing' from 'src/tests/integration/metrics-system.integration.test.ts'\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mTest\u001b[39m\u001b[33m,\u001b[39m \u001b[33mTestingModule\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@nestjs/testing'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mINestApplication\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@nestjs/common'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m request \u001b[36mfrom\u001b[39m \u001b[32m'supertest'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 4 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mPrismaService\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../../services/prisma.service'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22m../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[0m\u001b[36msrc/tests/integration/metrics-system.integration.test.ts\u001b[39m\u001b[0m\u001b[2m:1:1)\u001b[22m\n","testResults":[]},{"numFailingTests":0,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":0,"runtime":0,"slow":false,"start":0},"testFilePath":"C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\controllers\\__tests__\\google-ads.controller.test.ts","failureMessage":"  \u001b[1m● \u001b[22mTest suite failed to run\n\n    Cannot find module '@nestjs/testing' from 'src/controllers/__tests__/google-ads.controller.test.ts'\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mTest\u001b[39m\u001b[33m,\u001b[39m \u001b[33mTestingModule\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@nestjs/testing'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mGoogleAdsController\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../google-ads.controller'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mGoogleAdsService\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'../../services/google-ads.service'\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 4 |\u001b[39m \u001b[36mimport\u001b[39m { \u001b[33mAuthGuard\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'@nestjs/passport'\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22m../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[0m\u001b[36msrc/controllers/__tests__/google-ads.controller.test.ts\u001b[39m\u001b[0m\u001b[2m:1:1)\u001b[22m\n","testResults":[]},{"numFailingTests":12,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1757638434099,"runtime":2862,"slow":false,"start":1757638431237},"testFilePath":"C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\whatsapp.service.test.ts","failureMessage":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mWhatsAppService › getConfig › should return WhatsApp config for user\u001b[39m\u001b[22m\n\n    TypeError: globals_1.jest.mocked(...).mockReturnValue is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     }\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     jest\u001b[33m.\u001b[39mmocked(twilio)\u001b[33m.\u001b[39mmockReturnValue(mockTwilioClient)\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m     whatsappService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWhatsAppService\u001b[39m(\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m       prismaService\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/whatsapp.service.test.ts\u001b[39m\u001b[0m\u001b[2m:70:25)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mWhatsAppService › getConfig › should return null if config not found\u001b[39m\u001b[22m\n\n    TypeError: globals_1.jest.mocked(...).mockReturnValue is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     }\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     jest\u001b[33m.\u001b[39mmocked(twilio)\u001b[33m.\u001b[39mmockReturnValue(mockTwilioClient)\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m     whatsappService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWhatsAppService\u001b[39m(\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m       prismaService\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/whatsapp.service.test.ts\u001b[39m\u001b[0m\u001b[2m:70:25)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mWhatsAppService › updateConfig › should create new config if not exists\u001b[39m\u001b[22m\n\n    TypeError: globals_1.jest.mocked(...).mockReturnValue is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     }\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     jest\u001b[33m.\u001b[39mmocked(twilio)\u001b[33m.\u001b[39mmockReturnValue(mockTwilioClient)\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m     whatsappService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWhatsAppService\u001b[39m(\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m       prismaService\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/whatsapp.service.test.ts\u001b[39m\u001b[0m\u001b[2m:70:25)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mWhatsAppService › updateConfig › should update existing config\u001b[39m\u001b[22m\n\n    TypeError: globals_1.jest.mocked(...).mockReturnValue is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     }\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     jest\u001b[33m.\u001b[39mmocked(twilio)\u001b[33m.\u001b[39mmockReturnValue(mockTwilioClient)\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m     whatsappService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWhatsAppService\u001b[39m(\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m       prismaService\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/whatsapp.service.test.ts\u001b[39m\u001b[0m\u001b[2m:70:25)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mWhatsAppService › sendMessage › should send message successfully\u001b[39m\u001b[22m\n\n    TypeError: globals_1.jest.mocked(...).mockReturnValue is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     }\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     jest\u001b[33m.\u001b[39mmocked(twilio)\u001b[33m.\u001b[39mmockReturnValue(mockTwilioClient)\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m     whatsappService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWhatsAppService\u001b[39m(\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m       prismaService\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/whatsapp.service.test.ts\u001b[39m\u001b[0m\u001b[2m:70:25)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mWhatsAppService › sendMessage › should throw error if config not found\u001b[39m\u001b[22m\n\n    TypeError: globals_1.jest.mocked(...).mockReturnValue is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     }\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     jest\u001b[33m.\u001b[39mmocked(twilio)\u001b[33m.\u001b[39mmockReturnValue(mockTwilioClient)\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m     whatsappService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWhatsAppService\u001b[39m(\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m       prismaService\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/whatsapp.service.test.ts\u001b[39m\u001b[0m\u001b[2m:70:25)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mWhatsAppService › sendMessage › should throw error if config is inactive\u001b[39m\u001b[22m\n\n    TypeError: globals_1.jest.mocked(...).mockReturnValue is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     }\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     jest\u001b[33m.\u001b[39mmocked(twilio)\u001b[33m.\u001b[39mmockReturnValue(mockTwilioClient)\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m     whatsappService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWhatsAppService\u001b[39m(\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m       prismaService\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/whatsapp.service.test.ts\u001b[39m\u001b[0m\u001b[2m:70:25)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mWhatsAppService › sendMessage › should throw error if daily limit exceeded\u001b[39m\u001b[22m\n\n    TypeError: globals_1.jest.mocked(...).mockReturnValue is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     }\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     jest\u001b[33m.\u001b[39mmocked(twilio)\u001b[33m.\u001b[39mmockReturnValue(mockTwilioClient)\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m     whatsappService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWhatsAppService\u001b[39m(\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m       prismaService\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/whatsapp.service.test.ts\u001b[39m\u001b[0m\u001b[2m:70:25)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mWhatsAppService › getMessages › should return paginated messages\u001b[39m\u001b[22m\n\n    TypeError: globals_1.jest.mocked(...).mockReturnValue is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     }\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     jest\u001b[33m.\u001b[39mmocked(twilio)\u001b[33m.\u001b[39mmockReturnValue(mockTwilioClient)\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m     whatsappService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWhatsAppService\u001b[39m(\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m       prismaService\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/whatsapp.service.test.ts\u001b[39m\u001b[0m\u001b[2m:70:25)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mWhatsAppService › getDashboardStats › should return dashboard statistics\u001b[39m\u001b[22m\n\n    TypeError: globals_1.jest.mocked(...).mockReturnValue is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     }\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     jest\u001b[33m.\u001b[39mmocked(twilio)\u001b[33m.\u001b[39mmockReturnValue(mockTwilioClient)\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m     whatsappService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWhatsAppService\u001b[39m(\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m       prismaService\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/whatsapp.service.test.ts\u001b[39m\u001b[0m\u001b[2m:70:25)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mWhatsAppService › testConnection › should test connection successfully\u001b[39m\u001b[22m\n\n    TypeError: globals_1.jest.mocked(...).mockReturnValue is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     }\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     jest\u001b[33m.\u001b[39mmocked(twilio)\u001b[33m.\u001b[39mmockReturnValue(mockTwilioClient)\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m     whatsappService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWhatsAppService\u001b[39m(\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m       prismaService\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/whatsapp.service.test.ts\u001b[39m\u001b[0m\u001b[2m:70:25)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mWhatsAppService › testConnection › should handle connection error\u001b[39m\u001b[22m\n\n    TypeError: globals_1.jest.mocked(...).mockReturnValue is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 68 |\u001b[39m     }\u001b[22m\n\u001b[2m     \u001b[90m 69 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 70 |\u001b[39m     jest\u001b[33m.\u001b[39mmocked(twilio)\u001b[33m.\u001b[39mmockReturnValue(mockTwilioClient)\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 71 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 72 |\u001b[39m     whatsappService \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mWhatsAppService\u001b[39m(\u001b[22m\n\u001b[2m     \u001b[90m 73 |\u001b[39m       prismaService\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/whatsapp.service.test.ts\u001b[39m\u001b[0m\u001b[2m:70:25)\u001b[22m\u001b[2m\u001b[22m\n","testResults":[{"ancestorTitles":["WhatsAppService","getConfig"],"duration":4,"failureMessages":["TypeError: globals_1.jest.mocked(...).mockReturnValue is not a function\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\whatsapp.service.test.ts:70:25)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"WhatsAppService getConfig should return WhatsApp config for user","status":"failed","title":"should return WhatsApp config for user"},{"ancestorTitles":["WhatsAppService","getConfig"],"duration":4,"failureMessages":["TypeError: globals_1.jest.mocked(...).mockReturnValue is not a function\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\whatsapp.service.test.ts:70:25)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"WhatsAppService getConfig should return null if config not found","status":"failed","title":"should return null if config not found"},{"ancestorTitles":["WhatsAppService","updateConfig"],"duration":13,"failureMessages":["TypeError: globals_1.jest.mocked(...).mockReturnValue is not a function\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\whatsapp.service.test.ts:70:25)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"WhatsAppService updateConfig should create new config if not exists","status":"failed","title":"should create new config if not exists"},{"ancestorTitles":["WhatsAppService","updateConfig"],"duration":5,"failureMessages":["TypeError: globals_1.jest.mocked(...).mockReturnValue is not a function\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\whatsapp.service.test.ts:70:25)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"WhatsAppService updateConfig should update existing config","status":"failed","title":"should update existing config"},{"ancestorTitles":["WhatsAppService","sendMessage"],"duration":4,"failureMessages":["TypeError: globals_1.jest.mocked(...).mockReturnValue is not a function\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\whatsapp.service.test.ts:70:25)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"WhatsAppService sendMessage should send message successfully","status":"failed","title":"should send message successfully"},{"ancestorTitles":["WhatsAppService","sendMessage"],"duration":4,"failureMessages":["TypeError: globals_1.jest.mocked(...).mockReturnValue is not a function\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\whatsapp.service.test.ts:70:25)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"WhatsAppService sendMessage should throw error if config not found","status":"failed","title":"should throw error if config not found"},{"ancestorTitles":["WhatsAppService","sendMessage"],"duration":3,"failureMessages":["TypeError: globals_1.jest.mocked(...).mockReturnValue is not a function\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\whatsapp.service.test.ts:70:25)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"WhatsAppService sendMessage should throw error if config is inactive","status":"failed","title":"should throw error if config is inactive"},{"ancestorTitles":["WhatsAppService","sendMessage"],"duration":4,"failureMessages":["TypeError: globals_1.jest.mocked(...).mockReturnValue is not a function\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\whatsapp.service.test.ts:70:25)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"WhatsAppService sendMessage should throw error if daily limit exceeded","status":"failed","title":"should throw error if daily limit exceeded"},{"ancestorTitles":["WhatsAppService","getMessages"],"duration":4,"failureMessages":["TypeError: globals_1.jest.mocked(...).mockReturnValue is not a function\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\whatsapp.service.test.ts:70:25)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"WhatsAppService getMessages should return paginated messages","status":"failed","title":"should return paginated messages"},{"ancestorTitles":["WhatsAppService","getDashboardStats"],"duration":4,"failureMessages":["TypeError: globals_1.jest.mocked(...).mockReturnValue is not a function\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\whatsapp.service.test.ts:70:25)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"WhatsAppService getDashboardStats should return dashboard statistics","status":"failed","title":"should return dashboard statistics"},{"ancestorTitles":["WhatsAppService","testConnection"],"duration":5,"failureMessages":["TypeError: globals_1.jest.mocked(...).mockReturnValue is not a function\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\whatsapp.service.test.ts:70:25)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"WhatsAppService testConnection should test connection successfully","status":"failed","title":"should test connection successfully"},{"ancestorTitles":["WhatsAppService","testConnection"],"duration":4,"failureMessages":["TypeError: globals_1.jest.mocked(...).mockReturnValue is not a function\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\whatsapp.service.test.ts:70:25)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"WhatsAppService testConnection should handle connection error","status":"failed","title":"should handle connection error"}]},{"numFailingTests":0,"numPassingTests":11,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1757638434519,"runtime":349,"slow":false,"start":1757638434170},"testFilePath":"C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\whatsapp.controller.simple.test.ts","failureMessage":null,"testResults":[{"ancestorTitles":["WhatsApp Controller - Simple Tests","getConfig"],"duration":7,"failureMessages":[],"fullName":"WhatsApp Controller - Simple Tests getConfig should return WhatsApp config successfully","status":"passed","title":"should return WhatsApp config successfully"},{"ancestorTitles":["WhatsApp Controller - Simple Tests","getConfig"],"duration":3,"failureMessages":[],"fullName":"WhatsApp Controller - Simple Tests getConfig should return 401 if user not authenticated","status":"passed","title":"should return 401 if user not authenticated"},{"ancestorTitles":["WhatsApp Controller - Simple Tests","getConfig"],"duration":4,"failureMessages":[],"fullName":"WhatsApp Controller - Simple Tests getConfig should return 500 on service error","status":"passed","title":"should return 500 on service error"},{"ancestorTitles":["WhatsApp Controller - Simple Tests","updateConfig"],"duration":3,"failureMessages":[],"fullName":"WhatsApp Controller - Simple Tests updateConfig should update WhatsApp config successfully","status":"passed","title":"should update WhatsApp config successfully"},{"ancestorTitles":["WhatsApp Controller - Simple Tests","sendMessage"],"duration":3,"failureMessages":[],"fullName":"WhatsApp Controller - Simple Tests sendMessage should send message successfully","status":"passed","title":"should send message successfully"},{"ancestorTitles":["WhatsApp Controller - Simple Tests","sendMessage"],"duration":3,"failureMessages":[],"fullName":"WhatsApp Controller - Simple Tests sendMessage should return 400 if to or message is missing","status":"passed","title":"should return 400 if to or message is missing"},{"ancestorTitles":["WhatsApp Controller - Simple Tests","sendMessage"],"duration":3,"failureMessages":[],"fullName":"WhatsApp Controller - Simple Tests sendMessage should return 400 for WhatsApp service errors","status":"passed","title":"should return 400 for WhatsApp service errors"},{"ancestorTitles":["WhatsApp Controller - Simple Tests","getMessages"],"duration":3,"failureMessages":[],"fullName":"WhatsApp Controller - Simple Tests getMessages should return paginated messages","status":"passed","title":"should return paginated messages"},{"ancestorTitles":["WhatsApp Controller - Simple Tests","getMessages"],"duration":9,"failureMessages":[],"fullName":"WhatsApp Controller - Simple Tests getMessages should use custom page and limit from query","status":"passed","title":"should use custom page and limit from query"},{"ancestorTitles":["WhatsApp Controller - Simple Tests"],"duration":3,"failureMessages":[],"fullName":"WhatsApp Controller - Simple Tests should have basic Jest functionality working","status":"passed","title":"should have basic Jest functionality working"},{"ancestorTitles":["WhatsApp Controller - Simple Tests"],"duration":2,"failureMessages":[],"fullName":"WhatsApp Controller - Simple Tests should have Jest mocks working for controller","status":"passed","title":"should have Jest mocks working for controller"}]},{"numFailingTests":0,"numPassingTests":8,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1757638435106,"runtime":487,"slow":false,"start":1757638434619},"testFilePath":"C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\whatsapp.service.simple.test.ts","failureMessage":null,"testResults":[{"ancestorTitles":["WhatsApp Service - Simple Tests","getConfig"],"duration":8,"failureMessages":[],"fullName":"WhatsApp Service - Simple Tests getConfig should return WhatsApp config for user","status":"passed","title":"should return WhatsApp config for user"},{"ancestorTitles":["WhatsApp Service - Simple Tests","getConfig"],"duration":6,"failureMessages":[],"fullName":"WhatsApp Service - Simple Tests getConfig should return null if config not found","status":"passed","title":"should return null if config not found"},{"ancestorTitles":["WhatsApp Service - Simple Tests","sendMessage"],"duration":3,"failureMessages":[],"fullName":"WhatsApp Service - Simple Tests sendMessage should send message successfully","status":"passed","title":"should send message successfully"},{"ancestorTitles":["WhatsApp Service - Simple Tests","sendMessage"],"duration":18,"failureMessages":[],"fullName":"WhatsApp Service - Simple Tests sendMessage should throw error if config not found","status":"passed","title":"should throw error if config not found"},{"ancestorTitles":["WhatsApp Service - Simple Tests","sendMessage"],"duration":4,"failureMessages":[],"fullName":"WhatsApp Service - Simple Tests sendMessage should throw error if config is inactive","status":"passed","title":"should throw error if config is inactive"},{"ancestorTitles":["WhatsApp Service - Simple Tests","sendMessage"],"duration":3,"failureMessages":[],"fullName":"WhatsApp Service - Simple Tests sendMessage should throw error if daily limit exceeded","status":"passed","title":"should throw error if daily limit exceeded"},{"ancestorTitles":["WhatsApp Service - Simple Tests"],"duration":4,"failureMessages":[],"fullName":"WhatsApp Service - Simple Tests should have basic Jest functionality working","status":"passed","title":"should have basic Jest functionality working"},{"ancestorTitles":["WhatsApp Service - Simple Tests"],"duration":3,"failureMessages":[],"fullName":"WhatsApp Service - Simple Tests should have Jest mocks working","status":"passed","title":"should have Jest mocks working"}]},{"numFailingTests":0,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":0,"runtime":0,"slow":false,"start":0},"testFilePath":"C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\whatsapp.controller.test.ts","failureMessage":"  \u001b[1m● \u001b[22mTest suite failed to run\n\n    \u001b[1m\u001b[31mJest encountered an unexpected token\u001b[39m\u001b[22m\n\n    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.\n\n    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.\n\n    By default \"node_modules\" folder is ignored by transformers.\n\n    Here's what you can do:\n     • If you are trying to use ECMAScript Modules, see \u001b[4mhttps://jestjs.io/docs/ecmascript-modules\u001b[24m for how to enable it.\n     • If you are trying to use TypeScript, see \u001b[4mhttps://jestjs.io/docs/getting-started#using-typescript\u001b[24m\n     • To have some of your \"node_modules\" files transformed, you can specify a custom \u001b[1m\"transformIgnorePatterns\"\u001b[22m in your config.\n     • If you need a custom transformation specify a \u001b[1m\"transform\"\u001b[22m option in your config.\n     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \u001b[1m\"moduleNameMapper\"\u001b[22m config option.\n\n    You'll find more details and examples of these config options in the docs:\n    \u001b[36mhttps://jestjs.io/docs/configuration\u001b[39m\n    For information about custom transformations, see:\n    \u001b[36mhttps://jestjs.io/docs/code-transformation\u001b[39m\n\n    \u001b[1m\u001b[31mDetails:\u001b[39m\u001b[22m\n\n    C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\nanoid@5.1.5\\node_modules\\nanoid\\index.js:1\n    ({\"Object.<anonymous>\":function(module,exports,require,__dirname,__filename,jest){import { webcrypto as crypto } from 'node:crypto'\n                                                                                      ^^^^^^\n\n    SyntaxError: Cannot use import statement outside a module\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mimport\u001b[39m { nanoid } \u001b[36mfrom\u001b[39m \u001b[32m'nanoid'\u001b[39m\n     \u001b[90m   |\u001b[39m \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m \u001b[36mimport\u001b[39m bcrypt \u001b[36mfrom\u001b[39m \u001b[32m'bcryptjs'\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mimport\u001b[39m type { \u001b[33mFastifyInstance\u001b[39m } \u001b[36mfrom\u001b[39m \u001b[32m'fastify'\u001b[39m\n     \u001b[90m 4 |\u001b[39m \u001b[36mimport\u001b[39m { db } \u001b[36mfrom\u001b[39m \u001b[32m'@utmify/database'\u001b[39m\u001b[0m\n\n      \u001b[2mat Runtime.createScriptFromCode (\u001b[22m../../node_modules/.pnpm/jest-runtime@29.7.0/node_modules/jest-runtime/build/index.js\u001b[2m:1505:14)\u001b[22m\n      \u001b[2mat Object.require (\u001b[22msrc/services/auth.service.ts\u001b[2m:1:1)\u001b[22m\n      \u001b[2mat Object.require (\u001b[22msrc/routes/auth.routes.ts\u001b[2m:2:1)\u001b[22m\n      \u001b[2mat Object.require (\u001b[22msrc/routes/index.ts\u001b[2m:2:1)\u001b[22m\n      \u001b[2mat Object.require (\u001b[22msrc/index.ts\u001b[2m:6:1)\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[0m\u001b[36msrc/tests/whatsapp.controller.test.ts\u001b[39m\u001b[0m\u001b[2m:3:1)\u001b[22m\n","testResults":[]},{"numFailingTests":32,"numPassingTests":4,"numPendingTests":3,"numTodoTests":0,"perfStats":{"end":1757638439504,"runtime":847,"slow":false,"start":1757638438657},"testFilePath":"C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts","failureMessage":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStoredProceduresService › calculateKPIMetrics › should execute KPI calculation stored procedure successfully\u001b[39m\u001b[22m\n\n    Failed to calculate KPI metrics using stored procedure\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 85 |\u001b[39m \u001b[32m    } catch (error) {\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 86 |\u001b[39m \u001b[32m      logger.error('Error executing calculate_kpi_metrics stored procedure:', error);\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 87 |\u001b[39m \u001b[32m      throw new Error('Failed to calculate KPI metrics using stored procedure');\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 88 |\u001b[39m \u001b[32m    }\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 89 |\u001b[39m \u001b[32m  }\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 90 |\u001b[39m \u001b[32m\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat StoredProceduresService.calculateKPIMetrics (\u001b[22m\u001b[2msrc/services/stored-procedures.service.ts\u001b[2m:87:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/stored-procedures.test.ts\u001b[39m\u001b[0m\u001b[2m:90:52)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStoredProceduresService › calculateKPIMetrics › should handle empty results gracefully\u001b[39m\u001b[22m\n\n    Failed to calculate KPI metrics using stored procedure\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 85 |\u001b[39m \u001b[32m    } catch (error) {\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 86 |\u001b[39m \u001b[32m      logger.error('Error executing calculate_kpi_metrics stored procedure:', error);\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 87 |\u001b[39m \u001b[32m      throw new Error('Failed to calculate KPI metrics using stored procedure');\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 88 |\u001b[39m \u001b[32m    }\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 89 |\u001b[39m \u001b[32m  }\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 90 |\u001b[39m \u001b[32m\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat StoredProceduresService.calculateKPIMetrics (\u001b[22m\u001b[2msrc/services/stored-procedures.service.ts\u001b[2m:87:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/stored-procedures.test.ts\u001b[39m\u001b[0m\u001b[2m:108:52)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStoredProceduresService › calculateKPIMetrics › should handle database errors\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected substring: \u001b[32m\"Database connection failed\"\u001b[39m\n    Received message:   \u001b[31m\"Failed to calculate KPI metrics using stored procedure\"\u001b[39m\n\n        \u001b[0m \u001b[90m 85 |\u001b[39m \u001b[32m    } catch (error) {\u001b[39m\n         \u001b[90m 86 |\u001b[39m \u001b[32m      logger.error('Error executing calculate_kpi_metrics stored procedure:', error);\u001b[39m\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 87 |\u001b[39m \u001b[32m      throw new Error('Failed to calculate KPI metrics using stored procedure');\u001b[39m\n         \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 88 |\u001b[39m \u001b[32m    }\u001b[39m\n         \u001b[90m 89 |\u001b[39m \u001b[32m  }\u001b[39m\n         \u001b[90m 90 |\u001b[39m \u001b[32m\u001b[39m\u001b[0m\n\n          \u001b[2mat StoredProceduresService.calculateKPIMetrics (\u001b[22msrc/services/stored-procedures.service.ts\u001b[2m:87:13)\u001b[22m\n          \u001b[2mat Object.<anonymous> (\u001b[22msrc/tests/stored-procedures.test.ts\u001b[2m:121:33)\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 124 |\u001b[39m           mockEndDate\u001b[22m\n\u001b[2m     \u001b[90m 125 |\u001b[39m         )\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 126 |\u001b[39m       )\u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m'Database connection failed'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 127 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 128 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 129 |\u001b[39m     it(\u001b[32m'should validate input parameters'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toThrow (\u001b[22m\u001b[2m../../node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js\u001b[2m:218:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/stored-procedures.test.ts\u001b[39m\u001b[0m\u001b[2m:126:17)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStoredProceduresService › calculateKPIMetrics › should validate input parameters\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected substring: \u001b[32m\"Organization ID is required\"\u001b[39m\n    Received message:   \u001b[31m\"Failed to calculate KPI metrics using stored procedure\"\u001b[39m\n\n        \u001b[0m \u001b[90m 85 |\u001b[39m \u001b[32m    } catch (error) {\u001b[39m\n         \u001b[90m 86 |\u001b[39m \u001b[32m      logger.error('Error executing calculate_kpi_metrics stored procedure:', error);\u001b[39m\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 87 |\u001b[39m \u001b[32m      throw new Error('Failed to calculate KPI metrics using stored procedure');\u001b[39m\n         \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 88 |\u001b[39m \u001b[32m    }\u001b[39m\n         \u001b[90m 89 |\u001b[39m \u001b[32m  }\u001b[39m\n         \u001b[90m 90 |\u001b[39m \u001b[32m\u001b[39m\u001b[0m\n\n          \u001b[2mat StoredProceduresService.calculateKPIMetrics (\u001b[22msrc/services/stored-procedures.service.ts\u001b[2m:87:13)\u001b[22m\n          \u001b[2mat Object.<anonymous> (\u001b[22msrc/tests/stored-procedures.test.ts\u001b[2m:131:33)\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 130 |\u001b[39m       \u001b[36mawait\u001b[39m expect(\u001b[22m\n\u001b[2m     \u001b[90m 131 |\u001b[39m         storedProceduresService\u001b[33m.\u001b[39mcalculateKPIMetrics(\u001b[32m''\u001b[39m\u001b[33m,\u001b[39m mockStartDate\u001b[33m,\u001b[39m mockEndDate)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 132 |\u001b[39m       )\u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m'Organization ID is required'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 133 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 134 |\u001b[39m       \u001b[36mawait\u001b[39m expect(\u001b[22m\n\u001b[2m     \u001b[90m 135 |\u001b[39m         storedProceduresService\u001b[33m.\u001b[39mcalculateKPIMetrics(mockOrganizationId\u001b[33m,\u001b[39m \u001b[36mnull\u001b[39m \u001b[36mas\u001b[39m any\u001b[33m,\u001b[39m mockEndDate)\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toThrow (\u001b[22m\u001b[2m../../node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js\u001b[2m:218:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/stored-procedures.test.ts\u001b[39m\u001b[0m\u001b[2m:132:17)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStoredProceduresService › calculateKPIMetrics › should validate date range\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected substring: \u001b[32m\"End date must be after start date\"\u001b[39m\n    Received message:   \u001b[31m\"Failed to calculate KPI metrics using stored procedure\"\u001b[39m\n\n        \u001b[0m \u001b[90m 85 |\u001b[39m \u001b[32m    } catch (error) {\u001b[39m\n         \u001b[90m 86 |\u001b[39m \u001b[32m      logger.error('Error executing calculate_kpi_metrics stored procedure:', error);\u001b[39m\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 87 |\u001b[39m \u001b[32m      throw new Error('Failed to calculate KPI metrics using stored procedure');\u001b[39m\n         \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 88 |\u001b[39m \u001b[32m    }\u001b[39m\n         \u001b[90m 89 |\u001b[39m \u001b[32m  }\u001b[39m\n         \u001b[90m 90 |\u001b[39m \u001b[32m\u001b[39m\u001b[0m\n\n          \u001b[2mat StoredProceduresService.calculateKPIMetrics (\u001b[22msrc/services/stored-procedures.service.ts\u001b[2m:87:13)\u001b[22m\n          \u001b[2mat Object.<anonymous> (\u001b[22msrc/tests/stored-procedures.test.ts\u001b[2m:147:33)\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 150 |\u001b[39m           invalidEndDate\u001b[22m\n\u001b[2m     \u001b[90m 151 |\u001b[39m         )\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 152 |\u001b[39m       )\u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m'End date must be after start date'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 153 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 154 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 155 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toThrow (\u001b[22m\u001b[2m../../node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js\u001b[2m:218:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/stored-procedures.test.ts\u001b[39m\u001b[0m\u001b[2m:152:17)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStoredProceduresService › getTopCampaigns › should execute top campaigns stored procedure successfully\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mAnything\u001b[39m, \u001b[32m\"123e4567-e89b-12d3-a456-426614174000\"\u001b[39m, \u001b[32m2024-01-01T00:00:00.000Z\u001b[39m, \u001b[32m2024-01-31T00:00:00.000Z\u001b[39m, \u001b[32m\"revenue\"\u001b[39m, \u001b[32m10\u001b[39m\n    Received: \u001b[2m[\"\u001b[22m\n    \u001b[2m        SELECT * FROM get_top_campaigns(\u001b[22m\n    \u001b[2m          \", \"::uuid,\u001b[22m\n    \u001b[2m          \", \"::date,\u001b[22m\n    \u001b[2m          \", \"::date,\u001b[22m\n    \u001b[2m          \", \"::integer\u001b[22m\n    \u001b[2m        )\u001b[22m\n    \u001b[2m      \"]\u001b[22m, \u001b[2m\"123e4567-e89b-12d3-a456-426614174000\"\u001b[22m, \u001b[2m2024-01-01T00:00:00.000Z\u001b[22m, \u001b[2m2024-01-31T00:00:00.000Z\u001b[22m, \u001b[2m\"revenue\"\u001b[22m\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 166 |\u001b[39m       )\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 167 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 168 |\u001b[39m       expect(mockPrisma\u001b[33m.\u001b[39m$queryRaw)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 169 |\u001b[39m         expect\u001b[33m.\u001b[39manything()\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 170 |\u001b[39m         mockOrganizationId\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 171 |\u001b[39m         mockStartDate\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/stored-procedures.test.ts\u001b[39m\u001b[0m\u001b[2m:168:36)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStoredProceduresService › getTopCampaigns › should use default parameters when not provided\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mAnything\u001b[39m, \u001b[32m\"123e4567-e89b-12d3-a456-426614174000\"\u001b[39m, \u001b[32m2024-01-01T00:00:00.000Z\u001b[39m, \u001b[32m2024-01-31T00:00:00.000Z\u001b[39m, \u001b[32m\"revenue\"\u001b[39m, \u001b[32m5\u001b[39m\n    Received: \u001b[2m[\"\u001b[22m\n    \u001b[2m        SELECT * FROM get_top_campaigns(\u001b[22m\n    \u001b[2m          \", \"::uuid,\u001b[22m\n    \u001b[2m          \", \"::date,\u001b[22m\n    \u001b[2m          \", \"::date,\u001b[22m\n    \u001b[2m          \", \"::integer\u001b[22m\n    \u001b[2m        )\u001b[22m\n    \u001b[2m      \"]\u001b[22m, \u001b[2m\"123e4567-e89b-12d3-a456-426614174000\"\u001b[22m, \u001b[2m2024-01-01T00:00:00.000Z\u001b[22m, \u001b[2m2024-01-31T00:00:00.000Z\u001b[22m, \u001b[31m10\u001b[39m\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 186 |\u001b[39m       )\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 187 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 188 |\u001b[39m       expect(mockPrisma\u001b[33m.\u001b[39m$queryRaw)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 189 |\u001b[39m         expect\u001b[33m.\u001b[39manything()\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 190 |\u001b[39m         mockOrganizationId\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 191 |\u001b[39m         mockStartDate\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/stored-procedures.test.ts\u001b[39m\u001b[0m\u001b[2m:188:36)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStoredProceduresService › getTopCampaigns › should validate metric parameter\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\n    Received promise resolved instead of rejected\n    Resolved to value: \u001b[31mundefined\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 197 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 198 |\u001b[39m     it(\u001b[32m'should validate metric parameter'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 199 |\u001b[39m       \u001b[36mawait\u001b[39m expect(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 200 |\u001b[39m         storedProceduresService\u001b[33m.\u001b[39mgetTopCampaigns(\u001b[22m\n\u001b[2m     \u001b[90m 201 |\u001b[39m           mockOrganizationId\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 202 |\u001b[39m           mockStartDate\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat expect (\u001b[22m\u001b[2m../../node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js\u001b[2m:113:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/stored-procedures.test.ts\u001b[39m\u001b[0m\u001b[2m:199:19)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStoredProceduresService › getTopCampaigns › should validate limit parameter\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\n    Received promise resolved instead of rejected\n    Resolved to value: \u001b[31mundefined\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 208 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 209 |\u001b[39m     it(\u001b[32m'should validate limit parameter'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 210 |\u001b[39m       \u001b[36mawait\u001b[39m expect(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 211 |\u001b[39m         storedProceduresService\u001b[33m.\u001b[39mgetTopCampaigns(\u001b[22m\n\u001b[2m     \u001b[90m 212 |\u001b[39m           mockOrganizationId\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 213 |\u001b[39m           mockStartDate\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat expect (\u001b[22m\u001b[2m../../node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js\u001b[2m:113:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/stored-procedures.test.ts\u001b[39m\u001b[0m\u001b[2m:210:19)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStoredProceduresService › updateRealTimeMetrics › should execute real-time metrics update successfully\u001b[39m\u001b[22m\n\n    TypeError: storedProceduresService.updateRealTimeMetrics is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 281 |\u001b[39m       mockPrisma\u001b[33m.\u001b[39m$executeRaw\u001b[33m.\u001b[39mmockResolvedValue(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 282 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 283 |\u001b[39m       \u001b[36mawait\u001b[39m storedProceduresService\u001b[33m.\u001b[39mupdateRealTimeMetrics(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 284 |\u001b[39m         mockCampaignId\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 285 |\u001b[39m         \u001b[32m'CLICK'\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 286 |\u001b[39m         { source\u001b[33m:\u001b[39m \u001b[32m'google'\u001b[39m }\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/stored-procedures.test.ts\u001b[39m\u001b[0m\u001b[2m:283:37)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStoredProceduresService › updateRealTimeMetrics › should handle different event types\u001b[39m\u001b[22m\n\n    TypeError: storedProceduresService.updateRealTimeMetrics is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 299 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 300 |\u001b[39m       \u001b[90m// Test IMPRESSION event\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 301 |\u001b[39m       \u001b[36mawait\u001b[39m storedProceduresService\u001b[33m.\u001b[39mupdateRealTimeMetrics(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 302 |\u001b[39m         mockCampaignId\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 303 |\u001b[39m         \u001b[32m'IMPRESSION'\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 304 |\u001b[39m         {}\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/stored-procedures.test.ts\u001b[39m\u001b[0m\u001b[2m:301:37)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStoredProceduresService › updateRealTimeMetrics › should validate event type\u001b[39m\u001b[22m\n\n    TypeError: storedProceduresService.updateRealTimeMetrics is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 317 |\u001b[39m     it(\u001b[32m'should validate event type'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 318 |\u001b[39m       \u001b[36mawait\u001b[39m expect(\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 319 |\u001b[39m         storedProceduresService\u001b[33m.\u001b[39mupdateRealTimeMetrics(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 320 |\u001b[39m           mockCampaignId\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 321 |\u001b[39m           \u001b[32m'INVALID_EVENT'\u001b[39m \u001b[36mas\u001b[39m any\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 322 |\u001b[39m           {}\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/stored-procedures.test.ts\u001b[39m\u001b[0m\u001b[2m:319:33)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStoredProceduresService › aggregateHourlyToDaily › should execute hourly to daily aggregation successfully\u001b[39m\u001b[22m\n\n    Failed to aggregate hourly metrics using stored procedure\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 201 |\u001b[39m \u001b[32m    } catch (error) {\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 202 |\u001b[39m \u001b[32m      logger.error('Error executing aggregate_hourly_to_daily stored procedure:', error);\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 203 |\u001b[39m \u001b[32m      throw new Error('Failed to aggregate hourly metrics using stored procedure');\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 204 |\u001b[39m \u001b[32m    }\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 205 |\u001b[39m \u001b[32m  }\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 206 |\u001b[39m \u001b[32m\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat StoredProceduresService.aggregateHourlyToDaily (\u001b[22m\u001b[2msrc/services/stored-procedures.service.ts\u001b[2m:203:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/stored-procedures.test.ts\u001b[39m\u001b[0m\u001b[2m:333:22)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStoredProceduresService › aggregateHourlyToDaily › should handle no data to aggregate\u001b[39m\u001b[22m\n\n    Failed to aggregate hourly metrics using stored procedure\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 201 |\u001b[39m \u001b[32m    } catch (error) {\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 202 |\u001b[39m \u001b[32m      logger.error('Error executing aggregate_hourly_to_daily stored procedure:', error);\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 203 |\u001b[39m \u001b[32m      throw new Error('Failed to aggregate hourly metrics using stored procedure');\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 204 |\u001b[39m \u001b[32m    }\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 205 |\u001b[39m \u001b[32m  }\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 206 |\u001b[39m \u001b[32m\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat StoredProceduresService.aggregateHourlyToDaily (\u001b[22m\u001b[2msrc/services/stored-procedures.service.ts\u001b[2m:203:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/stored-procedures.test.ts\u001b[39m\u001b[0m\u001b[2m:346:22)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStoredProceduresService › aggregateHourlyToDaily › should validate target date\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected substring: \u001b[32m\"Target date is required\"\u001b[39m\n    Received message:   \u001b[31m\"Failed to aggregate hourly metrics using stored procedure\"\u001b[39m\n\n        \u001b[0m \u001b[90m 201 |\u001b[39m \u001b[32m    } catch (error) {\u001b[39m\n         \u001b[90m 202 |\u001b[39m \u001b[32m      logger.error('Error executing aggregate_hourly_to_daily stored procedure:', error);\u001b[39m\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 203 |\u001b[39m \u001b[32m      throw new Error('Failed to aggregate hourly metrics using stored procedure');\u001b[39m\n         \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 204 |\u001b[39m \u001b[32m    }\u001b[39m\n         \u001b[90m 205 |\u001b[39m \u001b[32m  }\u001b[39m\n         \u001b[90m 206 |\u001b[39m \u001b[32m\u001b[39m\u001b[0m\n\n          \u001b[2mat StoredProceduresService.aggregateHourlyToDaily (\u001b[22msrc/services/stored-procedures.service.ts\u001b[2m:203:13)\u001b[22m\n          \u001b[2mat Object.<anonymous> (\u001b[22msrc/tests/stored-procedures.test.ts\u001b[2m:352:7)\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 352 |\u001b[39m       \u001b[36mawait\u001b[39m expect(\u001b[22m\n\u001b[2m     \u001b[90m 353 |\u001b[39m         storedProceduresService\u001b[33m.\u001b[39maggregateHourlyToDaily(\u001b[36mnull\u001b[39m \u001b[36mas\u001b[39m any)\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 354 |\u001b[39m       )\u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m'Target date is required'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 355 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 356 |\u001b[39m       \u001b[90m// Future date validation\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 357 |\u001b[39m       \u001b[36mconst\u001b[39m futureDate \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mDate\u001b[39m(\u001b[33mDate\u001b[39m\u001b[33m.\u001b[39mnow() \u001b[33m+\u001b[39m \u001b[35m24\u001b[39m \u001b[33m*\u001b[39m \u001b[35m60\u001b[39m \u001b[33m*\u001b[39m \u001b[35m60\u001b[39m \u001b[33m*\u001b[39m \u001b[35m1000\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toThrow (\u001b[22m\u001b[2m../../node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js\u001b[2m:218:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/stored-procedures.test.ts\u001b[39m\u001b[0m\u001b[2m:354:17)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStoredProceduresService › cleanupOldData › should execute data cleanup successfully\u001b[39m\u001b[22m\n\n    TypeError: storedProceduresService.cleanupOldData is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 366 |\u001b[39m       mockPrisma\u001b[33m.\u001b[39m$executeRaw\u001b[33m.\u001b[39mmockResolvedValue(\u001b[35m100\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 100 records deleted\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 367 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 368 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m storedProceduresService\u001b[33m.\u001b[39mcleanupOldData(\u001b[35m90\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 90 days\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 369 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 370 |\u001b[39m       expect(mockPrisma\u001b[33m.\u001b[39m$executeRaw)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[22m\n\u001b[2m     \u001b[90m 371 |\u001b[39m         expect\u001b[33m.\u001b[39manything()\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/stored-procedures.test.ts\u001b[39m\u001b[0m\u001b[2m:368:52)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStoredProceduresService › cleanupOldData › should use default retention period\u001b[39m\u001b[22m\n\n    TypeError: storedProceduresService.cleanupOldData is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 378 |\u001b[39m       mockPrisma\u001b[33m.\u001b[39m$executeRaw\u001b[33m.\u001b[39mmockResolvedValue(\u001b[35m50\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 379 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 380 |\u001b[39m       \u001b[36mawait\u001b[39m storedProceduresService\u001b[33m.\u001b[39mcleanupOldData()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 381 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 382 |\u001b[39m       expect(mockPrisma\u001b[33m.\u001b[39m$executeRaw)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[22m\n\u001b[2m     \u001b[90m 383 |\u001b[39m         expect\u001b[33m.\u001b[39manything()\u001b[33m,\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/stored-procedures.test.ts\u001b[39m\u001b[0m\u001b[2m:380:37)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStoredProceduresService › cleanupOldData › should validate retention period\u001b[39m\u001b[22m\n\n    TypeError: storedProceduresService.cleanupOldData is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 388 |\u001b[39m     it(\u001b[32m'should validate retention period'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 389 |\u001b[39m       \u001b[36mawait\u001b[39m expect(\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 390 |\u001b[39m         storedProceduresService\u001b[33m.\u001b[39mcleanupOldData(\u001b[35m0\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 391 |\u001b[39m       )\u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m'Retention period must be greater than 0'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 392 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 393 |\u001b[39m       \u001b[36mawait\u001b[39m expect(\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/stored-procedures.test.ts\u001b[39m\u001b[0m\u001b[2m:390:33)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStoredProceduresService › checkStoredProceduresHealth › should return healthy status when all procedures exist\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveProperty\u001b[2m(\u001b[22m\u001b[32mpath\u001b[39m\u001b[2m, \u001b[22m\u001b[32mvalue\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected path: \u001b[32m\"status\"\u001b[39m\n    Received path: \u001b[31m[]\u001b[39m\n\n    Expected value: \u001b[32m\"healthy\"\u001b[39m\n    Received value: \u001b[31m{\"available\": false, \"missing\": [\"calculate_kpi_metrics\", \"get_top_campaigns\", \"calculate_funnel_metrics\", \"aggregate_hourly_to_daily\", \"cleanup_old_metrics\", \"get_realtime_dashboard\"], \"procedures\": [undefined]}\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 413 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m storedProceduresService\u001b[33m.\u001b[39mcheckStoredProceduresHealth()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 414 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 415 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'status'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'healthy'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 416 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'procedures'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 417 |\u001b[39m       expect(result\u001b[33m.\u001b[39mprocedures)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 418 |\u001b[39m       expect(result\u001b[33m.\u001b[39mprocedures[\u001b[35m0\u001b[39m])\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'name'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'calculate_kpi_metrics'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/stored-procedures.test.ts\u001b[39m\u001b[0m\u001b[2m:415:22)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStoredProceduresService › checkStoredProceduresHealth › should return unhealthy status when procedures are missing\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveProperty\u001b[2m(\u001b[22m\u001b[32mpath\u001b[39m\u001b[2m, \u001b[22m\u001b[32mvalue\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected path: \u001b[32m\"status\"\u001b[39m\n    Received path: \u001b[31m[]\u001b[39m\n\n    Expected value: \u001b[32m\"unhealthy\"\u001b[39m\n    Received value: \u001b[31m{\"available\": false, \"missing\": [\"calculate_kpi_metrics\", \"get_top_campaigns\", \"calculate_funnel_metrics\", \"aggregate_hourly_to_daily\", \"cleanup_old_metrics\", \"get_realtime_dashboard\"], \"procedures\": [undefined]}\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 435 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m storedProceduresService\u001b[33m.\u001b[39mcheckStoredProceduresHealth()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 436 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 437 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'status'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'unhealthy'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 438 |\u001b[39m       expect(result\u001b[33m.\u001b[39mprocedures[\u001b[35m0\u001b[39m])\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'exists'\u001b[39m\u001b[33m,\u001b[39m \u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 439 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 440 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/stored-procedures.test.ts\u001b[39m\u001b[0m\u001b[2m:437:22)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStoredProceduresService › checkStoredProceduresHealth › should handle database errors during health check\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveProperty\u001b[2m(\u001b[22m\u001b[32mpath\u001b[39m\u001b[2m, \u001b[22m\u001b[32mvalue\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected path: \u001b[32m\"status\"\u001b[39m\n    Received path: \u001b[31m[]\u001b[39m\n\n    Expected value: \u001b[32m\"error\"\u001b[39m\n    Received value: \u001b[31m{\"available\": false, \"missing\": [], \"procedures\": []}\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 444 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m storedProceduresService\u001b[33m.\u001b[39mcheckStoredProceduresHealth()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 445 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 446 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'status'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'error'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 447 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'error'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'Database error'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 448 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 449 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/stored-procedures.test.ts\u001b[39m\u001b[0m\u001b[2m:446:22)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStoredProceduresService › installStoredProcedures › should install stored procedures successfully\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledTimes\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected number of calls: \u001b[32m6\u001b[39m\n    Received number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 456 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 457 |\u001b[39m       \u001b[90m// Should execute multiple SQL statements for each procedure\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 458 |\u001b[39m       expect(mockPrisma\u001b[33m.\u001b[39m$executeRawUnsafe)\u001b[33m.\u001b[39mtoHaveBeenCalledTimes(\u001b[35m6\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 6 procedures\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 459 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 460 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 461 |\u001b[39m     it(\u001b[32m'should handle installation errors gracefully'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/stored-procedures.test.ts\u001b[39m\u001b[0m\u001b[2m:458:44)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStoredProceduresService › installStoredProcedures › should handle installation errors gracefully\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\n    Received promise resolved instead of rejected\n    Resolved to value: \u001b[31mundefined\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 462 |\u001b[39m       mockPrisma\u001b[33m.\u001b[39m$executeRawUnsafe\u001b[33m.\u001b[39mmockRejectedValue(\u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'SQL syntax error'\u001b[39m))\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 463 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 464 |\u001b[39m       \u001b[36mawait\u001b[39m expect(storedProceduresService\u001b[33m.\u001b[39minstallStoredProcedures())\u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 465 |\u001b[39m         \u001b[32m'SQL syntax error'\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 466 |\u001b[39m       )\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 467 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat expect (\u001b[22m\u001b[2m../../node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js\u001b[2m:113:15)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/stored-procedures.test.ts\u001b[39m\u001b[0m\u001b[2m:464:19)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStoredProceduresService › getPerformanceStats › should return performance statistics\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveProperty\u001b[2m(\u001b[22m\u001b[32mpath\u001b[39m\u001b[2m, \u001b[22m\u001b[32mvalue\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected path: \u001b[32m\"procedureName\"\u001b[39m\n    Received path: \u001b[31m[]\u001b[39m\n\n    Expected value: \u001b[32m\"calculate_kpi_metrics\"\u001b[39m\n    Received value: \u001b[31m{\"avg_execution_time\": 250, \"last_executed\": 2025-09-12T00:53:59.197Z, \"max_execution_time\": 500, \"min_execution_time\": 100, \"procedure_name\": \"calculate_kpi_metrics\", \"total_executions\": 1000}\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 486 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 487 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 488 |\u001b[39m       expect(result[\u001b[35m0\u001b[39m])\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'procedureName'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'calculate_kpi_metrics'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 489 |\u001b[39m       expect(result[\u001b[35m0\u001b[39m])\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'totalExecutions'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m1000\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 490 |\u001b[39m       expect(result[\u001b[35m0\u001b[39m])\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'avgExecutionTime'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m250\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 491 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/stored-procedures.test.ts\u001b[39m\u001b[0m\u001b[2m:488:25)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStoredProceduresService › Error Handling › should handle SQL injection attempts\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected substring: \u001b[32m\"Organization ID is required\"\u001b[39m\n    Received message:   \u001b[31m\"Failed to calculate KPI metrics using stored procedure\"\u001b[39m\n\n        \u001b[0m \u001b[90m 85 |\u001b[39m \u001b[32m    } catch (error) {\u001b[39m\n         \u001b[90m 86 |\u001b[39m \u001b[32m      logger.error('Error executing calculate_kpi_metrics stored procedure:', error);\u001b[39m\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 87 |\u001b[39m \u001b[32m      throw new Error('Failed to calculate KPI metrics using stored procedure');\u001b[39m\n         \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 88 |\u001b[39m \u001b[32m    }\u001b[39m\n         \u001b[90m 89 |\u001b[39m \u001b[32m  }\u001b[39m\n         \u001b[90m 90 |\u001b[39m \u001b[32m\u001b[39m\u001b[0m\n\n          \u001b[2mat StoredProceduresService.calculateKPIMetrics (\u001b[22msrc/services/stored-procedures.service.ts\u001b[2m:87:13)\u001b[22m\n          \u001b[2mat Object.<anonymous> (\u001b[22msrc/tests/stored-procedures.test.ts\u001b[2m:510:33)\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 513 |\u001b[39m           mockEndDate\u001b[22m\n\u001b[2m     \u001b[90m 514 |\u001b[39m         )\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 515 |\u001b[39m       )\u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m'Organization ID is required'\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Should fail validation\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 516 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 517 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 518 |\u001b[39m     it(\u001b[32m'should handle connection timeouts'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toThrow (\u001b[22m\u001b[2m../../node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js\u001b[2m:218:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/stored-procedures.test.ts\u001b[39m\u001b[0m\u001b[2m:515:17)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStoredProceduresService › Error Handling › should handle connection timeouts\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected substring: \u001b[32m\"Connection timeout\"\u001b[39m\n    Received message:   \u001b[31m\"Failed to calculate KPI metrics using stored procedure\"\u001b[39m\n\n        \u001b[0m \u001b[90m 85 |\u001b[39m \u001b[32m    } catch (error) {\u001b[39m\n         \u001b[90m 86 |\u001b[39m \u001b[32m      logger.error('Error executing calculate_kpi_metrics stored procedure:', error);\u001b[39m\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 87 |\u001b[39m \u001b[32m      throw new Error('Failed to calculate KPI metrics using stored procedure');\u001b[39m\n         \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 88 |\u001b[39m \u001b[32m    }\u001b[39m\n         \u001b[90m 89 |\u001b[39m \u001b[32m  }\u001b[39m\n         \u001b[90m 90 |\u001b[39m \u001b[32m\u001b[39m\u001b[0m\n\n          \u001b[2mat StoredProceduresService.calculateKPIMetrics (\u001b[22msrc/services/stored-procedures.service.ts\u001b[2m:87:13)\u001b[22m\n          \u001b[2mat Object.<anonymous> (\u001b[22msrc/tests/stored-procedures.test.ts\u001b[2m:522:33)\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 525 |\u001b[39m           mockEndDate\u001b[22m\n\u001b[2m     \u001b[90m 526 |\u001b[39m         )\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 527 |\u001b[39m       )\u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m'Connection timeout'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 528 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 529 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 530 |\u001b[39m     it(\u001b[32m'should handle memory errors for large datasets'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toThrow (\u001b[22m\u001b[2m../../node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js\u001b[2m:218:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/stored-procedures.test.ts\u001b[39m\u001b[0m\u001b[2m:527:17)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStoredProceduresService › Error Handling › should handle memory errors for large datasets\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected substring: \u001b[32m\"Out of memory\"\u001b[39m\n    Received message:   \u001b[31m\"Failed to get top campaigns using stored procedure\"\u001b[39m\n\n        \u001b[0m \u001b[90m 118 |\u001b[39m \u001b[32m    } catch (error) {\u001b[39m\n         \u001b[90m 119 |\u001b[39m \u001b[32m      logger.error('Error executing get_top_campaigns stored procedure:', error);\u001b[39m\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 120 |\u001b[39m \u001b[32m      throw new Error('Failed to get top campaigns using stored procedure');\u001b[39m\n         \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 121 |\u001b[39m \u001b[32m    }\u001b[39m\n         \u001b[90m 122 |\u001b[39m \u001b[32m  }\u001b[39m\n         \u001b[90m 123 |\u001b[39m \u001b[32m\u001b[39m\u001b[0m\n\n          \u001b[2mat StoredProceduresService.getTopCampaigns (\u001b[22msrc/services/stored-procedures.service.ts\u001b[2m:120:13)\u001b[22m\n          \u001b[2mat Object.<anonymous> (\u001b[22msrc/tests/stored-procedures.test.ts\u001b[2m:533:7)\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 539 |\u001b[39m           \u001b[35m100\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 540 |\u001b[39m         )\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 541 |\u001b[39m       )\u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m'Out of memory'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 542 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 543 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 544 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toThrow (\u001b[22m\u001b[2m../../node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js\u001b[2m:218:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/stored-procedures.test.ts\u001b[39m\u001b[0m\u001b[2m:541:17)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStoredProceduresService › Performance › should complete KPI calculation within reasonable time\u001b[39m\u001b[22m\n\n    Failed to calculate KPI metrics using stored procedure\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 85 |\u001b[39m \u001b[32m    } catch (error) {\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 86 |\u001b[39m \u001b[32m      logger.error('Error executing calculate_kpi_metrics stored procedure:', error);\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 87 |\u001b[39m \u001b[32m      throw new Error('Failed to calculate KPI metrics using stored procedure');\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 88 |\u001b[39m \u001b[32m    }\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 89 |\u001b[39m \u001b[32m  }\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 90 |\u001b[39m \u001b[32m\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat StoredProceduresService.calculateKPIMetrics (\u001b[22m\u001b[2msrc/services/stored-procedures.service.ts\u001b[2m:87:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/stored-procedures.test.ts\u001b[39m\u001b[0m\u001b[2m:550:37)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStoredProceduresService › Performance › should handle concurrent procedure calls\u001b[39m\u001b[22m\n\n    Failed to calculate KPI metrics using stored procedure\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 85 |\u001b[39m \u001b[32m    } catch (error) {\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 86 |\u001b[39m \u001b[32m      logger.error('Error executing calculate_kpi_metrics stored procedure:', error);\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 87 |\u001b[39m \u001b[32m      throw new Error('Failed to calculate KPI metrics using stored procedure');\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 88 |\u001b[39m \u001b[32m    }\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 89 |\u001b[39m \u001b[32m  }\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 90 |\u001b[39m \u001b[32m\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat StoredProceduresService.calculateKPIMetrics (\u001b[22m\u001b[2msrc/services/stored-procedures.service.ts\u001b[2m:87:13)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/stored-procedures.test.ts\u001b[39m\u001b[0m\u001b[2m:566:33\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m          at Function.from (<anonymous>)\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/stored-procedures.test.ts\u001b[39m\u001b[0m\u001b[2m:565:30)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStoredProceduresService › Data Validation › should validate UUID format for organization ID\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected substring: \u001b[32m\"Invalid organization ID format\"\u001b[39m\n    Received message:   \u001b[31m\"Failed to calculate KPI metrics using stored procedure\"\u001b[39m\n\n        \u001b[0m \u001b[90m 85 |\u001b[39m \u001b[32m    } catch (error) {\u001b[39m\n         \u001b[90m 86 |\u001b[39m \u001b[32m      logger.error('Error executing calculate_kpi_metrics stored procedure:', error);\u001b[39m\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 87 |\u001b[39m \u001b[32m      throw new Error('Failed to calculate KPI metrics using stored procedure');\u001b[39m\n         \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 88 |\u001b[39m \u001b[32m    }\u001b[39m\n         \u001b[90m 89 |\u001b[39m \u001b[32m  }\u001b[39m\n         \u001b[90m 90 |\u001b[39m \u001b[32m\u001b[39m\u001b[0m\n\n          \u001b[2mat StoredProceduresService.calculateKPIMetrics (\u001b[22msrc/services/stored-procedures.service.ts\u001b[2m:87:13)\u001b[22m\n          \u001b[2mat Object.<anonymous> (\u001b[22msrc/tests/stored-procedures.test.ts\u001b[2m:587:33)\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 590 |\u001b[39m           mockEndDate\u001b[22m\n\u001b[2m     \u001b[90m 591 |\u001b[39m         )\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 592 |\u001b[39m       )\u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m'Invalid organization ID format'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 593 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 594 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 595 |\u001b[39m     it(\u001b[32m'should validate UUID format for campaign ID'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toThrow (\u001b[22m\u001b[2m../../node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js\u001b[2m:218:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/stored-procedures.test.ts\u001b[39m\u001b[0m\u001b[2m:592:17)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStoredProceduresService › Data Validation › should validate UUID format for campaign ID\u001b[39m\u001b[22m\n\n    TypeError: storedProceduresService.updateRealTimeMetrics is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 597 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 598 |\u001b[39m       \u001b[36mawait\u001b[39m expect(\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 599 |\u001b[39m         storedProceduresService\u001b[33m.\u001b[39mupdateRealTimeMetrics(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 600 |\u001b[39m           invalidUUID\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 601 |\u001b[39m           \u001b[32m'CLICK'\u001b[39m\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 602 |\u001b[39m           {}\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/stored-procedures.test.ts\u001b[39m\u001b[0m\u001b[2m:599:33)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mStoredProceduresService › Data Validation › should validate date objects\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected substring: \u001b[32m\"Invalid start date\"\u001b[39m\n    Received message:   \u001b[31m\"Failed to calculate KPI metrics using stored procedure\"\u001b[39m\n\n        \u001b[0m \u001b[90m 85 |\u001b[39m \u001b[32m    } catch (error) {\u001b[39m\n         \u001b[90m 86 |\u001b[39m \u001b[32m      logger.error('Error executing calculate_kpi_metrics stored procedure:', error);\u001b[39m\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 87 |\u001b[39m \u001b[32m      throw new Error('Failed to calculate KPI metrics using stored procedure');\u001b[39m\n         \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 88 |\u001b[39m \u001b[32m    }\u001b[39m\n         \u001b[90m 89 |\u001b[39m \u001b[32m  }\u001b[39m\n         \u001b[90m 90 |\u001b[39m \u001b[32m\u001b[39m\u001b[0m\n\n          \u001b[2mat StoredProceduresService.calculateKPIMetrics (\u001b[22msrc/services/stored-procedures.service.ts\u001b[2m:87:13)\u001b[22m\n          \u001b[2mat Object.<anonymous> (\u001b[22msrc/tests/stored-procedures.test.ts\u001b[2m:611:33)\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 614 |\u001b[39m           mockEndDate\u001b[22m\n\u001b[2m     \u001b[90m 615 |\u001b[39m         )\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 616 |\u001b[39m       )\u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[32m'Invalid start date'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                 \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 617 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 618 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 619 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toThrow (\u001b[22m\u001b[2m../../node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js\u001b[2m:218:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/stored-procedures.test.ts\u001b[39m\u001b[0m\u001b[2m:616:17)\u001b[22m\u001b[2m\u001b[22m\n","testResults":[{"ancestorTitles":["StoredProceduresService","calculateKPIMetrics"],"duration":6,"failureMessages":["Error: Failed to calculate KPI metrics using stored procedure\n    at StoredProceduresService.calculateKPIMetrics (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\stored-procedures.service.ts:87:13)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts:90:52)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"StoredProceduresService calculateKPIMetrics should execute KPI calculation stored procedure successfully","status":"failed","title":"should execute KPI calculation stored procedure successfully"},{"ancestorTitles":["StoredProceduresService","calculateKPIMetrics"],"duration":5,"failureMessages":["Error: Failed to calculate KPI metrics using stored procedure\n    at StoredProceduresService.calculateKPIMetrics (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\stored-procedures.service.ts:87:13)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts:108:52)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"StoredProceduresService calculateKPIMetrics should handle empty results gracefully","status":"failed","title":"should handle empty results gracefully"},{"ancestorTitles":["StoredProceduresService","calculateKPIMetrics"],"duration":11,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected substring: \u001b[32m\"Database connection failed\"\u001b[39m\nReceived message:   \u001b[31m\"Failed to calculate KPI metrics using stored procedure\"\u001b[39m\n\n    \u001b[0m \u001b[90m 85 |\u001b[39m \u001b[32m    } catch (error) {\u001b[39m\n     \u001b[90m 86 |\u001b[39m \u001b[32m      logger.error('Error executing calculate_kpi_metrics stored procedure:', error);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 87 |\u001b[39m \u001b[32m      throw new Error('Failed to calculate KPI metrics using stored procedure');\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 88 |\u001b[39m \u001b[32m    }\u001b[39m\n     \u001b[90m 89 |\u001b[39m \u001b[32m  }\u001b[39m\n     \u001b[90m 90 |\u001b[39m \u001b[32m\u001b[39m\u001b[0m\n\n      \u001b[2mat StoredProceduresService.calculateKPIMetrics (\u001b[22msrc/services/stored-procedures.service.ts\u001b[2m:87:13)\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22msrc/tests/stored-procedures.test.ts\u001b[2m:121:33)\u001b[22m\n    at Object.toThrow (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\expect@29.7.0\\node_modules\\expect\\build\\index.js:218:22)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts:126:17)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"StoredProceduresService calculateKPIMetrics should handle database errors","status":"failed","title":"should handle database errors"},{"ancestorTitles":["StoredProceduresService","calculateKPIMetrics"],"duration":8,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected substring: \u001b[32m\"Organization ID is required\"\u001b[39m\nReceived message:   \u001b[31m\"Failed to calculate KPI metrics using stored procedure\"\u001b[39m\n\n    \u001b[0m \u001b[90m 85 |\u001b[39m \u001b[32m    } catch (error) {\u001b[39m\n     \u001b[90m 86 |\u001b[39m \u001b[32m      logger.error('Error executing calculate_kpi_metrics stored procedure:', error);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 87 |\u001b[39m \u001b[32m      throw new Error('Failed to calculate KPI metrics using stored procedure');\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 88 |\u001b[39m \u001b[32m    }\u001b[39m\n     \u001b[90m 89 |\u001b[39m \u001b[32m  }\u001b[39m\n     \u001b[90m 90 |\u001b[39m \u001b[32m\u001b[39m\u001b[0m\n\n      \u001b[2mat StoredProceduresService.calculateKPIMetrics (\u001b[22msrc/services/stored-procedures.service.ts\u001b[2m:87:13)\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22msrc/tests/stored-procedures.test.ts\u001b[2m:131:33)\u001b[22m\n    at Object.toThrow (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\expect@29.7.0\\node_modules\\expect\\build\\index.js:218:22)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts:132:17)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"StoredProceduresService calculateKPIMetrics should validate input parameters","status":"failed","title":"should validate input parameters"},{"ancestorTitles":["StoredProceduresService","calculateKPIMetrics"],"duration":8,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected substring: \u001b[32m\"End date must be after start date\"\u001b[39m\nReceived message:   \u001b[31m\"Failed to calculate KPI metrics using stored procedure\"\u001b[39m\n\n    \u001b[0m \u001b[90m 85 |\u001b[39m \u001b[32m    } catch (error) {\u001b[39m\n     \u001b[90m 86 |\u001b[39m \u001b[32m      logger.error('Error executing calculate_kpi_metrics stored procedure:', error);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 87 |\u001b[39m \u001b[32m      throw new Error('Failed to calculate KPI metrics using stored procedure');\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 88 |\u001b[39m \u001b[32m    }\u001b[39m\n     \u001b[90m 89 |\u001b[39m \u001b[32m  }\u001b[39m\n     \u001b[90m 90 |\u001b[39m \u001b[32m\u001b[39m\u001b[0m\n\n      \u001b[2mat StoredProceduresService.calculateKPIMetrics (\u001b[22msrc/services/stored-procedures.service.ts\u001b[2m:87:13)\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22msrc/tests/stored-procedures.test.ts\u001b[2m:147:33)\u001b[22m\n    at Object.toThrow (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\expect@29.7.0\\node_modules\\expect\\build\\index.js:218:22)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts:152:17)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"StoredProceduresService calculateKPIMetrics should validate date range","status":"failed","title":"should validate date range"},{"ancestorTitles":["StoredProceduresService","getTopCampaigns"],"duration":38,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAnything\u001b[39m, \u001b[32m\"123e4567-e89b-12d3-a456-426614174000\"\u001b[39m, \u001b[32m2024-01-01T00:00:00.000Z\u001b[39m, \u001b[32m2024-01-31T00:00:00.000Z\u001b[39m, \u001b[32m\"revenue\"\u001b[39m, \u001b[32m10\u001b[39m\nReceived: \u001b[2m[\"\u001b[22m\n\u001b[2m        SELECT * FROM get_top_campaigns(\u001b[22m\n\u001b[2m          \", \"::uuid,\u001b[22m\n\u001b[2m          \", \"::date,\u001b[22m\n\u001b[2m          \", \"::date,\u001b[22m\n\u001b[2m          \", \"::integer\u001b[22m\n\u001b[2m        )\u001b[22m\n\u001b[2m      \"]\u001b[22m, \u001b[2m\"123e4567-e89b-12d3-a456-426614174000\"\u001b[22m, \u001b[2m2024-01-01T00:00:00.000Z\u001b[22m, \u001b[2m2024-01-31T00:00:00.000Z\u001b[22m, \u001b[2m\"revenue\"\u001b[22m\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts:168:36)"],"fullName":"StoredProceduresService getTopCampaigns should execute top campaigns stored procedure successfully","status":"failed","title":"should execute top campaigns stored procedure successfully"},{"ancestorTitles":["StoredProceduresService","getTopCampaigns"],"duration":8,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected: \u001b[32mAnything\u001b[39m, \u001b[32m\"123e4567-e89b-12d3-a456-426614174000\"\u001b[39m, \u001b[32m2024-01-01T00:00:00.000Z\u001b[39m, \u001b[32m2024-01-31T00:00:00.000Z\u001b[39m, \u001b[32m\"revenue\"\u001b[39m, \u001b[32m5\u001b[39m\nReceived: \u001b[2m[\"\u001b[22m\n\u001b[2m        SELECT * FROM get_top_campaigns(\u001b[22m\n\u001b[2m          \", \"::uuid,\u001b[22m\n\u001b[2m          \", \"::date,\u001b[22m\n\u001b[2m          \", \"::date,\u001b[22m\n\u001b[2m          \", \"::integer\u001b[22m\n\u001b[2m        )\u001b[22m\n\u001b[2m      \"]\u001b[22m, \u001b[2m\"123e4567-e89b-12d3-a456-426614174000\"\u001b[22m, \u001b[2m2024-01-01T00:00:00.000Z\u001b[22m, \u001b[2m2024-01-31T00:00:00.000Z\u001b[22m, \u001b[31m10\u001b[39m\n\nNumber of calls: \u001b[31m1\u001b[39m\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts:188:36)"],"fullName":"StoredProceduresService getTopCampaigns should use default parameters when not provided","status":"failed","title":"should use default parameters when not provided"},{"ancestorTitles":["StoredProceduresService","getTopCampaigns"],"duration":7,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\nReceived promise resolved instead of rejected\nResolved to value: \u001b[31mundefined\u001b[39m\n    at expect (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\expect@29.7.0\\node_modules\\expect\\build\\index.js:113:15)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts:199:19)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"StoredProceduresService getTopCampaigns should validate metric parameter","status":"failed","title":"should validate metric parameter"},{"ancestorTitles":["StoredProceduresService","getTopCampaigns"],"duration":5,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\nReceived promise resolved instead of rejected\nResolved to value: \u001b[31mundefined\u001b[39m\n    at expect (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\expect@29.7.0\\node_modules\\expect\\build\\index.js:113:15)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts:210:19)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"StoredProceduresService getTopCampaigns should validate limit parameter","status":"failed","title":"should validate limit parameter"},{"ancestorTitles":["StoredProceduresService","calculateFunnelMetrics"],"duration":5,"failureMessages":[],"fullName":"StoredProceduresService calculateFunnelMetrics should execute funnel calculation stored procedure successfully","status":"passed","title":"should execute funnel calculation stored procedure successfully"},{"ancestorTitles":["StoredProceduresService","calculateFunnelMetrics"],"duration":4,"failureMessages":[],"fullName":"StoredProceduresService calculateFunnelMetrics should handle empty funnel results","status":"passed","title":"should handle empty funnel results"},{"ancestorTitles":["StoredProceduresService","calculateFunnelMetrics"],"duration":3,"failureMessages":[],"fullName":"StoredProceduresService calculateFunnelMetrics should calculate funnel conversion rates correctly","status":"passed","title":"should calculate funnel conversion rates correctly"},{"ancestorTitles":["StoredProceduresService","updateRealTimeMetrics"],"duration":3,"failureMessages":["TypeError: storedProceduresService.updateRealTimeMetrics is not a function\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts:283:37)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"StoredProceduresService updateRealTimeMetrics should execute real-time metrics update successfully","status":"failed","title":"should execute real-time metrics update successfully"},{"ancestorTitles":["StoredProceduresService","updateRealTimeMetrics"],"duration":2,"failureMessages":["TypeError: storedProceduresService.updateRealTimeMetrics is not a function\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts:301:37)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"StoredProceduresService updateRealTimeMetrics should handle different event types","status":"failed","title":"should handle different event types"},{"ancestorTitles":["StoredProceduresService","updateRealTimeMetrics"],"duration":3,"failureMessages":["TypeError: storedProceduresService.updateRealTimeMetrics is not a function\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts:319:33)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"StoredProceduresService updateRealTimeMetrics should validate event type","status":"failed","title":"should validate event type"},{"ancestorTitles":["StoredProceduresService","aggregateHourlyToDaily"],"duration":3,"failureMessages":["Error: Failed to aggregate hourly metrics using stored procedure\n    at StoredProceduresService.aggregateHourlyToDaily (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\stored-procedures.service.ts:203:13)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts:333:22)"],"fullName":"StoredProceduresService aggregateHourlyToDaily should execute hourly to daily aggregation successfully","status":"failed","title":"should execute hourly to daily aggregation successfully"},{"ancestorTitles":["StoredProceduresService","aggregateHourlyToDaily"],"duration":3,"failureMessages":["Error: Failed to aggregate hourly metrics using stored procedure\n    at StoredProceduresService.aggregateHourlyToDaily (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\stored-procedures.service.ts:203:13)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts:346:22)"],"fullName":"StoredProceduresService aggregateHourlyToDaily should handle no data to aggregate","status":"failed","title":"should handle no data to aggregate"},{"ancestorTitles":["StoredProceduresService","aggregateHourlyToDaily"],"duration":5,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected substring: \u001b[32m\"Target date is required\"\u001b[39m\nReceived message:   \u001b[31m\"Failed to aggregate hourly metrics using stored procedure\"\u001b[39m\n\n    \u001b[0m \u001b[90m 201 |\u001b[39m \u001b[32m    } catch (error) {\u001b[39m\n     \u001b[90m 202 |\u001b[39m \u001b[32m      logger.error('Error executing aggregate_hourly_to_daily stored procedure:', error);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 203 |\u001b[39m \u001b[32m      throw new Error('Failed to aggregate hourly metrics using stored procedure');\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 204 |\u001b[39m \u001b[32m    }\u001b[39m\n     \u001b[90m 205 |\u001b[39m \u001b[32m  }\u001b[39m\n     \u001b[90m 206 |\u001b[39m \u001b[32m\u001b[39m\u001b[0m\n\n      \u001b[2mat StoredProceduresService.aggregateHourlyToDaily (\u001b[22msrc/services/stored-procedures.service.ts\u001b[2m:203:13)\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22msrc/tests/stored-procedures.test.ts\u001b[2m:352:7)\u001b[22m\n    at Object.toThrow (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\expect@29.7.0\\node_modules\\expect\\build\\index.js:218:22)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts:354:17)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"StoredProceduresService aggregateHourlyToDaily should validate target date","status":"failed","title":"should validate target date"},{"ancestorTitles":["StoredProceduresService","cleanupOldData"],"duration":3,"failureMessages":["TypeError: storedProceduresService.cleanupOldData is not a function\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts:368:52)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"StoredProceduresService cleanupOldData should execute data cleanup successfully","status":"failed","title":"should execute data cleanup successfully"},{"ancestorTitles":["StoredProceduresService","cleanupOldData"],"duration":5,"failureMessages":["TypeError: storedProceduresService.cleanupOldData is not a function\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts:380:37)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"StoredProceduresService cleanupOldData should use default retention period","status":"failed","title":"should use default retention period"},{"ancestorTitles":["StoredProceduresService","cleanupOldData"],"duration":3,"failureMessages":["TypeError: storedProceduresService.cleanupOldData is not a function\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts:390:33)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"StoredProceduresService cleanupOldData should validate retention period","status":"failed","title":"should validate retention period"},{"ancestorTitles":["StoredProceduresService","checkStoredProceduresHealth"],"duration":4,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveProperty\u001b[2m(\u001b[22m\u001b[32mpath\u001b[39m\u001b[2m, \u001b[22m\u001b[32mvalue\u001b[39m\u001b[2m)\u001b[22m\n\nExpected path: \u001b[32m\"status\"\u001b[39m\nReceived path: \u001b[31m[]\u001b[39m\n\nExpected value: \u001b[32m\"healthy\"\u001b[39m\nReceived value: \u001b[31m{\"available\": false, \"missing\": [\"calculate_kpi_metrics\", \"get_top_campaigns\", \"calculate_funnel_metrics\", \"aggregate_hourly_to_daily\", \"cleanup_old_metrics\", \"get_realtime_dashboard\"], \"procedures\": [undefined]}\u001b[39m\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts:415:22)"],"fullName":"StoredProceduresService checkStoredProceduresHealth should return healthy status when all procedures exist","status":"failed","title":"should return healthy status when all procedures exist"},{"ancestorTitles":["StoredProceduresService","checkStoredProceduresHealth"],"duration":3,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveProperty\u001b[2m(\u001b[22m\u001b[32mpath\u001b[39m\u001b[2m, \u001b[22m\u001b[32mvalue\u001b[39m\u001b[2m)\u001b[22m\n\nExpected path: \u001b[32m\"status\"\u001b[39m\nReceived path: \u001b[31m[]\u001b[39m\n\nExpected value: \u001b[32m\"unhealthy\"\u001b[39m\nReceived value: \u001b[31m{\"available\": false, \"missing\": [\"calculate_kpi_metrics\", \"get_top_campaigns\", \"calculate_funnel_metrics\", \"aggregate_hourly_to_daily\", \"cleanup_old_metrics\", \"get_realtime_dashboard\"], \"procedures\": [undefined]}\u001b[39m\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts:437:22)"],"fullName":"StoredProceduresService checkStoredProceduresHealth should return unhealthy status when procedures are missing","status":"failed","title":"should return unhealthy status when procedures are missing"},{"ancestorTitles":["StoredProceduresService","checkStoredProceduresHealth"],"duration":4,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveProperty\u001b[2m(\u001b[22m\u001b[32mpath\u001b[39m\u001b[2m, \u001b[22m\u001b[32mvalue\u001b[39m\u001b[2m)\u001b[22m\n\nExpected path: \u001b[32m\"status\"\u001b[39m\nReceived path: \u001b[31m[]\u001b[39m\n\nExpected value: \u001b[32m\"error\"\u001b[39m\nReceived value: \u001b[31m{\"available\": false, \"missing\": [], \"procedures\": []}\u001b[39m\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts:446:22)"],"fullName":"StoredProceduresService checkStoredProceduresHealth should handle database errors during health check","status":"failed","title":"should handle database errors during health check"},{"ancestorTitles":["StoredProceduresService","installStoredProcedures"],"duration":2,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledTimes\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected number of calls: \u001b[32m6\u001b[39m\nReceived number of calls: \u001b[31m0\u001b[39m\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts:458:44)"],"fullName":"StoredProceduresService installStoredProcedures should install stored procedures successfully","status":"failed","title":"should install stored procedures successfully"},{"ancestorTitles":["StoredProceduresService","installStoredProcedures"],"duration":2,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\nReceived promise resolved instead of rejected\nResolved to value: \u001b[31mundefined\u001b[39m\n    at expect (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\expect@29.7.0\\node_modules\\expect\\build\\index.js:113:15)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts:464:19)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"StoredProceduresService installStoredProcedures should handle installation errors gracefully","status":"failed","title":"should handle installation errors gracefully"},{"ancestorTitles":["StoredProceduresService","getPerformanceStats"],"duration":3,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoHaveProperty\u001b[2m(\u001b[22m\u001b[32mpath\u001b[39m\u001b[2m, \u001b[22m\u001b[32mvalue\u001b[39m\u001b[2m)\u001b[22m\n\nExpected path: \u001b[32m\"procedureName\"\u001b[39m\nReceived path: \u001b[31m[]\u001b[39m\n\nExpected value: \u001b[32m\"calculate_kpi_metrics\"\u001b[39m\nReceived value: \u001b[31m{\"avg_execution_time\": 250, \"last_executed\": 2025-09-12T00:53:59.197Z, \"max_execution_time\": 500, \"min_execution_time\": 100, \"procedure_name\": \"calculate_kpi_metrics\", \"total_executions\": 1000}\u001b[39m\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts:488:25)"],"fullName":"StoredProceduresService getPerformanceStats should return performance statistics","status":"failed","title":"should return performance statistics"},{"ancestorTitles":["StoredProceduresService","getPerformanceStats"],"duration":2,"failureMessages":[],"fullName":"StoredProceduresService getPerformanceStats should handle empty performance stats","status":"passed","title":"should handle empty performance stats"},{"ancestorTitles":["StoredProceduresService","Error Handling"],"duration":7,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected substring: \u001b[32m\"Organization ID is required\"\u001b[39m\nReceived message:   \u001b[31m\"Failed to calculate KPI metrics using stored procedure\"\u001b[39m\n\n    \u001b[0m \u001b[90m 85 |\u001b[39m \u001b[32m    } catch (error) {\u001b[39m\n     \u001b[90m 86 |\u001b[39m \u001b[32m      logger.error('Error executing calculate_kpi_metrics stored procedure:', error);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 87 |\u001b[39m \u001b[32m      throw new Error('Failed to calculate KPI metrics using stored procedure');\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 88 |\u001b[39m \u001b[32m    }\u001b[39m\n     \u001b[90m 89 |\u001b[39m \u001b[32m  }\u001b[39m\n     \u001b[90m 90 |\u001b[39m \u001b[32m\u001b[39m\u001b[0m\n\n      \u001b[2mat StoredProceduresService.calculateKPIMetrics (\u001b[22msrc/services/stored-procedures.service.ts\u001b[2m:87:13)\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22msrc/tests/stored-procedures.test.ts\u001b[2m:510:33)\u001b[22m\n    at Object.toThrow (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\expect@29.7.0\\node_modules\\expect\\build\\index.js:218:22)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts:515:17)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"StoredProceduresService Error Handling should handle SQL injection attempts","status":"failed","title":"should handle SQL injection attempts"},{"ancestorTitles":["StoredProceduresService","Error Handling"],"duration":8,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected substring: \u001b[32m\"Connection timeout\"\u001b[39m\nReceived message:   \u001b[31m\"Failed to calculate KPI metrics using stored procedure\"\u001b[39m\n\n    \u001b[0m \u001b[90m 85 |\u001b[39m \u001b[32m    } catch (error) {\u001b[39m\n     \u001b[90m 86 |\u001b[39m \u001b[32m      logger.error('Error executing calculate_kpi_metrics stored procedure:', error);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 87 |\u001b[39m \u001b[32m      throw new Error('Failed to calculate KPI metrics using stored procedure');\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 88 |\u001b[39m \u001b[32m    }\u001b[39m\n     \u001b[90m 89 |\u001b[39m \u001b[32m  }\u001b[39m\n     \u001b[90m 90 |\u001b[39m \u001b[32m\u001b[39m\u001b[0m\n\n      \u001b[2mat StoredProceduresService.calculateKPIMetrics (\u001b[22msrc/services/stored-procedures.service.ts\u001b[2m:87:13)\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22msrc/tests/stored-procedures.test.ts\u001b[2m:522:33)\u001b[22m\n    at Object.toThrow (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\expect@29.7.0\\node_modules\\expect\\build\\index.js:218:22)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts:527:17)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"StoredProceduresService Error Handling should handle connection timeouts","status":"failed","title":"should handle connection timeouts"},{"ancestorTitles":["StoredProceduresService","Error Handling"],"duration":12,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected substring: \u001b[32m\"Out of memory\"\u001b[39m\nReceived message:   \u001b[31m\"Failed to get top campaigns using stored procedure\"\u001b[39m\n\n    \u001b[0m \u001b[90m 118 |\u001b[39m \u001b[32m    } catch (error) {\u001b[39m\n     \u001b[90m 119 |\u001b[39m \u001b[32m      logger.error('Error executing get_top_campaigns stored procedure:', error);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 120 |\u001b[39m \u001b[32m      throw new Error('Failed to get top campaigns using stored procedure');\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 121 |\u001b[39m \u001b[32m    }\u001b[39m\n     \u001b[90m 122 |\u001b[39m \u001b[32m  }\u001b[39m\n     \u001b[90m 123 |\u001b[39m \u001b[32m\u001b[39m\u001b[0m\n\n      \u001b[2mat StoredProceduresService.getTopCampaigns (\u001b[22msrc/services/stored-procedures.service.ts\u001b[2m:120:13)\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22msrc/tests/stored-procedures.test.ts\u001b[2m:533:7)\u001b[22m\n    at Object.toThrow (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\expect@29.7.0\\node_modules\\expect\\build\\index.js:218:22)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts:541:17)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"StoredProceduresService Error Handling should handle memory errors for large datasets","status":"failed","title":"should handle memory errors for large datasets"},{"ancestorTitles":["StoredProceduresService","Performance"],"duration":3,"failureMessages":["Error: Failed to calculate KPI metrics using stored procedure\n    at StoredProceduresService.calculateKPIMetrics (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\stored-procedures.service.ts:87:13)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts:550:37)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"StoredProceduresService Performance should complete KPI calculation within reasonable time","status":"failed","title":"should complete KPI calculation within reasonable time"},{"ancestorTitles":["StoredProceduresService","Performance"],"duration":10,"failureMessages":["Error: Failed to calculate KPI metrics using stored procedure\n    at StoredProceduresService.calculateKPIMetrics (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\stored-procedures.service.ts:87:13)\n    at C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts:566:33\n    at Function.from (<anonymous>)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts:565:30)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"StoredProceduresService Performance should handle concurrent procedure calls","status":"failed","title":"should handle concurrent procedure calls"},{"ancestorTitles":["StoredProceduresService","Data Validation"],"duration":8,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected substring: \u001b[32m\"Invalid organization ID format\"\u001b[39m\nReceived message:   \u001b[31m\"Failed to calculate KPI metrics using stored procedure\"\u001b[39m\n\n    \u001b[0m \u001b[90m 85 |\u001b[39m \u001b[32m    } catch (error) {\u001b[39m\n     \u001b[90m 86 |\u001b[39m \u001b[32m      logger.error('Error executing calculate_kpi_metrics stored procedure:', error);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 87 |\u001b[39m \u001b[32m      throw new Error('Failed to calculate KPI metrics using stored procedure');\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 88 |\u001b[39m \u001b[32m    }\u001b[39m\n     \u001b[90m 89 |\u001b[39m \u001b[32m  }\u001b[39m\n     \u001b[90m 90 |\u001b[39m \u001b[32m\u001b[39m\u001b[0m\n\n      \u001b[2mat StoredProceduresService.calculateKPIMetrics (\u001b[22msrc/services/stored-procedures.service.ts\u001b[2m:87:13)\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22msrc/tests/stored-procedures.test.ts\u001b[2m:587:33)\u001b[22m\n    at Object.toThrow (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\expect@29.7.0\\node_modules\\expect\\build\\index.js:218:22)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts:592:17)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"StoredProceduresService Data Validation should validate UUID format for organization ID","status":"failed","title":"should validate UUID format for organization ID"},{"ancestorTitles":["StoredProceduresService","Data Validation"],"duration":2,"failureMessages":["TypeError: storedProceduresService.updateRealTimeMetrics is not a function\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts:599:33)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"StoredProceduresService Data Validation should validate UUID format for campaign ID","status":"failed","title":"should validate UUID format for campaign ID"},{"ancestorTitles":["StoredProceduresService","Data Validation"],"duration":6,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected substring: \u001b[32m\"Invalid start date\"\u001b[39m\nReceived message:   \u001b[31m\"Failed to calculate KPI metrics using stored procedure\"\u001b[39m\n\n    \u001b[0m \u001b[90m 85 |\u001b[39m \u001b[32m    } catch (error) {\u001b[39m\n     \u001b[90m 86 |\u001b[39m \u001b[32m      logger.error('Error executing calculate_kpi_metrics stored procedure:', error);\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 87 |\u001b[39m \u001b[32m      throw new Error('Failed to calculate KPI metrics using stored procedure');\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 88 |\u001b[39m \u001b[32m    }\u001b[39m\n     \u001b[90m 89 |\u001b[39m \u001b[32m  }\u001b[39m\n     \u001b[90m 90 |\u001b[39m \u001b[32m\u001b[39m\u001b[0m\n\n      \u001b[2mat StoredProceduresService.calculateKPIMetrics (\u001b[22msrc/services/stored-procedures.service.ts\u001b[2m:87:13)\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22msrc/tests/stored-procedures.test.ts\u001b[2m:611:33)\u001b[22m\n    at Object.toThrow (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\expect@29.7.0\\node_modules\\expect\\build\\index.js:218:22)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\stored-procedures.test.ts:616:17)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"StoredProceduresService Data Validation should validate date objects","status":"failed","title":"should validate date objects"},{"ancestorTitles":["StoredProceduresService Integration"],"duration":null,"failureMessages":[],"fullName":"StoredProceduresService Integration should integrate with real PostgreSQL database","status":"pending","title":"should integrate with real PostgreSQL database"},{"ancestorTitles":["StoredProceduresService Integration"],"duration":null,"failureMessages":[],"fullName":"StoredProceduresService Integration should handle database migrations correctly","status":"pending","title":"should handle database migrations correctly"},{"ancestorTitles":["StoredProceduresService Integration"],"duration":null,"failureMessages":[],"fullName":"StoredProceduresService Integration should maintain data consistency under concurrent load","status":"pending","title":"should maintain data consistency under concurrent load"}]},{"numFailingTests":15,"numPassingTests":1,"numPendingTests":3,"numTodoTests":0,"perfStats":{"end":1757638440587,"runtime":963,"slow":false,"start":1757638439624},"testFilePath":"C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.test.ts","failureMessage":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetricsService › calculateMetrics › should calculate KPI metrics correctly\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'getOrSet')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 94 |\u001b[39m     \u001b[36mconst\u001b[39m cacheKey \u001b[33m=\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mgenerateCacheKey(\u001b[32m'calculate'\u001b[39m\u001b[33m,\u001b[39m filters)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 95 |\u001b[39m     \u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 96 |\u001b[39m     \u001b[36mreturn\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mcache\u001b[33m.\u001b[39mgetOrSet(\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m       cacheKey\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m       \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 99 |\u001b[39m         logger\u001b[33m.\u001b[39minfo(\u001b[32m'Calculating metrics from database'\u001b[39m\u001b[33m,\u001b[39m { filters })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat MetricsService.getOrSet [as calculateMetrics] (\u001b[22m\u001b[2msrc/services/metrics.service.ts\u001b[2m:96:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.test.ts\u001b[39m\u001b[0m\u001b[2m:110:43)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetricsService › calculateMetrics › should return empty metrics when no campaigns found\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'getOrSet')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 94 |\u001b[39m     \u001b[36mconst\u001b[39m cacheKey \u001b[33m=\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mgenerateCacheKey(\u001b[32m'calculate'\u001b[39m\u001b[33m,\u001b[39m filters)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 95 |\u001b[39m     \u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 96 |\u001b[39m     \u001b[36mreturn\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mcache\u001b[33m.\u001b[39mgetOrSet(\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m       cacheKey\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m       \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 99 |\u001b[39m         logger\u001b[33m.\u001b[39minfo(\u001b[32m'Calculating metrics from database'\u001b[39m\u001b[33m,\u001b[39m { filters })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat MetricsService.getOrSet [as calculateMetrics] (\u001b[22m\u001b[2msrc/services/metrics.service.ts\u001b[2m:96:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.test.ts\u001b[39m\u001b[0m\u001b[2m:141:43)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetricsService › calculateMetrics › should handle division by zero safely\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'getOrSet')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 94 |\u001b[39m     \u001b[36mconst\u001b[39m cacheKey \u001b[33m=\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mgenerateCacheKey(\u001b[32m'calculate'\u001b[39m\u001b[33m,\u001b[39m filters)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 95 |\u001b[39m     \u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 96 |\u001b[39m     \u001b[36mreturn\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mcache\u001b[33m.\u001b[39mgetOrSet(\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m       cacheKey\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m       \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 99 |\u001b[39m         logger\u001b[33m.\u001b[39minfo(\u001b[32m'Calculating metrics from database'\u001b[39m\u001b[33m,\u001b[39m { filters })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat MetricsService.getOrSet [as calculateMetrics] (\u001b[22m\u001b[2msrc/services/metrics.service.ts\u001b[2m:96:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.test.ts\u001b[39m\u001b[0m\u001b[2m:184:43)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetricsService › calculateMetrics › should use cache when available\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'getOrSet')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 94 |\u001b[39m     \u001b[36mconst\u001b[39m cacheKey \u001b[33m=\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mgenerateCacheKey(\u001b[32m'calculate'\u001b[39m\u001b[33m,\u001b[39m filters)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 95 |\u001b[39m     \u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 96 |\u001b[39m     \u001b[36mreturn\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mcache\u001b[33m.\u001b[39mgetOrSet(\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m       cacheKey\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m       \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 99 |\u001b[39m         logger\u001b[33m.\u001b[39minfo(\u001b[32m'Calculating metrics from database'\u001b[39m\u001b[33m,\u001b[39m { filters })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat MetricsService.getOrSet [as calculateMetrics] (\u001b[22m\u001b[2msrc/services/metrics.service.ts\u001b[2m:96:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.test.ts\u001b[39m\u001b[0m\u001b[2m:206:43)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetricsService › updateRealTimeMetrics › should update hourly metrics for CLICK event\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'invalidateCampaign')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 578 |\u001b[39m   \u001b[90m// Cache invalidation methods\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 579 |\u001b[39m   \u001b[36mpublic\u001b[39m \u001b[36masync\u001b[39m invalidateCampaignCache(campaignId\u001b[33m:\u001b[39m string)\u001b[33m:\u001b[39m \u001b[33mPromise\u001b[39m\u001b[33m<\u001b[39m\u001b[36mvoid\u001b[39m\u001b[33m>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 580 |\u001b[39m     \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mcache\u001b[33m.\u001b[39minvalidateCampaign(campaignId)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 581 |\u001b[39m   }\u001b[22m\n\u001b[2m     \u001b[90m 582 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 583 |\u001b[39m   \u001b[36mpublic\u001b[39m \u001b[36masync\u001b[39m invalidateOrganizationCache(organizationId\u001b[33m:\u001b[39m string)\u001b[33m:\u001b[39m \u001b[33mPromise\u001b[39m\u001b[33m<\u001b[39m\u001b[36mvoid\u001b[39m\u001b[33m>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat MetricsService.invalidateCampaign [as invalidateCampaignCache] (\u001b[22m\u001b[2msrc/services/metrics.service.ts\u001b[2m:580:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat MetricsService.invalidateCampaignCache [as updateRealTimeMetrics] (\u001b[22m\u001b[2msrc/services/metrics.service.ts\u001b[2m:246:18)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.test.ts\u001b[39m\u001b[0m\u001b[2m:221:7)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetricsService › updateRealTimeMetrics › should update hourly metrics for CONVERSION event with value\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'invalidateCampaign')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 578 |\u001b[39m   \u001b[90m// Cache invalidation methods\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 579 |\u001b[39m   \u001b[36mpublic\u001b[39m \u001b[36masync\u001b[39m invalidateCampaignCache(campaignId\u001b[33m:\u001b[39m string)\u001b[33m:\u001b[39m \u001b[33mPromise\u001b[39m\u001b[33m<\u001b[39m\u001b[36mvoid\u001b[39m\u001b[33m>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 580 |\u001b[39m     \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mcache\u001b[33m.\u001b[39minvalidateCampaign(campaignId)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 581 |\u001b[39m   }\u001b[22m\n\u001b[2m     \u001b[90m 582 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 583 |\u001b[39m   \u001b[36mpublic\u001b[39m \u001b[36masync\u001b[39m invalidateOrganizationCache(organizationId\u001b[33m:\u001b[39m string)\u001b[33m:\u001b[39m \u001b[33mPromise\u001b[39m\u001b[33m<\u001b[39m\u001b[36mvoid\u001b[39m\u001b[33m>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat MetricsService.invalidateCampaign [as invalidateCampaignCache] (\u001b[22m\u001b[2msrc/services/metrics.service.ts\u001b[2m:580:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat MetricsService.invalidateCampaignCache [as updateRealTimeMetrics] (\u001b[22m\u001b[2msrc/services/metrics.service.ts\u001b[2m:246:18)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.test.ts\u001b[39m\u001b[0m\u001b[2m:259:7)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetricsService › getDashboardMetrics › should generate comprehensive dashboard metrics\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'getOrSet')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 142 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 143 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 144 |\u001b[39m     \u001b[36mreturn\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mcache\u001b[33m.\u001b[39mgetOrSet(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 145 |\u001b[39m       cacheKey\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 146 |\u001b[39m       \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 147 |\u001b[39m         logger\u001b[33m.\u001b[39minfo(\u001b[32m'Generating dashboard metrics'\u001b[39m\u001b[33m,\u001b[39m { organizationId\u001b[33m,\u001b[39m dateRange })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat MetricsService.getOrSet [as getDashboardMetrics] (\u001b[22m\u001b[2msrc/services/metrics.service.ts\u001b[2m:144:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.test.ts\u001b[39m\u001b[0m\u001b[2m:317:43)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetricsService › compareMetrics › should compare metrics between two periods\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'getOrSet')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 190 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 191 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 192 |\u001b[39m     \u001b[36mreturn\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mcache\u001b[33m.\u001b[39mgetOrSet(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 193 |\u001b[39m       cacheKey\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 194 |\u001b[39m       \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 195 |\u001b[39m         logger\u001b[33m.\u001b[39minfo(\u001b[32m'Comparing metrics between periods'\u001b[39m\u001b[33m,\u001b[39m { filters\u001b[33m,\u001b[39m previousPeriod })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat MetricsService.getOrSet [as compareMetrics] (\u001b[22m\u001b[2msrc/services/metrics.service.ts\u001b[2m:192:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.test.ts\u001b[39m\u001b[0m\u001b[2m:367:43)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetricsService › exportMetrics › should export metrics in JSON format\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'getOrSet')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 592 |\u001b[39m     \u001b[36mconst\u001b[39m cacheKey \u001b[33m=\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mgenerateCacheKey(\u001b[32m'export'\u001b[39m\u001b[33m,\u001b[39m { \u001b[33m...\u001b[39mfilters\u001b[33m,\u001b[39m format })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 593 |\u001b[39m     \u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 594 |\u001b[39m     \u001b[36mreturn\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mcache\u001b[33m.\u001b[39mgetOrSet(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 595 |\u001b[39m       cacheKey\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 596 |\u001b[39m       \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 597 |\u001b[39m         logger\u001b[33m.\u001b[39minfo(\u001b[32m'Generating metrics export'\u001b[39m\u001b[33m,\u001b[39m { filters\u001b[33m,\u001b[39m format })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat MetricsService.getOrSet [as exportMetrics] (\u001b[22m\u001b[2msrc/services/metrics.service.ts\u001b[2m:594:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.test.ts\u001b[39m\u001b[0m\u001b[2m:390:43)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetricsService › exportMetrics › should export metrics in CSV format\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'getOrSet')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 592 |\u001b[39m     \u001b[36mconst\u001b[39m cacheKey \u001b[33m=\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mgenerateCacheKey(\u001b[32m'export'\u001b[39m\u001b[33m,\u001b[39m { \u001b[33m...\u001b[39mfilters\u001b[33m,\u001b[39m format })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 593 |\u001b[39m     \u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 594 |\u001b[39m     \u001b[36mreturn\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mcache\u001b[33m.\u001b[39mgetOrSet(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 595 |\u001b[39m       cacheKey\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 596 |\u001b[39m       \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 597 |\u001b[39m         logger\u001b[33m.\u001b[39minfo(\u001b[32m'Generating metrics export'\u001b[39m\u001b[33m,\u001b[39m { filters\u001b[33m,\u001b[39m format })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat MetricsService.getOrSet [as exportMetrics] (\u001b[22m\u001b[2msrc/services/metrics.service.ts\u001b[2m:594:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.test.ts\u001b[39m\u001b[0m\u001b[2m:409:43)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetricsService › Cache Integration › should invalidate campaign cache\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'invalidateCampaign')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 578 |\u001b[39m   \u001b[90m// Cache invalidation methods\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 579 |\u001b[39m   \u001b[36mpublic\u001b[39m \u001b[36masync\u001b[39m invalidateCampaignCache(campaignId\u001b[33m:\u001b[39m string)\u001b[33m:\u001b[39m \u001b[33mPromise\u001b[39m\u001b[33m<\u001b[39m\u001b[36mvoid\u001b[39m\u001b[33m>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 580 |\u001b[39m     \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mcache\u001b[33m.\u001b[39minvalidateCampaign(campaignId)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 581 |\u001b[39m   }\u001b[22m\n\u001b[2m     \u001b[90m 582 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 583 |\u001b[39m   \u001b[36mpublic\u001b[39m \u001b[36masync\u001b[39m invalidateOrganizationCache(organizationId\u001b[33m:\u001b[39m string)\u001b[33m:\u001b[39m \u001b[33mPromise\u001b[39m\u001b[33m<\u001b[39m\u001b[36mvoid\u001b[39m\u001b[33m>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat MetricsService.invalidateCampaign [as invalidateCampaignCache] (\u001b[22m\u001b[2msrc/services/metrics.service.ts\u001b[2m:580:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.test.ts\u001b[39m\u001b[0m\u001b[2m:423:28)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetricsService › Cache Integration › should invalidate organization cache\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'invalidateOrganization')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 582 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 583 |\u001b[39m   \u001b[36mpublic\u001b[39m \u001b[36masync\u001b[39m invalidateOrganizationCache(organizationId\u001b[33m:\u001b[39m string)\u001b[33m:\u001b[39m \u001b[33mPromise\u001b[39m\u001b[33m<\u001b[39m\u001b[36mvoid\u001b[39m\u001b[33m>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 584 |\u001b[39m     \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mcache\u001b[33m.\u001b[39minvalidateOrganization(organizationId)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 585 |\u001b[39m   }\u001b[22m\n\u001b[2m     \u001b[90m 586 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 587 |\u001b[39m   \u001b[90m// Export data (with caching for large exports)\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat MetricsService.invalidateOrganization [as invalidateOrganizationCache] (\u001b[22m\u001b[2msrc/services/metrics.service.ts\u001b[2m:584:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.test.ts\u001b[39m\u001b[0m\u001b[2m:431:28)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetricsService › Error Handling › should handle database errors gracefully\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected substring: \u001b[32m\"Database connection failed\"\u001b[39m\n    Received message:   \u001b[31m\"Cannot read properties of undefined (reading 'getOrSet')\"\u001b[39m\n\n        \u001b[0m \u001b[90m 94 |\u001b[39m     \u001b[36mconst\u001b[39m cacheKey \u001b[33m=\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mgenerateCacheKey(\u001b[32m'calculate'\u001b[39m\u001b[33m,\u001b[39m filters)\u001b[33m;\u001b[39m\n         \u001b[90m 95 |\u001b[39m     \n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 96 |\u001b[39m     \u001b[36mreturn\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mcache\u001b[33m.\u001b[39mgetOrSet(\n         \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 97 |\u001b[39m       cacheKey\u001b[33m,\u001b[39m\n         \u001b[90m 98 |\u001b[39m       \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n         \u001b[90m 99 |\u001b[39m         logger\u001b[33m.\u001b[39minfo(\u001b[32m'Calculating metrics from database'\u001b[39m\u001b[33m,\u001b[39m { filters })\u001b[33m;\u001b[39m\u001b[0m\n\n          \u001b[2mat MetricsService.getOrSet [as calculateMetrics] (\u001b[22msrc/services/metrics.service.ts\u001b[2m:96:23)\u001b[22m\n          \u001b[2mat Object.<anonymous> (\u001b[22msrc/tests/metrics.test.ts\u001b[2m:448:35)\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 446 |\u001b[39m       }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 447 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 448 |\u001b[39m       \u001b[36mawait\u001b[39m expect(metricsService\u001b[33m.\u001b[39mcalculateMetrics(filters))\u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 449 |\u001b[39m         \u001b[32m'Database connection failed'\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 450 |\u001b[39m       )\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 451 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toThrow (\u001b[22m\u001b[2m../../node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js\u001b[2m:218:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.test.ts\u001b[39m\u001b[0m\u001b[2m:448:70)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetricsService › Error Handling › should handle cache errors gracefully\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected substring: \u001b[32m\"Cache connection failed\"\u001b[39m\n    Received message:   \u001b[31m\"Cannot read properties of undefined (reading 'getOrSet')\"\u001b[39m\n\n        \u001b[0m \u001b[90m 94 |\u001b[39m     \u001b[36mconst\u001b[39m cacheKey \u001b[33m=\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mgenerateCacheKey(\u001b[32m'calculate'\u001b[39m\u001b[33m,\u001b[39m filters)\u001b[33m;\u001b[39m\n         \u001b[90m 95 |\u001b[39m     \n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 96 |\u001b[39m     \u001b[36mreturn\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mcache\u001b[33m.\u001b[39mgetOrSet(\n         \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 97 |\u001b[39m       cacheKey\u001b[33m,\u001b[39m\n         \u001b[90m 98 |\u001b[39m       \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n         \u001b[90m 99 |\u001b[39m         logger\u001b[33m.\u001b[39minfo(\u001b[32m'Calculating metrics from database'\u001b[39m\u001b[33m,\u001b[39m { filters })\u001b[33m;\u001b[39m\u001b[0m\n\n          \u001b[2mat MetricsService.getOrSet [as calculateMetrics] (\u001b[22msrc/services/metrics.service.ts\u001b[2m:96:23)\u001b[22m\n          \u001b[2mat Object.<anonymous> (\u001b[22msrc/tests/metrics.test.ts\u001b[2m:462:35)\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 460 |\u001b[39m       }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 461 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 462 |\u001b[39m       \u001b[36mawait\u001b[39m expect(metricsService\u001b[33m.\u001b[39mcalculateMetrics(filters))\u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 463 |\u001b[39m         \u001b[32m'Cache connection failed'\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 464 |\u001b[39m       )\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 465 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toThrow (\u001b[22m\u001b[2m../../node_modules/.pnpm/expect@29.7.0/node_modules/expect/build/index.js\u001b[2m:218:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.test.ts\u001b[39m\u001b[0m\u001b[2m:462:70)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetricsService › Performance › should complete metrics calculation within reasonable time\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'getOrSet')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 94 |\u001b[39m     \u001b[36mconst\u001b[39m cacheKey \u001b[33m=\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mgenerateCacheKey(\u001b[32m'calculate'\u001b[39m\u001b[33m,\u001b[39m filters)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 95 |\u001b[39m     \u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 96 |\u001b[39m     \u001b[36mreturn\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mcache\u001b[33m.\u001b[39mgetOrSet(\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 97 |\u001b[39m       cacheKey\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 98 |\u001b[39m       \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 99 |\u001b[39m         logger\u001b[33m.\u001b[39minfo(\u001b[32m'Calculating metrics from database'\u001b[39m\u001b[33m,\u001b[39m { filters })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat MetricsService.getOrSet [as calculateMetrics] (\u001b[22m\u001b[2msrc/services/metrics.service.ts\u001b[2m:96:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.test.ts\u001b[39m\u001b[0m\u001b[2m:481:28)\u001b[22m\u001b[2m\u001b[22m\n","testResults":[{"ancestorTitles":["MetricsService","calculateMetrics"],"duration":4,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'getOrSet')\n    at MetricsService.getOrSet [as calculateMetrics] (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\metrics.service.ts:96:23)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.test.ts:110:43)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"MetricsService calculateMetrics should calculate KPI metrics correctly","status":"failed","title":"should calculate KPI metrics correctly"},{"ancestorTitles":["MetricsService","calculateMetrics"],"duration":3,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'getOrSet')\n    at MetricsService.getOrSet [as calculateMetrics] (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\metrics.service.ts:96:23)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.test.ts:141:43)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"MetricsService calculateMetrics should return empty metrics when no campaigns found","status":"failed","title":"should return empty metrics when no campaigns found"},{"ancestorTitles":["MetricsService","calculateMetrics"],"duration":2,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'getOrSet')\n    at MetricsService.getOrSet [as calculateMetrics] (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\metrics.service.ts:96:23)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.test.ts:184:43)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"MetricsService calculateMetrics should handle division by zero safely","status":"failed","title":"should handle division by zero safely"},{"ancestorTitles":["MetricsService","calculateMetrics"],"duration":3,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'getOrSet')\n    at MetricsService.getOrSet [as calculateMetrics] (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\metrics.service.ts:96:23)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.test.ts:206:43)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"MetricsService calculateMetrics should use cache when available","status":"failed","title":"should use cache when available"},{"ancestorTitles":["MetricsService","updateRealTimeMetrics"],"duration":4,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'invalidateCampaign')\n    at MetricsService.invalidateCampaign [as invalidateCampaignCache] (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\metrics.service.ts:580:22)\n    at MetricsService.invalidateCampaignCache [as updateRealTimeMetrics] (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\metrics.service.ts:246:18)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.test.ts:221:7)"],"fullName":"MetricsService updateRealTimeMetrics should update hourly metrics for CLICK event","status":"failed","title":"should update hourly metrics for CLICK event"},{"ancestorTitles":["MetricsService","updateRealTimeMetrics"],"duration":9,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'invalidateCampaign')\n    at MetricsService.invalidateCampaign [as invalidateCampaignCache] (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\metrics.service.ts:580:22)\n    at MetricsService.invalidateCampaignCache [as updateRealTimeMetrics] (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\metrics.service.ts:246:18)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.test.ts:259:7)"],"fullName":"MetricsService updateRealTimeMetrics should update hourly metrics for CONVERSION event with value","status":"failed","title":"should update hourly metrics for CONVERSION event with value"},{"ancestorTitles":["MetricsService","updateRealTimeMetrics"],"duration":4,"failureMessages":[],"fullName":"MetricsService updateRealTimeMetrics should handle errors gracefully","status":"passed","title":"should handle errors gracefully"},{"ancestorTitles":["MetricsService","getDashboardMetrics"],"duration":3,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'getOrSet')\n    at MetricsService.getOrSet [as getDashboardMetrics] (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\metrics.service.ts:144:23)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.test.ts:317:43)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"MetricsService getDashboardMetrics should generate comprehensive dashboard metrics","status":"failed","title":"should generate comprehensive dashboard metrics"},{"ancestorTitles":["MetricsService","compareMetrics"],"duration":3,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'getOrSet')\n    at MetricsService.getOrSet [as compareMetrics] (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\metrics.service.ts:192:23)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.test.ts:367:43)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"MetricsService compareMetrics should compare metrics between two periods","status":"failed","title":"should compare metrics between two periods"},{"ancestorTitles":["MetricsService","exportMetrics"],"duration":3,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'getOrSet')\n    at MetricsService.getOrSet [as exportMetrics] (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\metrics.service.ts:594:23)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.test.ts:390:43)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"MetricsService exportMetrics should export metrics in JSON format","status":"failed","title":"should export metrics in JSON format"},{"ancestorTitles":["MetricsService","exportMetrics"],"duration":5,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'getOrSet')\n    at MetricsService.getOrSet [as exportMetrics] (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\metrics.service.ts:594:23)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.test.ts:409:43)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"MetricsService exportMetrics should export metrics in CSV format","status":"failed","title":"should export metrics in CSV format"},{"ancestorTitles":["MetricsService","Cache Integration"],"duration":2,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'invalidateCampaign')\n    at MetricsService.invalidateCampaign [as invalidateCampaignCache] (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\metrics.service.ts:580:22)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.test.ts:423:28)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"MetricsService Cache Integration should invalidate campaign cache","status":"failed","title":"should invalidate campaign cache"},{"ancestorTitles":["MetricsService","Cache Integration"],"duration":3,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'invalidateOrganization')\n    at MetricsService.invalidateOrganization [as invalidateOrganizationCache] (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\metrics.service.ts:584:22)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.test.ts:431:28)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"MetricsService Cache Integration should invalidate organization cache","status":"failed","title":"should invalidate organization cache"},{"ancestorTitles":["MetricsService","Error Handling"],"duration":19,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected substring: \u001b[32m\"Database connection failed\"\u001b[39m\nReceived message:   \u001b[31m\"Cannot read properties of undefined (reading 'getOrSet')\"\u001b[39m\n\n    \u001b[0m \u001b[90m 94 |\u001b[39m     \u001b[36mconst\u001b[39m cacheKey \u001b[33m=\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mgenerateCacheKey(\u001b[32m'calculate'\u001b[39m\u001b[33m,\u001b[39m filters)\u001b[33m;\u001b[39m\n     \u001b[90m 95 |\u001b[39m     \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 96 |\u001b[39m     \u001b[36mreturn\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mcache\u001b[33m.\u001b[39mgetOrSet(\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 97 |\u001b[39m       cacheKey\u001b[33m,\u001b[39m\n     \u001b[90m 98 |\u001b[39m       \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 99 |\u001b[39m         logger\u001b[33m.\u001b[39minfo(\u001b[32m'Calculating metrics from database'\u001b[39m\u001b[33m,\u001b[39m { filters })\u001b[33m;\u001b[39m\u001b[0m\n\n      \u001b[2mat MetricsService.getOrSet [as calculateMetrics] (\u001b[22msrc/services/metrics.service.ts\u001b[2m:96:23)\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22msrc/tests/metrics.test.ts\u001b[2m:448:35)\u001b[22m\n    at Object.toThrow (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\expect@29.7.0\\node_modules\\expect\\build\\index.js:218:22)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.test.ts:448:70)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"MetricsService Error Handling should handle database errors gracefully","status":"failed","title":"should handle database errors gracefully"},{"ancestorTitles":["MetricsService","Error Handling"],"duration":10,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mrejects\u001b[2m.\u001b[22mtoThrow\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m)\u001b[22m\n\nExpected substring: \u001b[32m\"Cache connection failed\"\u001b[39m\nReceived message:   \u001b[31m\"Cannot read properties of undefined (reading 'getOrSet')\"\u001b[39m\n\n    \u001b[0m \u001b[90m 94 |\u001b[39m     \u001b[36mconst\u001b[39m cacheKey \u001b[33m=\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mgenerateCacheKey(\u001b[32m'calculate'\u001b[39m\u001b[33m,\u001b[39m filters)\u001b[33m;\u001b[39m\n     \u001b[90m 95 |\u001b[39m     \n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 96 |\u001b[39m     \u001b[36mreturn\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mcache\u001b[33m.\u001b[39mgetOrSet(\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 97 |\u001b[39m       cacheKey\u001b[33m,\u001b[39m\n     \u001b[90m 98 |\u001b[39m       \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 99 |\u001b[39m         logger\u001b[33m.\u001b[39minfo(\u001b[32m'Calculating metrics from database'\u001b[39m\u001b[33m,\u001b[39m { filters })\u001b[33m;\u001b[39m\u001b[0m\n\n      \u001b[2mat MetricsService.getOrSet [as calculateMetrics] (\u001b[22msrc/services/metrics.service.ts\u001b[2m:96:23)\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22msrc/tests/metrics.test.ts\u001b[2m:462:35)\u001b[22m\n    at Object.toThrow (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\expect@29.7.0\\node_modules\\expect\\build\\index.js:218:22)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.test.ts:462:70)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"MetricsService Error Handling should handle cache errors gracefully","status":"failed","title":"should handle cache errors gracefully"},{"ancestorTitles":["MetricsService","Performance"],"duration":5,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'getOrSet')\n    at MetricsService.getOrSet [as calculateMetrics] (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\metrics.service.ts:96:23)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.test.ts:481:28)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:316:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:252:3)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"MetricsService Performance should complete metrics calculation within reasonable time","status":"failed","title":"should complete metrics calculation within reasonable time"},{"ancestorTitles":["MetricsService Integration"],"duration":null,"failureMessages":[],"fullName":"MetricsService Integration should integrate with real database","status":"pending","title":"should integrate with real database"},{"ancestorTitles":["MetricsService Integration"],"duration":null,"failureMessages":[],"fullName":"MetricsService Integration should integrate with real cache","status":"pending","title":"should integrate with real cache"},{"ancestorTitles":["MetricsService Integration"],"duration":null,"failureMessages":[],"fullName":"MetricsService Integration should integrate with stored procedures","status":"pending","title":"should integrate with stored procedures"}]},{"numFailingTests":30,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1757638442490,"runtime":1787,"slow":false,"start":1757638440703},"testFilePath":"C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts","failureMessage":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetrics Routes › POST /api/metrics/calculate › should calculate metrics successfully\u001b[39m\u001b[22m\n\n    Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 14 |\u001b[39m \u001b[90m// Mock Express app setup\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m createTestApp \u001b[33m=\u001b[39m ()\u001b[33m:\u001b[39m \u001b[33mExpress\u001b[39m \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 16 |\u001b[39m   \u001b[36mconst\u001b[39m express \u001b[33m=\u001b[39m require(\u001b[32m'express'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m   \u001b[36mconst\u001b[39m app \u001b[33m=\u001b[39m express()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m   \u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   app\u001b[33m.\u001b[39muse(express\u001b[33m.\u001b[39mjson())\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22m\u001b[2m../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat createTestApp (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:16:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:104:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetrics Routes › POST /api/metrics/calculate › should handle optional campaign filter\u001b[39m\u001b[22m\n\n    Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 14 |\u001b[39m \u001b[90m// Mock Express app setup\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m createTestApp \u001b[33m=\u001b[39m ()\u001b[33m:\u001b[39m \u001b[33mExpress\u001b[39m \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 16 |\u001b[39m   \u001b[36mconst\u001b[39m express \u001b[33m=\u001b[39m require(\u001b[32m'express'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m   \u001b[36mconst\u001b[39m app \u001b[33m=\u001b[39m express()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m   \u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   app\u001b[33m.\u001b[39muse(express\u001b[33m.\u001b[39mjson())\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22m\u001b[2m../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat createTestApp (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:16:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:104:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetrics Routes › POST /api/metrics/calculate › should validate required fields\u001b[39m\u001b[22m\n\n    Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 14 |\u001b[39m \u001b[90m// Mock Express app setup\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m createTestApp \u001b[33m=\u001b[39m ()\u001b[33m:\u001b[39m \u001b[33mExpress\u001b[39m \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 16 |\u001b[39m   \u001b[36mconst\u001b[39m express \u001b[33m=\u001b[39m require(\u001b[32m'express'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m   \u001b[36mconst\u001b[39m app \u001b[33m=\u001b[39m express()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m   \u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   app\u001b[33m.\u001b[39muse(express\u001b[33m.\u001b[39mjson())\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22m\u001b[2m../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat createTestApp (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:16:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:104:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetrics Routes › POST /api/metrics/calculate › should validate date format\u001b[39m\u001b[22m\n\n    Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 14 |\u001b[39m \u001b[90m// Mock Express app setup\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m createTestApp \u001b[33m=\u001b[39m ()\u001b[33m:\u001b[39m \u001b[33mExpress\u001b[39m \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 16 |\u001b[39m   \u001b[36mconst\u001b[39m express \u001b[33m=\u001b[39m require(\u001b[32m'express'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m   \u001b[36mconst\u001b[39m app \u001b[33m=\u001b[39m express()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m   \u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   app\u001b[33m.\u001b[39muse(express\u001b[33m.\u001b[39mjson())\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22m\u001b[2m../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat createTestApp (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:16:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:104:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetrics Routes › POST /api/metrics/calculate › should validate date range\u001b[39m\u001b[22m\n\n    Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 14 |\u001b[39m \u001b[90m// Mock Express app setup\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m createTestApp \u001b[33m=\u001b[39m ()\u001b[33m:\u001b[39m \u001b[33mExpress\u001b[39m \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 16 |\u001b[39m   \u001b[36mconst\u001b[39m express \u001b[33m=\u001b[39m require(\u001b[32m'express'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m   \u001b[36mconst\u001b[39m app \u001b[33m=\u001b[39m express()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m   \u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   app\u001b[33m.\u001b[39muse(express\u001b[33m.\u001b[39mjson())\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22m\u001b[2m../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat createTestApp (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:16:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:104:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetrics Routes › POST /api/metrics/calculate › should handle service errors\u001b[39m\u001b[22m\n\n    Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 14 |\u001b[39m \u001b[90m// Mock Express app setup\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m createTestApp \u001b[33m=\u001b[39m ()\u001b[33m:\u001b[39m \u001b[33mExpress\u001b[39m \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 16 |\u001b[39m   \u001b[36mconst\u001b[39m express \u001b[33m=\u001b[39m require(\u001b[32m'express'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m   \u001b[36mconst\u001b[39m app \u001b[33m=\u001b[39m express()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m   \u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   app\u001b[33m.\u001b[39muse(express\u001b[33m.\u001b[39mjson())\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22m\u001b[2m../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat createTestApp (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:16:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:104:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetrics Routes › GET /api/metrics/dashboard › should get dashboard metrics successfully\u001b[39m\u001b[22m\n\n    Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 14 |\u001b[39m \u001b[90m// Mock Express app setup\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m createTestApp \u001b[33m=\u001b[39m ()\u001b[33m:\u001b[39m \u001b[33mExpress\u001b[39m \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 16 |\u001b[39m   \u001b[36mconst\u001b[39m express \u001b[33m=\u001b[39m require(\u001b[32m'express'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m   \u001b[36mconst\u001b[39m app \u001b[33m=\u001b[39m express()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m   \u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   app\u001b[33m.\u001b[39muse(express\u001b[33m.\u001b[39mjson())\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22m\u001b[2m../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat createTestApp (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:16:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:104:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetrics Routes › GET /api/metrics/dashboard › should use default date range when not provided\u001b[39m\u001b[22m\n\n    Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 14 |\u001b[39m \u001b[90m// Mock Express app setup\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m createTestApp \u001b[33m=\u001b[39m ()\u001b[33m:\u001b[39m \u001b[33mExpress\u001b[39m \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 16 |\u001b[39m   \u001b[36mconst\u001b[39m express \u001b[33m=\u001b[39m require(\u001b[32m'express'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m   \u001b[36mconst\u001b[39m app \u001b[33m=\u001b[39m express()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m   \u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   app\u001b[33m.\u001b[39muse(express\u001b[33m.\u001b[39mjson())\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22m\u001b[2m../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat createTestApp (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:16:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:104:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetrics Routes › GET /api/metrics/dashboard › should handle optional filters\u001b[39m\u001b[22m\n\n    Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 14 |\u001b[39m \u001b[90m// Mock Express app setup\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m createTestApp \u001b[33m=\u001b[39m ()\u001b[33m:\u001b[39m \u001b[33mExpress\u001b[39m \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 16 |\u001b[39m   \u001b[36mconst\u001b[39m express \u001b[33m=\u001b[39m require(\u001b[32m'express'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m   \u001b[36mconst\u001b[39m app \u001b[33m=\u001b[39m express()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m   \u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   app\u001b[33m.\u001b[39muse(express\u001b[33m.\u001b[39mjson())\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22m\u001b[2m../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat createTestApp (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:16:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:104:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetrics Routes › GET /api/metrics/history › should get metrics history successfully\u001b[39m\u001b[22m\n\n    Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 14 |\u001b[39m \u001b[90m// Mock Express app setup\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m createTestApp \u001b[33m=\u001b[39m ()\u001b[33m:\u001b[39m \u001b[33mExpress\u001b[39m \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 16 |\u001b[39m   \u001b[36mconst\u001b[39m express \u001b[33m=\u001b[39m require(\u001b[32m'express'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m   \u001b[36mconst\u001b[39m app \u001b[33m=\u001b[39m express()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m   \u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   app\u001b[33m.\u001b[39muse(express\u001b[33m.\u001b[39mjson())\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22m\u001b[2m../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat createTestApp (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:16:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:104:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetrics Routes › GET /api/metrics/history › should validate granularity parameter\u001b[39m\u001b[22m\n\n    Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 14 |\u001b[39m \u001b[90m// Mock Express app setup\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m createTestApp \u001b[33m=\u001b[39m ()\u001b[33m:\u001b[39m \u001b[33mExpress\u001b[39m \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 16 |\u001b[39m   \u001b[36mconst\u001b[39m express \u001b[33m=\u001b[39m require(\u001b[32m'express'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m   \u001b[36mconst\u001b[39m app \u001b[33m=\u001b[39m express()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m   \u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   app\u001b[33m.\u001b[39muse(express\u001b[33m.\u001b[39mjson())\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22m\u001b[2m../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat createTestApp (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:16:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:104:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetrics Routes › POST /api/metrics/compare › should compare metrics between periods successfully\u001b[39m\u001b[22m\n\n    Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 14 |\u001b[39m \u001b[90m// Mock Express app setup\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m createTestApp \u001b[33m=\u001b[39m ()\u001b[33m:\u001b[39m \u001b[33mExpress\u001b[39m \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 16 |\u001b[39m   \u001b[36mconst\u001b[39m express \u001b[33m=\u001b[39m require(\u001b[32m'express'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m   \u001b[36mconst\u001b[39m app \u001b[33m=\u001b[39m express()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m   \u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   app\u001b[33m.\u001b[39muse(express\u001b[33m.\u001b[39mjson())\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22m\u001b[2m../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat createTestApp (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:16:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:104:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetrics Routes › POST /api/metrics/compare › should validate period objects\u001b[39m\u001b[22m\n\n    Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 14 |\u001b[39m \u001b[90m// Mock Express app setup\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m createTestApp \u001b[33m=\u001b[39m ()\u001b[33m:\u001b[39m \u001b[33mExpress\u001b[39m \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 16 |\u001b[39m   \u001b[36mconst\u001b[39m express \u001b[33m=\u001b[39m require(\u001b[32m'express'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m   \u001b[36mconst\u001b[39m app \u001b[33m=\u001b[39m express()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m   \u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   app\u001b[33m.\u001b[39muse(express\u001b[33m.\u001b[39mjson())\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22m\u001b[2m../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat createTestApp (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:16:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:104:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetrics Routes › POST /api/metrics/export › should export metrics in JSON format\u001b[39m\u001b[22m\n\n    Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 14 |\u001b[39m \u001b[90m// Mock Express app setup\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m createTestApp \u001b[33m=\u001b[39m ()\u001b[33m:\u001b[39m \u001b[33mExpress\u001b[39m \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 16 |\u001b[39m   \u001b[36mconst\u001b[39m express \u001b[33m=\u001b[39m require(\u001b[32m'express'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m   \u001b[36mconst\u001b[39m app \u001b[33m=\u001b[39m express()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m   \u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   app\u001b[33m.\u001b[39muse(express\u001b[33m.\u001b[39mjson())\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22m\u001b[2m../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat createTestApp (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:16:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:104:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetrics Routes › POST /api/metrics/export › should export metrics in CSV format\u001b[39m\u001b[22m\n\n    Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 14 |\u001b[39m \u001b[90m// Mock Express app setup\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m createTestApp \u001b[33m=\u001b[39m ()\u001b[33m:\u001b[39m \u001b[33mExpress\u001b[39m \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 16 |\u001b[39m   \u001b[36mconst\u001b[39m express \u001b[33m=\u001b[39m require(\u001b[32m'express'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m   \u001b[36mconst\u001b[39m app \u001b[33m=\u001b[39m express()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m   \u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   app\u001b[33m.\u001b[39muse(express\u001b[33m.\u001b[39mjson())\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22m\u001b[2m../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat createTestApp (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:16:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:104:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetrics Routes › POST /api/metrics/export › should validate export format\u001b[39m\u001b[22m\n\n    Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 14 |\u001b[39m \u001b[90m// Mock Express app setup\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m createTestApp \u001b[33m=\u001b[39m ()\u001b[33m:\u001b[39m \u001b[33mExpress\u001b[39m \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 16 |\u001b[39m   \u001b[36mconst\u001b[39m express \u001b[33m=\u001b[39m require(\u001b[32m'express'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m   \u001b[36mconst\u001b[39m app \u001b[33m=\u001b[39m express()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m   \u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   app\u001b[33m.\u001b[39muse(express\u001b[33m.\u001b[39mjson())\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22m\u001b[2m../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat createTestApp (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:16:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:104:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetrics Routes › POST /api/metrics/events › should process real-time events successfully\u001b[39m\u001b[22m\n\n    Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 14 |\u001b[39m \u001b[90m// Mock Express app setup\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m createTestApp \u001b[33m=\u001b[39m ()\u001b[33m:\u001b[39m \u001b[33mExpress\u001b[39m \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 16 |\u001b[39m   \u001b[36mconst\u001b[39m express \u001b[33m=\u001b[39m require(\u001b[32m'express'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m   \u001b[36mconst\u001b[39m app \u001b[33m=\u001b[39m express()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m   \u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   app\u001b[33m.\u001b[39muse(express\u001b[33m.\u001b[39mjson())\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22m\u001b[2m../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat createTestApp (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:16:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:104:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetrics Routes › POST /api/metrics/events › should validate event type\u001b[39m\u001b[22m\n\n    Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 14 |\u001b[39m \u001b[90m// Mock Express app setup\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m createTestApp \u001b[33m=\u001b[39m ()\u001b[33m:\u001b[39m \u001b[33mExpress\u001b[39m \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 16 |\u001b[39m   \u001b[36mconst\u001b[39m express \u001b[33m=\u001b[39m require(\u001b[32m'express'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m   \u001b[36mconst\u001b[39m app \u001b[33m=\u001b[39m express()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m   \u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   app\u001b[33m.\u001b[39muse(express\u001b[33m.\u001b[39mjson())\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22m\u001b[2m../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat createTestApp (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:16:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:104:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetrics Routes › POST /api/metrics/events › should validate campaign ID format\u001b[39m\u001b[22m\n\n    Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 14 |\u001b[39m \u001b[90m// Mock Express app setup\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m createTestApp \u001b[33m=\u001b[39m ()\u001b[33m:\u001b[39m \u001b[33mExpress\u001b[39m \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 16 |\u001b[39m   \u001b[36mconst\u001b[39m express \u001b[33m=\u001b[39m require(\u001b[32m'express'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m   \u001b[36mconst\u001b[39m app \u001b[33m=\u001b[39m express()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m   \u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   app\u001b[33m.\u001b[39muse(express\u001b[33m.\u001b[39mjson())\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22m\u001b[2m../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat createTestApp (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:16:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:104:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetrics Routes › DELETE /api/metrics/cache/campaign/:campaignId › should invalidate campaign cache successfully\u001b[39m\u001b[22m\n\n    Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 14 |\u001b[39m \u001b[90m// Mock Express app setup\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m createTestApp \u001b[33m=\u001b[39m ()\u001b[33m:\u001b[39m \u001b[33mExpress\u001b[39m \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 16 |\u001b[39m   \u001b[36mconst\u001b[39m express \u001b[33m=\u001b[39m require(\u001b[32m'express'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m   \u001b[36mconst\u001b[39m app \u001b[33m=\u001b[39m express()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m   \u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   app\u001b[33m.\u001b[39muse(express\u001b[33m.\u001b[39mjson())\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22m\u001b[2m../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat createTestApp (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:16:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:104:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetrics Routes › DELETE /api/metrics/cache/campaign/:campaignId › should validate campaign ID format\u001b[39m\u001b[22m\n\n    Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 14 |\u001b[39m \u001b[90m// Mock Express app setup\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m createTestApp \u001b[33m=\u001b[39m ()\u001b[33m:\u001b[39m \u001b[33mExpress\u001b[39m \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 16 |\u001b[39m   \u001b[36mconst\u001b[39m express \u001b[33m=\u001b[39m require(\u001b[32m'express'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m   \u001b[36mconst\u001b[39m app \u001b[33m=\u001b[39m express()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m   \u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   app\u001b[33m.\u001b[39muse(express\u001b[33m.\u001b[39mjson())\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22m\u001b[2m../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat createTestApp (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:16:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:104:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetrics Routes › DELETE /api/metrics/cache/organization › should invalidate organization cache successfully\u001b[39m\u001b[22m\n\n    Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 14 |\u001b[39m \u001b[90m// Mock Express app setup\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m createTestApp \u001b[33m=\u001b[39m ()\u001b[33m:\u001b[39m \u001b[33mExpress\u001b[39m \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 16 |\u001b[39m   \u001b[36mconst\u001b[39m express \u001b[33m=\u001b[39m require(\u001b[32m'express'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m   \u001b[36mconst\u001b[39m app \u001b[33m=\u001b[39m express()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m   \u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   app\u001b[33m.\u001b[39muse(express\u001b[33m.\u001b[39mjson())\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22m\u001b[2m../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat createTestApp (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:16:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:104:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetrics Routes › Authentication and Authorization › should require authentication for all endpoints\u001b[39m\u001b[22m\n\n    Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 14 |\u001b[39m \u001b[90m// Mock Express app setup\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m createTestApp \u001b[33m=\u001b[39m ()\u001b[33m:\u001b[39m \u001b[33mExpress\u001b[39m \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 16 |\u001b[39m   \u001b[36mconst\u001b[39m express \u001b[33m=\u001b[39m require(\u001b[32m'express'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m   \u001b[36mconst\u001b[39m app \u001b[33m=\u001b[39m express()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m   \u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   app\u001b[33m.\u001b[39muse(express\u001b[33m.\u001b[39mjson())\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22m\u001b[2m../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat createTestApp (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:16:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:104:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetrics Routes › Authentication and Authorization › should validate organization access\u001b[39m\u001b[22m\n\n    Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 14 |\u001b[39m \u001b[90m// Mock Express app setup\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m createTestApp \u001b[33m=\u001b[39m ()\u001b[33m:\u001b[39m \u001b[33mExpress\u001b[39m \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 16 |\u001b[39m   \u001b[36mconst\u001b[39m express \u001b[33m=\u001b[39m require(\u001b[32m'express'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m   \u001b[36mconst\u001b[39m app \u001b[33m=\u001b[39m express()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m   \u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   app\u001b[33m.\u001b[39muse(express\u001b[33m.\u001b[39mjson())\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22m\u001b[2m../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat createTestApp (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:16:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:104:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetrics Routes › Rate Limiting › should handle rate limiting for expensive operations\u001b[39m\u001b[22m\n\n    Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 14 |\u001b[39m \u001b[90m// Mock Express app setup\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m createTestApp \u001b[33m=\u001b[39m ()\u001b[33m:\u001b[39m \u001b[33mExpress\u001b[39m \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 16 |\u001b[39m   \u001b[36mconst\u001b[39m express \u001b[33m=\u001b[39m require(\u001b[32m'express'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m   \u001b[36mconst\u001b[39m app \u001b[33m=\u001b[39m express()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m   \u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   app\u001b[33m.\u001b[39muse(express\u001b[33m.\u001b[39mjson())\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22m\u001b[2m../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat createTestApp (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:16:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:104:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetrics Routes › Error Handling › should handle malformed JSON requests\u001b[39m\u001b[22m\n\n    Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 14 |\u001b[39m \u001b[90m// Mock Express app setup\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m createTestApp \u001b[33m=\u001b[39m ()\u001b[33m:\u001b[39m \u001b[33mExpress\u001b[39m \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 16 |\u001b[39m   \u001b[36mconst\u001b[39m express \u001b[33m=\u001b[39m require(\u001b[32m'express'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m   \u001b[36mconst\u001b[39m app \u001b[33m=\u001b[39m express()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m   \u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   app\u001b[33m.\u001b[39muse(express\u001b[33m.\u001b[39mjson())\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22m\u001b[2m../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat createTestApp (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:16:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:104:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetrics Routes › Error Handling › should handle large request payloads\u001b[39m\u001b[22m\n\n    Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 14 |\u001b[39m \u001b[90m// Mock Express app setup\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m createTestApp \u001b[33m=\u001b[39m ()\u001b[33m:\u001b[39m \u001b[33mExpress\u001b[39m \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 16 |\u001b[39m   \u001b[36mconst\u001b[39m express \u001b[33m=\u001b[39m require(\u001b[32m'express'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m   \u001b[36mconst\u001b[39m app \u001b[33m=\u001b[39m express()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m   \u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   app\u001b[33m.\u001b[39muse(express\u001b[33m.\u001b[39mjson())\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22m\u001b[2m../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat createTestApp (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:16:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:104:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetrics Routes › Error Handling › should handle service unavailable errors\u001b[39m\u001b[22m\n\n    Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 14 |\u001b[39m \u001b[90m// Mock Express app setup\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m createTestApp \u001b[33m=\u001b[39m ()\u001b[33m:\u001b[39m \u001b[33mExpress\u001b[39m \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 16 |\u001b[39m   \u001b[36mconst\u001b[39m express \u001b[33m=\u001b[39m require(\u001b[32m'express'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m   \u001b[36mconst\u001b[39m app \u001b[33m=\u001b[39m express()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m   \u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   app\u001b[33m.\u001b[39muse(express\u001b[33m.\u001b[39mjson())\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22m\u001b[2m../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat createTestApp (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:16:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:104:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetrics Routes › Performance › should respond within acceptable time limits\u001b[39m\u001b[22m\n\n    Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 14 |\u001b[39m \u001b[90m// Mock Express app setup\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m createTestApp \u001b[33m=\u001b[39m ()\u001b[33m:\u001b[39m \u001b[33mExpress\u001b[39m \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 16 |\u001b[39m   \u001b[36mconst\u001b[39m express \u001b[33m=\u001b[39m require(\u001b[32m'express'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m   \u001b[36mconst\u001b[39m app \u001b[33m=\u001b[39m express()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m   \u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   app\u001b[33m.\u001b[39muse(express\u001b[33m.\u001b[39mjson())\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22m\u001b[2m../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat createTestApp (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:16:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:104:11)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1mMetrics Routes › Performance › should handle concurrent requests efficiently\u001b[39m\u001b[22m\n\n    Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 14 |\u001b[39m \u001b[90m// Mock Express app setup\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 15 |\u001b[39m \u001b[36mconst\u001b[39m createTestApp \u001b[33m=\u001b[39m ()\u001b[33m:\u001b[39m \u001b[33mExpress\u001b[39m \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 16 |\u001b[39m   \u001b[36mconst\u001b[39m express \u001b[33m=\u001b[39m require(\u001b[32m'express'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 17 |\u001b[39m   \u001b[36mconst\u001b[39m app \u001b[33m=\u001b[39m express()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 18 |\u001b[39m   \u001b[22m\n\u001b[2m     \u001b[90m 19 |\u001b[39m   app\u001b[33m.\u001b[39muse(express\u001b[33m.\u001b[39mjson())\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22m\u001b[2m../../node_modules/.pnpm/jest-resolve@29.7.0/node_modules/jest-resolve/build/resolver.js\u001b[2m:427:11)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat createTestApp (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:16:19)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msrc/tests/metrics.routes.test.ts\u001b[39m\u001b[0m\u001b[2m:104:11)\u001b[22m\u001b[2m\u001b[22m\n","testResults":[{"ancestorTitles":["Metrics Routes","POST /api/metrics/calculate"],"duration":12,"failureMessages":["Error: Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n    at Resolver._throwModNotFoundError (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:427:11)\n    at Resolver.resolveModule (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:358:10)\n    at Resolver._getVirtualMockPath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:619:14)\n    at Resolver._getAbsolutePath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:587:14)\n    at Resolver.getModuleID (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:530:31)\n    at Runtime._shouldMockCjs (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1713:37)\n    at Runtime.requireModuleOrMock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1045:16)\n    at createTestApp (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:16:19)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:104:11)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Metrics Routes POST /api/metrics/calculate should calculate metrics successfully","status":"failed","title":"should calculate metrics successfully"},{"ancestorTitles":["Metrics Routes","POST /api/metrics/calculate"],"duration":3,"failureMessages":["Error: Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n    at Resolver._throwModNotFoundError (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:427:11)\n    at Resolver.resolveModule (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:358:10)\n    at Resolver._getVirtualMockPath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:619:14)\n    at Resolver._getAbsolutePath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:587:14)\n    at Resolver.getModuleID (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:530:31)\n    at Runtime._shouldMockCjs (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1713:37)\n    at Runtime.requireModuleOrMock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1045:16)\n    at createTestApp (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:16:19)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:104:11)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Metrics Routes POST /api/metrics/calculate should handle optional campaign filter","status":"failed","title":"should handle optional campaign filter"},{"ancestorTitles":["Metrics Routes","POST /api/metrics/calculate"],"duration":3,"failureMessages":["Error: Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n    at Resolver._throwModNotFoundError (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:427:11)\n    at Resolver.resolveModule (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:358:10)\n    at Resolver._getVirtualMockPath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:619:14)\n    at Resolver._getAbsolutePath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:587:14)\n    at Resolver.getModuleID (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:530:31)\n    at Runtime._shouldMockCjs (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1713:37)\n    at Runtime.requireModuleOrMock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1045:16)\n    at createTestApp (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:16:19)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:104:11)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Metrics Routes POST /api/metrics/calculate should validate required fields","status":"failed","title":"should validate required fields"},{"ancestorTitles":["Metrics Routes","POST /api/metrics/calculate"],"duration":4,"failureMessages":["Error: Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n    at Resolver._throwModNotFoundError (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:427:11)\n    at Resolver.resolveModule (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:358:10)\n    at Resolver._getVirtualMockPath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:619:14)\n    at Resolver._getAbsolutePath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:587:14)\n    at Resolver.getModuleID (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:530:31)\n    at Runtime._shouldMockCjs (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1713:37)\n    at Runtime.requireModuleOrMock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1045:16)\n    at createTestApp (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:16:19)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:104:11)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Metrics Routes POST /api/metrics/calculate should validate date format","status":"failed","title":"should validate date format"},{"ancestorTitles":["Metrics Routes","POST /api/metrics/calculate"],"duration":3,"failureMessages":["Error: Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n    at Resolver._throwModNotFoundError (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:427:11)\n    at Resolver.resolveModule (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:358:10)\n    at Resolver._getVirtualMockPath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:619:14)\n    at Resolver._getAbsolutePath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:587:14)\n    at Resolver.getModuleID (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:530:31)\n    at Runtime._shouldMockCjs (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1713:37)\n    at Runtime.requireModuleOrMock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1045:16)\n    at createTestApp (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:16:19)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:104:11)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Metrics Routes POST /api/metrics/calculate should validate date range","status":"failed","title":"should validate date range"},{"ancestorTitles":["Metrics Routes","POST /api/metrics/calculate"],"duration":4,"failureMessages":["Error: Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n    at Resolver._throwModNotFoundError (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:427:11)\n    at Resolver.resolveModule (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:358:10)\n    at Resolver._getVirtualMockPath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:619:14)\n    at Resolver._getAbsolutePath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:587:14)\n    at Resolver.getModuleID (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:530:31)\n    at Runtime._shouldMockCjs (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1713:37)\n    at Runtime.requireModuleOrMock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1045:16)\n    at createTestApp (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:16:19)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:104:11)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Metrics Routes POST /api/metrics/calculate should handle service errors","status":"failed","title":"should handle service errors"},{"ancestorTitles":["Metrics Routes","GET /api/metrics/dashboard"],"duration":3,"failureMessages":["Error: Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n    at Resolver._throwModNotFoundError (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:427:11)\n    at Resolver.resolveModule (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:358:10)\n    at Resolver._getVirtualMockPath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:619:14)\n    at Resolver._getAbsolutePath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:587:14)\n    at Resolver.getModuleID (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:530:31)\n    at Runtime._shouldMockCjs (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1713:37)\n    at Runtime.requireModuleOrMock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1045:16)\n    at createTestApp (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:16:19)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:104:11)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Metrics Routes GET /api/metrics/dashboard should get dashboard metrics successfully","status":"failed","title":"should get dashboard metrics successfully"},{"ancestorTitles":["Metrics Routes","GET /api/metrics/dashboard"],"duration":3,"failureMessages":["Error: Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n    at Resolver._throwModNotFoundError (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:427:11)\n    at Resolver.resolveModule (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:358:10)\n    at Resolver._getVirtualMockPath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:619:14)\n    at Resolver._getAbsolutePath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:587:14)\n    at Resolver.getModuleID (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:530:31)\n    at Runtime._shouldMockCjs (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1713:37)\n    at Runtime.requireModuleOrMock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1045:16)\n    at createTestApp (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:16:19)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:104:11)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Metrics Routes GET /api/metrics/dashboard should use default date range when not provided","status":"failed","title":"should use default date range when not provided"},{"ancestorTitles":["Metrics Routes","GET /api/metrics/dashboard"],"duration":4,"failureMessages":["Error: Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n    at Resolver._throwModNotFoundError (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:427:11)\n    at Resolver.resolveModule (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:358:10)\n    at Resolver._getVirtualMockPath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:619:14)\n    at Resolver._getAbsolutePath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:587:14)\n    at Resolver.getModuleID (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:530:31)\n    at Runtime._shouldMockCjs (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1713:37)\n    at Runtime.requireModuleOrMock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1045:16)\n    at createTestApp (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:16:19)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:104:11)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Metrics Routes GET /api/metrics/dashboard should handle optional filters","status":"failed","title":"should handle optional filters"},{"ancestorTitles":["Metrics Routes","GET /api/metrics/history"],"duration":3,"failureMessages":["Error: Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n    at Resolver._throwModNotFoundError (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:427:11)\n    at Resolver.resolveModule (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:358:10)\n    at Resolver._getVirtualMockPath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:619:14)\n    at Resolver._getAbsolutePath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:587:14)\n    at Resolver.getModuleID (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:530:31)\n    at Runtime._shouldMockCjs (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1713:37)\n    at Runtime.requireModuleOrMock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1045:16)\n    at createTestApp (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:16:19)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:104:11)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Metrics Routes GET /api/metrics/history should get metrics history successfully","status":"failed","title":"should get metrics history successfully"},{"ancestorTitles":["Metrics Routes","GET /api/metrics/history"],"duration":4,"failureMessages":["Error: Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n    at Resolver._throwModNotFoundError (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:427:11)\n    at Resolver.resolveModule (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:358:10)\n    at Resolver._getVirtualMockPath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:619:14)\n    at Resolver._getAbsolutePath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:587:14)\n    at Resolver.getModuleID (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:530:31)\n    at Runtime._shouldMockCjs (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1713:37)\n    at Runtime.requireModuleOrMock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1045:16)\n    at createTestApp (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:16:19)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:104:11)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Metrics Routes GET /api/metrics/history should validate granularity parameter","status":"failed","title":"should validate granularity parameter"},{"ancestorTitles":["Metrics Routes","POST /api/metrics/compare"],"duration":6,"failureMessages":["Error: Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n    at Resolver._throwModNotFoundError (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:427:11)\n    at Resolver.resolveModule (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:358:10)\n    at Resolver._getVirtualMockPath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:619:14)\n    at Resolver._getAbsolutePath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:587:14)\n    at Resolver.getModuleID (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:530:31)\n    at Runtime._shouldMockCjs (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1713:37)\n    at Runtime.requireModuleOrMock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1045:16)\n    at createTestApp (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:16:19)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:104:11)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Metrics Routes POST /api/metrics/compare should compare metrics between periods successfully","status":"failed","title":"should compare metrics between periods successfully"},{"ancestorTitles":["Metrics Routes","POST /api/metrics/compare"],"duration":3,"failureMessages":["Error: Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n    at Resolver._throwModNotFoundError (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:427:11)\n    at Resolver.resolveModule (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:358:10)\n    at Resolver._getVirtualMockPath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:619:14)\n    at Resolver._getAbsolutePath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:587:14)\n    at Resolver.getModuleID (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:530:31)\n    at Runtime._shouldMockCjs (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1713:37)\n    at Runtime.requireModuleOrMock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1045:16)\n    at createTestApp (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:16:19)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:104:11)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Metrics Routes POST /api/metrics/compare should validate period objects","status":"failed","title":"should validate period objects"},{"ancestorTitles":["Metrics Routes","POST /api/metrics/export"],"duration":3,"failureMessages":["Error: Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n    at Resolver._throwModNotFoundError (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:427:11)\n    at Resolver.resolveModule (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:358:10)\n    at Resolver._getVirtualMockPath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:619:14)\n    at Resolver._getAbsolutePath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:587:14)\n    at Resolver.getModuleID (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:530:31)\n    at Runtime._shouldMockCjs (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1713:37)\n    at Runtime.requireModuleOrMock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1045:16)\n    at createTestApp (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:16:19)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:104:11)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Metrics Routes POST /api/metrics/export should export metrics in JSON format","status":"failed","title":"should export metrics in JSON format"},{"ancestorTitles":["Metrics Routes","POST /api/metrics/export"],"duration":3,"failureMessages":["Error: Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n    at Resolver._throwModNotFoundError (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:427:11)\n    at Resolver.resolveModule (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:358:10)\n    at Resolver._getVirtualMockPath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:619:14)\n    at Resolver._getAbsolutePath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:587:14)\n    at Resolver.getModuleID (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:530:31)\n    at Runtime._shouldMockCjs (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1713:37)\n    at Runtime.requireModuleOrMock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1045:16)\n    at createTestApp (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:16:19)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:104:11)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Metrics Routes POST /api/metrics/export should export metrics in CSV format","status":"failed","title":"should export metrics in CSV format"},{"ancestorTitles":["Metrics Routes","POST /api/metrics/export"],"duration":2,"failureMessages":["Error: Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n    at Resolver._throwModNotFoundError (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:427:11)\n    at Resolver.resolveModule (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:358:10)\n    at Resolver._getVirtualMockPath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:619:14)\n    at Resolver._getAbsolutePath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:587:14)\n    at Resolver.getModuleID (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:530:31)\n    at Runtime._shouldMockCjs (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1713:37)\n    at Runtime.requireModuleOrMock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1045:16)\n    at createTestApp (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:16:19)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:104:11)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Metrics Routes POST /api/metrics/export should validate export format","status":"failed","title":"should validate export format"},{"ancestorTitles":["Metrics Routes","POST /api/metrics/events"],"duration":3,"failureMessages":["Error: Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n    at Resolver._throwModNotFoundError (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:427:11)\n    at Resolver.resolveModule (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:358:10)\n    at Resolver._getVirtualMockPath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:619:14)\n    at Resolver._getAbsolutePath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:587:14)\n    at Resolver.getModuleID (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:530:31)\n    at Runtime._shouldMockCjs (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1713:37)\n    at Runtime.requireModuleOrMock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1045:16)\n    at createTestApp (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:16:19)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:104:11)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Metrics Routes POST /api/metrics/events should process real-time events successfully","status":"failed","title":"should process real-time events successfully"},{"ancestorTitles":["Metrics Routes","POST /api/metrics/events"],"duration":4,"failureMessages":["Error: Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n    at Resolver._throwModNotFoundError (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:427:11)\n    at Resolver.resolveModule (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:358:10)\n    at Resolver._getVirtualMockPath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:619:14)\n    at Resolver._getAbsolutePath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:587:14)\n    at Resolver.getModuleID (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:530:31)\n    at Runtime._shouldMockCjs (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1713:37)\n    at Runtime.requireModuleOrMock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1045:16)\n    at createTestApp (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:16:19)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:104:11)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Metrics Routes POST /api/metrics/events should validate event type","status":"failed","title":"should validate event type"},{"ancestorTitles":["Metrics Routes","POST /api/metrics/events"],"duration":3,"failureMessages":["Error: Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n    at Resolver._throwModNotFoundError (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:427:11)\n    at Resolver.resolveModule (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:358:10)\n    at Resolver._getVirtualMockPath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:619:14)\n    at Resolver._getAbsolutePath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:587:14)\n    at Resolver.getModuleID (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:530:31)\n    at Runtime._shouldMockCjs (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1713:37)\n    at Runtime.requireModuleOrMock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1045:16)\n    at createTestApp (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:16:19)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:104:11)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Metrics Routes POST /api/metrics/events should validate campaign ID format","status":"failed","title":"should validate campaign ID format"},{"ancestorTitles":["Metrics Routes","DELETE /api/metrics/cache/campaign/:campaignId"],"duration":3,"failureMessages":["Error: Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n    at Resolver._throwModNotFoundError (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:427:11)\n    at Resolver.resolveModule (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:358:10)\n    at Resolver._getVirtualMockPath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:619:14)\n    at Resolver._getAbsolutePath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:587:14)\n    at Resolver.getModuleID (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:530:31)\n    at Runtime._shouldMockCjs (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1713:37)\n    at Runtime.requireModuleOrMock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1045:16)\n    at createTestApp (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:16:19)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:104:11)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Metrics Routes DELETE /api/metrics/cache/campaign/:campaignId should invalidate campaign cache successfully","status":"failed","title":"should invalidate campaign cache successfully"},{"ancestorTitles":["Metrics Routes","DELETE /api/metrics/cache/campaign/:campaignId"],"duration":3,"failureMessages":["Error: Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n    at Resolver._throwModNotFoundError (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:427:11)\n    at Resolver.resolveModule (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:358:10)\n    at Resolver._getVirtualMockPath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:619:14)\n    at Resolver._getAbsolutePath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:587:14)\n    at Resolver.getModuleID (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:530:31)\n    at Runtime._shouldMockCjs (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1713:37)\n    at Runtime.requireModuleOrMock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1045:16)\n    at createTestApp (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:16:19)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:104:11)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Metrics Routes DELETE /api/metrics/cache/campaign/:campaignId should validate campaign ID format","status":"failed","title":"should validate campaign ID format"},{"ancestorTitles":["Metrics Routes","DELETE /api/metrics/cache/organization"],"duration":3,"failureMessages":["Error: Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n    at Resolver._throwModNotFoundError (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:427:11)\n    at Resolver.resolveModule (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:358:10)\n    at Resolver._getVirtualMockPath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:619:14)\n    at Resolver._getAbsolutePath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:587:14)\n    at Resolver.getModuleID (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:530:31)\n    at Runtime._shouldMockCjs (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1713:37)\n    at Runtime.requireModuleOrMock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1045:16)\n    at createTestApp (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:16:19)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:104:11)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Metrics Routes DELETE /api/metrics/cache/organization should invalidate organization cache successfully","status":"failed","title":"should invalidate organization cache successfully"},{"ancestorTitles":["Metrics Routes","Authentication and Authorization"],"duration":3,"failureMessages":["Error: Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n    at Resolver._throwModNotFoundError (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:427:11)\n    at Resolver.resolveModule (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:358:10)\n    at Resolver._getVirtualMockPath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:619:14)\n    at Resolver._getAbsolutePath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:587:14)\n    at Resolver.getModuleID (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:530:31)\n    at Runtime._shouldMockCjs (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1713:37)\n    at Runtime.requireModuleOrMock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1045:16)\n    at createTestApp (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:16:19)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:104:11)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Metrics Routes Authentication and Authorization should require authentication for all endpoints","status":"failed","title":"should require authentication for all endpoints"},{"ancestorTitles":["Metrics Routes","Authentication and Authorization"],"duration":5,"failureMessages":["Error: Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n    at Resolver._throwModNotFoundError (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:427:11)\n    at Resolver.resolveModule (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:358:10)\n    at Resolver._getVirtualMockPath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:619:14)\n    at Resolver._getAbsolutePath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:587:14)\n    at Resolver.getModuleID (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:530:31)\n    at Runtime._shouldMockCjs (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1713:37)\n    at Runtime.requireModuleOrMock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1045:16)\n    at createTestApp (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:16:19)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:104:11)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Metrics Routes Authentication and Authorization should validate organization access","status":"failed","title":"should validate organization access"},{"ancestorTitles":["Metrics Routes","Rate Limiting"],"duration":6,"failureMessages":["Error: Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n    at Resolver._throwModNotFoundError (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:427:11)\n    at Resolver.resolveModule (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:358:10)\n    at Resolver._getVirtualMockPath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:619:14)\n    at Resolver._getAbsolutePath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:587:14)\n    at Resolver.getModuleID (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:530:31)\n    at Runtime._shouldMockCjs (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1713:37)\n    at Runtime.requireModuleOrMock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1045:16)\n    at createTestApp (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:16:19)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:104:11)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Metrics Routes Rate Limiting should handle rate limiting for expensive operations","status":"failed","title":"should handle rate limiting for expensive operations"},{"ancestorTitles":["Metrics Routes","Error Handling"],"duration":7,"failureMessages":["Error: Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n    at Resolver._throwModNotFoundError (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:427:11)\n    at Resolver.resolveModule (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:358:10)\n    at Resolver._getVirtualMockPath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:619:14)\n    at Resolver._getAbsolutePath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:587:14)\n    at Resolver.getModuleID (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:530:31)\n    at Runtime._shouldMockCjs (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1713:37)\n    at Runtime.requireModuleOrMock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1045:16)\n    at createTestApp (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:16:19)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:104:11)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Metrics Routes Error Handling should handle malformed JSON requests","status":"failed","title":"should handle malformed JSON requests"},{"ancestorTitles":["Metrics Routes","Error Handling"],"duration":7,"failureMessages":["Error: Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n    at Resolver._throwModNotFoundError (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:427:11)\n    at Resolver.resolveModule (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:358:10)\n    at Resolver._getVirtualMockPath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:619:14)\n    at Resolver._getAbsolutePath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:587:14)\n    at Resolver.getModuleID (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:530:31)\n    at Runtime._shouldMockCjs (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1713:37)\n    at Runtime.requireModuleOrMock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1045:16)\n    at createTestApp (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:16:19)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:104:11)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Metrics Routes Error Handling should handle large request payloads","status":"failed","title":"should handle large request payloads"},{"ancestorTitles":["Metrics Routes","Error Handling"],"duration":3,"failureMessages":["Error: Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n    at Resolver._throwModNotFoundError (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:427:11)\n    at Resolver.resolveModule (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:358:10)\n    at Resolver._getVirtualMockPath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:619:14)\n    at Resolver._getAbsolutePath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:587:14)\n    at Resolver.getModuleID (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:530:31)\n    at Runtime._shouldMockCjs (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1713:37)\n    at Runtime.requireModuleOrMock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1045:16)\n    at createTestApp (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:16:19)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:104:11)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Metrics Routes Error Handling should handle service unavailable errors","status":"failed","title":"should handle service unavailable errors"},{"ancestorTitles":["Metrics Routes","Performance"],"duration":4,"failureMessages":["Error: Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n    at Resolver._throwModNotFoundError (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:427:11)\n    at Resolver.resolveModule (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:358:10)\n    at Resolver._getVirtualMockPath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:619:14)\n    at Resolver._getAbsolutePath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:587:14)\n    at Resolver.getModuleID (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:530:31)\n    at Runtime._shouldMockCjs (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1713:37)\n    at Runtime.requireModuleOrMock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1045:16)\n    at createTestApp (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:16:19)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:104:11)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Metrics Routes Performance should respond within acceptable time limits","status":"failed","title":"should respond within acceptable time limits"},{"ancestorTitles":["Metrics Routes","Performance"],"duration":3,"failureMessages":["Error: Cannot find module 'express' from 'src/tests/metrics.routes.test.ts'\n    at Resolver._throwModNotFoundError (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:427:11)\n    at Resolver.resolveModule (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:358:10)\n    at Resolver._getVirtualMockPath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:619:14)\n    at Resolver._getAbsolutePath (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:587:14)\n    at Resolver.getModuleID (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-resolve@29.7.0\\node_modules\\jest-resolve\\build\\resolver.js:530:31)\n    at Runtime._shouldMockCjs (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1713:37)\n    at Runtime.requireModuleOrMock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runtime@29.7.0\\node_modules\\jest-runtime\\build\\index.js:1045:16)\n    at createTestApp (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:16:19)\n    at Object.<anonymous> (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\metrics.routes.test.ts:104:11)\n    at Promise.then.completed (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\utils.js:231:10)\n    at _callCircusHook (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:281:40)\n    at _runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:246:5)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:126:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at _runTestsForDescribeBlock (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:121:9)\n    at run (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\run.js:71:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapterInit.js:122:21)\n    at jestAdapter (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-circus@29.7.0\\node_modules\\jest-circus\\build\\legacy-code-todo-rewrite\\jestAdapter.js:79:19)\n    at runTestInternal (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:367:16)\n    at runTest (C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-runner@29.7.0\\node_modules\\jest-runner\\build\\runTest.js:444:34)"],"fullName":"Metrics Routes Performance should handle concurrent requests efficiently","status":"failed","title":"should handle concurrent requests efficiently"}]},{"numFailingTests":0,"numPassingTests":0,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":0,"runtime":0,"slow":false,"start":0},"testFilePath":"C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\cache.test.ts","failureMessage":"  \u001b[1m● \u001b[22mTest suite failed to run\n\n    TypeError: cache_service_1.CacheService.cached is not a function\n\n    \u001b[0m \u001b[90m 329 |\u001b[39m       }\n     \u001b[90m 330 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 331 |\u001b[39m       \u001b[33m@\u001b[39m\u001b[33mCacheService\u001b[39m\u001b[33m.\u001b[39mcached(\u001b[32m'test:method'\u001b[39m\u001b[33m,\u001b[39m \u001b[35m300\u001b[39m)\n     \u001b[90m     |\u001b[39m                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 332 |\u001b[39m       \u001b[36masync\u001b[39m expensiveMethod(param\u001b[33m:\u001b[39m string)\u001b[33m:\u001b[39m \u001b[33mPromise\u001b[39m\u001b[33m<\u001b[39m\u001b[33mstring\u001b[39m\u001b[33m>\u001b[39m {\n     \u001b[90m 333 |\u001b[39m         \u001b[90m// Simulate expensive operation\u001b[39m\n     \u001b[90m 334 |\u001b[39m         \u001b[36mawait\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mPromise\u001b[39m(resolve \u001b[33m=>\u001b[39m setTimeout(resolve\u001b[33m,\u001b[39m \u001b[35m100\u001b[39m))\u001b[33m;\u001b[39m\u001b[0m\n\n      \u001b[2mat \u001b[22m\u001b[0m\u001b[36msrc/tests/cache.test.ts\u001b[39m\u001b[0m\u001b[2m:331:21\u001b[22m\n      \u001b[2mat \u001b[22m\u001b[0m\u001b[36msrc/tests/cache.test.ts\u001b[39m\u001b[0m\u001b[2m:323:11\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[0m\u001b[36msrc/tests/cache.test.ts\u001b[39m\u001b[0m\u001b[2m:8:9)\u001b[22m\n","testResults":[]}],"config":{"bail":0,"changedFilesWithAncestor":false,"ci":false,"collectCoverage":true,"collectCoverageFrom":["src/**/*.(t|j)s","!src/**/*.d.ts","!src/tests/**/*","!src/**/__tests__/**/*","!src/main.ts","!src/**/*.interface.ts","!src/**/*.enum.ts"],"coverageDirectory":"C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\coverage","coverageProvider":"babel","coverageReporters":["text","lcov","html","json"],"coverageThreshold":{"global":{"branches":80,"functions":80,"lines":80,"statements":80}},"detectLeaks":false,"detectOpenHandles":true,"errorOnDeprecated":true,"expand":false,"findRelatedTests":false,"forceExit":true,"globalSetup":"C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\global-setup.ts","globalTeardown":"C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\tests\\global-teardown.ts","json":false,"lastCommit":false,"listTests":false,"logHeapUsage":false,"maxConcurrency":5,"maxWorkers":12,"noStackTrace":false,"nonFlagArgs":[],"notify":false,"notifyMode":"failure-change","onlyChanged":false,"onlyFailures":false,"openHandlesTimeout":1000,"passWithNoTests":false,"projects":[],"reporters":[["default",{}],["C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-junit@16.0.0\\node_modules\\jest-junit\\index.js",{"outputDirectory":"test-results","outputName":"junit.xml","suiteName":"Utmify API Tests"}],["C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-html-reporters@3.1.7\\node_modules\\jest-html-reporters\\index.js",{"publicPath":"test-results","filename":"report.html","expand":true}]],"rootDir":"C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api","runTestsByPath":false,"seed":-736610543,"skipFilter":false,"snapshotFormat":{"escapeString":false,"printBasicPrototype":false},"testFailureExitCode":1,"testPathPattern":"","testSequencer":"C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\@jest+test-sequencer@29.7.0\\node_modules\\@jest\\test-sequencer\\build\\index.js","testTimeout":30000,"updateSnapshot":"new","useStderr":false,"verbose":true,"watch":false,"watchAll":false,"watchPlugins":[{"config":{},"path":"C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-watch-typeahead@3.0.1_jest@29.7.0\\node_modules\\jest-watch-typeahead\\build\\file_name_plugin\\plugin.js"},{"config":{},"path":"C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\node_modules\\.pnpm\\jest-watch-typeahead@3.0.1_jest@29.7.0\\node_modules\\jest-watch-typeahead\\build\\test_name_plugin\\plugin.js"}],"watchman":true,"workerThreads":false,"coverageLinkPath":"..\\coverage\\lcov-report\\index.html"},"endTime":1757638443128,"_reporterOptions":{"publicPath":"test-results","filename":"report.html","expand":true,"pageTitle":"","hideIcon":false,"testCommand":"","openReport":false,"failureMessageOnly":0,"enableMergeData":false,"dataMergeLevel":1,"inlineSource":false,"urlForTestFiles":"","darkTheme":false,"includeConsoleLog":false,"stripSkippedTest":false},"logInfoMapping":{},"attachInfos":{}})