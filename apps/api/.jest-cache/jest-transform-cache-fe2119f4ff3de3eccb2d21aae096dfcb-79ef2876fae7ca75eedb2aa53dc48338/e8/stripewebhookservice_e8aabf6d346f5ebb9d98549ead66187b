0b7a481bd67de71893b3208a20e2c491
/* istanbul ignore next */
function cov_vlnq7ry4i() {
  var path = "C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\stripe-webhook.service.ts";
  var hash = "a36371f415286e03b15da9ad6b97a1d373bb30b8";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\stripe-webhook.service.ts",
    statementMap: {
      "0": {
        start: {
          line: 9,
          column: 8
        },
        end: {
          line: 9,
          column: 42
        }
      },
      "1": {
        start: {
          line: 10,
          column: 8
        },
        end: {
          line: 10,
          column: 49
        }
      },
      "2": {
        start: {
          line: 13,
          column: 8
        },
        end: {
          line: 13,
          column: 87
        }
      },
      "3": {
        start: {
          line: 14,
          column: 8
        },
        end: {
          line: 51,
          column: 9
        }
      },
      "4": {
        start: {
          line: 15,
          column: 12
        },
        end: {
          line: 42,
          column: 13
        }
      },
      "5": {
        start: {
          line: 17,
          column: 20
        },
        end: {
          line: 17,
          column: 76
        }
      },
      "6": {
        start: {
          line: 18,
          column: 20
        },
        end: {
          line: 18,
          column: 26
        }
      },
      "7": {
        start: {
          line: 20,
          column: 20
        },
        end: {
          line: 20,
          column: 76
        }
      },
      "8": {
        start: {
          line: 21,
          column: 20
        },
        end: {
          line: 21,
          column: 26
        }
      },
      "9": {
        start: {
          line: 23,
          column: 20
        },
        end: {
          line: 23,
          column: 76
        }
      },
      "10": {
        start: {
          line: 24,
          column: 20
        },
        end: {
          line: 24,
          column: 26
        }
      },
      "11": {
        start: {
          line: 26,
          column: 20
        },
        end: {
          line: 26,
          column: 80
        }
      },
      "12": {
        start: {
          line: 27,
          column: 20
        },
        end: {
          line: 27,
          column: 26
        }
      },
      "13": {
        start: {
          line: 29,
          column: 20
        },
        end: {
          line: 29,
          column: 77
        }
      },
      "14": {
        start: {
          line: 30,
          column: 20
        },
        end: {
          line: 30,
          column: 26
        }
      },
      "15": {
        start: {
          line: 32,
          column: 20
        },
        end: {
          line: 32,
          column: 72
        }
      },
      "16": {
        start: {
          line: 33,
          column: 20
        },
        end: {
          line: 33,
          column: 26
        }
      },
      "17": {
        start: {
          line: 35,
          column: 20
        },
        end: {
          line: 35,
          column: 72
        }
      },
      "18": {
        start: {
          line: 36,
          column: 20
        },
        end: {
          line: 36,
          column: 26
        }
      },
      "19": {
        start: {
          line: 38,
          column: 20
        },
        end: {
          line: 38,
          column: 78
        }
      },
      "20": {
        start: {
          line: 39,
          column: 20
        },
        end: {
          line: 39,
          column: 26
        }
      },
      "21": {
        start: {
          line: 41,
          column: 20
        },
        end: {
          line: 41,
          column: 79
        }
      },
      "22": {
        start: {
          line: 44,
          column: 12
        },
        end: {
          line: 44,
          column: 57
        }
      },
      "23": {
        start: {
          line: 45,
          column: 12
        },
        end: {
          line: 45,
          column: 96
        }
      },
      "24": {
        start: {
          line: 48,
          column: 12
        },
        end: {
          line: 48,
          column: 98
        }
      },
      "25": {
        start: {
          line: 49,
          column: 12
        },
        end: {
          line: 49,
          column: 71
        }
      },
      "26": {
        start: {
          line: 50,
          column: 12
        },
        end: {
          line: 50,
          column: 24
        }
      },
      "27": {
        start: {
          line: 54,
          column: 27
        },
        end: {
          line: 54,
          column: 48
        }
      },
      "28": {
        start: {
          line: 55,
          column: 24
        },
        end: {
          line: 55,
          column: 60
        }
      },
      "29": {
        start: {
          line: 57,
          column: 29
        },
        end: {
          line: 59,
          column: 10
        }
      },
      "30": {
        start: {
          line: 60,
          column: 8
        },
        end: {
          line: 62,
          column: 9
        }
      },
      "31": {
        start: {
          line: 61,
          column: 12
        },
        end: {
          line: 61,
          column: 85
        }
      },
      "32": {
        start: {
          line: 64,
          column: 21
        },
        end: {
          line: 66,
          column: 10
        }
      },
      "33": {
        start: {
          line: 67,
          column: 8
        },
        end: {
          line: 69,
          column: 9
        }
      },
      "34": {
        start: {
          line: 68,
          column: 12
        },
        end: {
          line: 68,
          column: 71
        }
      },
      "35": {
        start: {
          line: 71,
          column: 8
        },
        end: {
          line: 84,
          column: 11
        }
      },
      "36": {
        start: {
          line: 86,
          column: 8
        },
        end: {
          line: 89,
          column: 11
        }
      },
      "37": {
        start: {
          line: 90,
          column: 8
        },
        end: {
          line: 93,
          column: 11
        }
      },
      "38": {
        start: {
          line: 96,
          column: 37
        },
        end: {
          line: 99,
          column: 10
        }
      },
      "39": {
        start: {
          line: 100,
          column: 8
        },
        end: {
          line: 103,
          column: 9
        }
      },
      "40": {
        start: {
          line: 101,
          column: 12
        },
        end: {
          line: 101,
          column: 81
        }
      },
      "41": {
        start: {
          line: 102,
          column: 12
        },
        end: {
          line: 102,
          column: 19
        }
      },
      "42": {
        start: {
          line: 104,
          column: 24
        },
        end: {
          line: 104,
          column: 60
        }
      },
      "43": {
        start: {
          line: 105,
          column: 21
        },
        end: {
          line: 105,
          column: 48
        }
      },
      "44": {
        start: {
          line: 107,
          column: 8
        },
        end: {
          line: 119,
          column: 9
        }
      },
      "45": {
        start: {
          line: 108,
          column: 28
        },
        end: {
          line: 110,
          column: 14
        }
      },
      "46": {
        start: {
          line: 111,
          column: 12
        },
        end: {
          line: 118,
          column: 13
        }
      },
      "47": {
        start: {
          line: 112,
          column: 16
        },
        end: {
          line: 112,
          column: 36
        }
      },
      "48": {
        start: {
          line: 114,
          column: 16
        },
        end: {
          line: 117,
          column: 19
        }
      },
      "49": {
        start: {
          line: 121,
          column: 8
        },
        end: {
          line: 133,
          column: 11
        }
      },
      "50": {
        start: {
          line: 134,
          column: 8
        },
        end: {
          line: 137,
          column: 11
        }
      },
      "51": {
        start: {
          line: 140,
          column: 37
        },
        end: {
          line: 143,
          column: 10
        }
      },
      "52": {
        start: {
          line: 144,
          column: 8
        },
        end: {
          line: 147,
          column: 9
        }
      },
      "53": {
        start: {
          line: 145,
          column: 12
        },
        end: {
          line: 145,
          column: 83
        }
      },
      "54": {
        start: {
          line: 146,
          column: 12
        },
        end: {
          line: 146,
          column: 19
        }
      },
      "55": {
        start: {
          line: 149,
          column: 8
        },
        end: {
          line: 156,
          column: 11
        }
      },
      "56": {
        start: {
          line: 158,
          column: 25
        },
        end: {
          line: 160,
          column: 10
        }
      },
      "57": {
        start: {
          line: 161,
          column: 8
        },
        end: {
          line: 166,
          column: 9
        }
      },
      "58": {
        start: {
          line: 162,
          column: 12
        },
        end: {
          line: 165,
          column: 15
        }
      },
      "59": {
        start: {
          line: 167,
          column: 8
        },
        end: {
          line: 169,
          column: 11
        }
      },
      "60": {
        start: {
          line: 172,
          column: 31
        },
        end: {
          line: 172,
          column: 51
        }
      },
      "61": {
        start: {
          line: 173,
          column: 8
        },
        end: {
          line: 176,
          column: 9
        }
      },
      "62": {
        start: {
          line: 174,
          column: 12
        },
        end: {
          line: 174,
          column: 109
        }
      },
      "63": {
        start: {
          line: 175,
          column: 12
        },
        end: {
          line: 175,
          column: 19
        }
      },
      "64": {
        start: {
          line: 177,
          column: 29
        },
        end: {
          line: 179,
          column: 10
        }
      },
      "65": {
        start: {
          line: 180,
          column: 8
        },
        end: {
          line: 183,
          column: 9
        }
      },
      "66": {
        start: {
          line: 181,
          column: 12
        },
        end: {
          line: 181,
          column: 77
        }
      },
      "67": {
        start: {
          line: 182,
          column: 12
        },
        end: {
          line: 182,
          column: 19
        }
      },
      "68": {
        start: {
          line: 185,
          column: 8
        },
        end: {
          line: 204,
          column: 11
        }
      },
      "69": {
        start: {
          line: 206,
          column: 8
        },
        end: {
          line: 211,
          column: 9
        }
      },
      "70": {
        start: {
          line: 207,
          column: 12
        },
        end: {
          line: 210,
          column: 15
        }
      },
      "71": {
        start: {
          line: 212,
          column: 8
        },
        end: {
          line: 215,
          column: 11
        }
      },
      "72": {
        start: {
          line: 218,
          column: 31
        },
        end: {
          line: 218,
          column: 51
        }
      },
      "73": {
        start: {
          line: 219,
          column: 8
        },
        end: {
          line: 222,
          column: 9
        }
      },
      "74": {
        start: {
          line: 220,
          column: 12
        },
        end: {
          line: 220,
          column: 106
        }
      },
      "75": {
        start: {
          line: 221,
          column: 12
        },
        end: {
          line: 221,
          column: 19
        }
      },
      "76": {
        start: {
          line: 223,
          column: 29
        },
        end: {
          line: 225,
          column: 10
        }
      },
      "77": {
        start: {
          line: 226,
          column: 8
        },
        end: {
          line: 229,
          column: 9
        }
      },
      "78": {
        start: {
          line: 227,
          column: 12
        },
        end: {
          line: 227,
          column: 84
        }
      },
      "79": {
        start: {
          line: 228,
          column: 12
        },
        end: {
          line: 228,
          column: 19
        }
      },
      "80": {
        start: {
          line: 231,
          column: 8
        },
        end: {
          line: 246,
          column: 11
        }
      },
      "81": {
        start: {
          line: 248,
          column: 8
        },
        end: {
          line: 251,
          column: 11
        }
      },
      "82": {
        start: {
          line: 252,
          column: 8
        },
        end: {
          line: 255,
          column: 11
        }
      },
      "83": {
        start: {
          line: 259,
          column: 8
        },
        end: {
          line: 262,
          column: 11
        }
      },
      "84": {
        start: {
          line: 266,
          column: 29
        },
        end: {
          line: 268,
          column: 10
        }
      },
      "85": {
        start: {
          line: 269,
          column: 8
        },
        end: {
          line: 274,
          column: 9
        }
      },
      "86": {
        start: {
          line: 270,
          column: 12
        },
        end: {
          line: 273,
          column: 15
        }
      },
      "87": {
        start: {
          line: 277,
          column: 27
        },
        end: {
          line: 277,
          column: 49
        }
      },
      "88": {
        start: {
          line: 278,
          column: 29
        },
        end: {
          line: 280,
          column: 10
        }
      },
      "89": {
        start: {
          line: 281,
          column: 8
        },
        end: {
          line: 284,
          column: 9
        }
      },
      "90": {
        start: {
          line: 282,
          column: 12
        },
        end: {
          line: 282,
          column: 90
        }
      },
      "91": {
        start: {
          line: 283,
          column: 12
        },
        end: {
          line: 283,
          column: 19
        }
      },
      "92": {
        start: {
          line: 286,
          column: 8
        },
        end: {
          line: 304,
          column: 11
        }
      },
      "93": {
        start: {
          line: 305,
          column: 8
        },
        end: {
          line: 308,
          column: 11
        }
      },
      "94": {
        start: {
          line: 311,
          column: 26
        },
        end: {
          line: 319,
          column: 9
        }
      },
      "95": {
        start: {
          line: 320,
          column: 8
        },
        end: {
          line: 320,
          column: 72
        }
      },
      "96": {
        start: {
          line: 323,
          column: 8
        },
        end: {
          line: 337,
          column: 9
        }
      },
      "97": {
        start: {
          line: 324,
          column: 12
        },
        end: {
          line: 333,
          column: 15
        }
      },
      "98": {
        start: {
          line: 336,
          column: 12
        },
        end: {
          line: 336,
          column: 64
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 8,
            column: 4
          },
          end: {
            line: 8,
            column: 5
          }
        },
        loc: {
          start: {
            line: 8,
            column: 18
          },
          end: {
            line: 11,
            column: 5
          }
        },
        line: 8
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 12,
            column: 4
          },
          end: {
            line: 12,
            column: 5
          }
        },
        loc: {
          start: {
            line: 12,
            column: 31
          },
          end: {
            line: 52,
            column: 5
          }
        },
        line: 12
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 53,
            column: 4
          },
          end: {
            line: 53,
            column: 5
          }
        },
        loc: {
          start: {
            line: 53,
            column: 50
          },
          end: {
            line: 94,
            column: 5
          }
        },
        line: 53
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 95,
            column: 4
          },
          end: {
            line: 95,
            column: 5
          }
        },
        loc: {
          start: {
            line: 95,
            column: 50
          },
          end: {
            line: 138,
            column: 5
          }
        },
        line: 95
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 139,
            column: 4
          },
          end: {
            line: 139,
            column: 5
          }
        },
        loc: {
          start: {
            line: 139,
            column: 50
          },
          end: {
            line: 170,
            column: 5
          }
        },
        line: 139
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 171,
            column: 4
          },
          end: {
            line: 171,
            column: 5
          }
        },
        loc: {
          start: {
            line: 171,
            column: 49
          },
          end: {
            line: 216,
            column: 5
          }
        },
        line: 171
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 217,
            column: 4
          },
          end: {
            line: 217,
            column: 5
          }
        },
        loc: {
          start: {
            line: 217,
            column: 46
          },
          end: {
            line: 257,
            column: 5
          }
        },
        line: 217
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 258,
            column: 4
          },
          end: {
            line: 258,
            column: 5
          }
        },
        loc: {
          start: {
            line: 258,
            column: 42
          },
          end: {
            line: 264,
            column: 5
          }
        },
        line: 258
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 265,
            column: 4
          },
          end: {
            line: 265,
            column: 5
          }
        },
        loc: {
          start: {
            line: 265,
            column: 42
          },
          end: {
            line: 275,
            column: 5
          }
        },
        line: 265
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 276,
            column: 4
          },
          end: {
            line: 276,
            column: 5
          }
        },
        loc: {
          start: {
            line: 276,
            column: 53
          },
          end: {
            line: 309,
            column: 5
          }
        },
        line: 276
      },
      "10": {
        name: "(anonymous_10)",
        decl: {
          start: {
            line: 310,
            column: 4
          },
          end: {
            line: 310,
            column: 5
          }
        },
        loc: {
          start: {
            line: 310,
            column: 34
          },
          end: {
            line: 321,
            column: 5
          }
        },
        line: 310
      },
      "11": {
        name: "(anonymous_11)",
        decl: {
          start: {
            line: 322,
            column: 4
          },
          end: {
            line: 322,
            column: 5
          }
        },
        loc: {
          start: {
            line: 322,
            column: 55
          },
          end: {
            line: 338,
            column: 5
          }
        },
        line: 322
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 15,
            column: 12
          },
          end: {
            line: 42,
            column: 13
          }
        },
        type: "switch",
        locations: [{
          start: {
            line: 16,
            column: 16
          },
          end: {
            line: 18,
            column: 26
          }
        }, {
          start: {
            line: 19,
            column: 16
          },
          end: {
            line: 21,
            column: 26
          }
        }, {
          start: {
            line: 22,
            column: 16
          },
          end: {
            line: 24,
            column: 26
          }
        }, {
          start: {
            line: 25,
            column: 16
          },
          end: {
            line: 27,
            column: 26
          }
        }, {
          start: {
            line: 28,
            column: 16
          },
          end: {
            line: 30,
            column: 26
          }
        }, {
          start: {
            line: 31,
            column: 16
          },
          end: {
            line: 33,
            column: 26
          }
        }, {
          start: {
            line: 34,
            column: 16
          },
          end: {
            line: 36,
            column: 26
          }
        }, {
          start: {
            line: 37,
            column: 16
          },
          end: {
            line: 39,
            column: 26
          }
        }, {
          start: {
            line: 40,
            column: 16
          },
          end: {
            line: 41,
            column: 79
          }
        }],
        line: 15
      },
      "1": {
        loc: {
          start: {
            line: 60,
            column: 8
          },
          end: {
            line: 62,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 60,
            column: 8
          },
          end: {
            line: 62,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 60
      },
      "2": {
        loc: {
          start: {
            line: 67,
            column: 8
          },
          end: {
            line: 69,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 67,
            column: 8
          },
          end: {
            line: 69,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 67
      },
      "3": {
        loc: {
          start: {
            line: 79,
            column: 28
          },
          end: {
            line: 79,
            column: 103
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 79,
            column: 55
          },
          end: {
            line: 79,
            column: 96
          }
        }, {
          start: {
            line: 79,
            column: 99
          },
          end: {
            line: 79,
            column: 103
          }
        }],
        line: 79
      },
      "4": {
        loc: {
          start: {
            line: 80,
            column: 26
          },
          end: {
            line: 80,
            column: 97
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 80,
            column: 51
          },
          end: {
            line: 80,
            column: 90
          }
        }, {
          start: {
            line: 80,
            column: 93
          },
          end: {
            line: 80,
            column: 97
          }
        }],
        line: 80
      },
      "5": {
        loc: {
          start: {
            line: 82,
            column: 28
          },
          end: {
            line: 82,
            column: 103
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 82,
            column: 55
          },
          end: {
            line: 82,
            column: 96
          }
        }, {
          start: {
            line: 82,
            column: 99
          },
          end: {
            line: 82,
            column: 103
          }
        }],
        line: 82
      },
      "6": {
        loc: {
          start: {
            line: 100,
            column: 8
          },
          end: {
            line: 103,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 100,
            column: 8
          },
          end: {
            line: 103,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 100
      },
      "7": {
        loc: {
          start: {
            line: 107,
            column: 8
          },
          end: {
            line: 119,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 107,
            column: 8
          },
          end: {
            line: 119,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 107
      },
      "8": {
        loc: {
          start: {
            line: 107,
            column: 12
          },
          end: {
            line: 107,
            column: 74
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 107,
            column: 12
          },
          end: {
            line: 107,
            column: 19
          }
        }, {
          start: {
            line: 107,
            column: 23
          },
          end: {
            line: 107,
            column: 74
          }
        }],
        line: 107
      },
      "9": {
        loc: {
          start: {
            line: 111,
            column: 12
          },
          end: {
            line: 118,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 111,
            column: 12
          },
          end: {
            line: 118,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 111
      },
      "10": {
        loc: {
          start: {
            line: 128,
            column: 28
          },
          end: {
            line: 128,
            column: 103
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 128,
            column: 55
          },
          end: {
            line: 128,
            column: 96
          }
        }, {
          start: {
            line: 128,
            column: 99
          },
          end: {
            line: 128,
            column: 103
          }
        }],
        line: 128
      },
      "11": {
        loc: {
          start: {
            line: 129,
            column: 26
          },
          end: {
            line: 129,
            column: 97
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 129,
            column: 51
          },
          end: {
            line: 129,
            column: 90
          }
        }, {
          start: {
            line: 129,
            column: 93
          },
          end: {
            line: 129,
            column: 97
          }
        }],
        line: 129
      },
      "12": {
        loc: {
          start: {
            line: 131,
            column: 28
          },
          end: {
            line: 131,
            column: 103
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 131,
            column: 55
          },
          end: {
            line: 131,
            column: 96
          }
        }, {
          start: {
            line: 131,
            column: 99
          },
          end: {
            line: 131,
            column: 103
          }
        }],
        line: 131
      },
      "13": {
        loc: {
          start: {
            line: 144,
            column: 8
          },
          end: {
            line: 147,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 144,
            column: 8
          },
          end: {
            line: 147,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 144
      },
      "14": {
        loc: {
          start: {
            line: 161,
            column: 8
          },
          end: {
            line: 166,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 161,
            column: 8
          },
          end: {
            line: 166,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 161
      },
      "15": {
        loc: {
          start: {
            line: 173,
            column: 8
          },
          end: {
            line: 176,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 173,
            column: 8
          },
          end: {
            line: 176,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 173
      },
      "16": {
        loc: {
          start: {
            line: 180,
            column: 8
          },
          end: {
            line: 183,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 180,
            column: 8
          },
          end: {
            line: 183,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 180
      },
      "17": {
        loc: {
          start: {
            line: 196,
            column: 24
          },
          end: {
            line: 196,
            column: 61
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 196,
            column: 24
          },
          end: {
            line: 196,
            column: 38
          }
        }, {
          start: {
            line: 196,
            column: 42
          },
          end: {
            line: 196,
            column: 61
          }
        }],
        line: 196
      },
      "18": {
        loc: {
          start: {
            line: 206,
            column: 8
          },
          end: {
            line: 211,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 206,
            column: 8
          },
          end: {
            line: 211,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 206
      },
      "19": {
        loc: {
          start: {
            line: 219,
            column: 8
          },
          end: {
            line: 222,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 219,
            column: 8
          },
          end: {
            line: 222,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 219
      },
      "20": {
        loc: {
          start: {
            line: 226,
            column: 8
          },
          end: {
            line: 229,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 226,
            column: 8
          },
          end: {
            line: 229,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 226
      },
      "21": {
        loc: {
          start: {
            line: 239,
            column: 24
          },
          end: {
            line: 239,
            column: 61
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 239,
            column: 24
          },
          end: {
            line: 239,
            column: 38
          }
        }, {
          start: {
            line: 239,
            column: 42
          },
          end: {
            line: 239,
            column: 61
          }
        }],
        line: 239
      },
      "22": {
        loc: {
          start: {
            line: 269,
            column: 8
          },
          end: {
            line: 274,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 269,
            column: 8
          },
          end: {
            line: 274,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 269
      },
      "23": {
        loc: {
          start: {
            line: 281,
            column: 8
          },
          end: {
            line: 284,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 281,
            column: 8
          },
          end: {
            line: 284,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 281
      },
      "24": {
        loc: {
          start: {
            line: 290,
            column: 23
          },
          end: {
            line: 290,
            column: 56
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 290,
            column: 23
          },
          end: {
            line: 290,
            column: 48
          }
        }, {
          start: {
            line: 290,
            column: 52
          },
          end: {
            line: 290,
            column: 56
          }
        }],
        line: 290
      },
      "25": {
        loc: {
          start: {
            line: 291,
            column: 23
          },
          end: {
            line: 291,
            column: 56
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 291,
            column: 23
          },
          end: {
            line: 291,
            column: 48
          }
        }, {
          start: {
            line: 291,
            column: 52
          },
          end: {
            line: 291,
            column: 56
          }
        }],
        line: 291
      },
      "26": {
        loc: {
          start: {
            line: 292,
            column: 29
          },
          end: {
            line: 292,
            column: 66
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 292,
            column: 29
          },
          end: {
            line: 292,
            column: 58
          }
        }, {
          start: {
            line: 292,
            column: 62
          },
          end: {
            line: 292,
            column: 66
          }
        }],
        line: 292
      },
      "27": {
        loc: {
          start: {
            line: 293,
            column: 28
          },
          end: {
            line: 293,
            column: 64
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 293,
            column: 28
          },
          end: {
            line: 293,
            column: 56
          }
        }, {
          start: {
            line: 293,
            column: 60
          },
          end: {
            line: 293,
            column: 64
          }
        }],
        line: 293
      },
      "28": {
        loc: {
          start: {
            line: 299,
            column: 23
          },
          end: {
            line: 299,
            column: 56
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 299,
            column: 23
          },
          end: {
            line: 299,
            column: 48
          }
        }, {
          start: {
            line: 299,
            column: 52
          },
          end: {
            line: 299,
            column: 56
          }
        }],
        line: 299
      },
      "29": {
        loc: {
          start: {
            line: 300,
            column: 23
          },
          end: {
            line: 300,
            column: 56
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 300,
            column: 23
          },
          end: {
            line: 300,
            column: 48
          }
        }, {
          start: {
            line: 300,
            column: 52
          },
          end: {
            line: 300,
            column: 56
          }
        }],
        line: 300
      },
      "30": {
        loc: {
          start: {
            line: 301,
            column: 29
          },
          end: {
            line: 301,
            column: 66
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 301,
            column: 29
          },
          end: {
            line: 301,
            column: 58
          }
        }, {
          start: {
            line: 301,
            column: 62
          },
          end: {
            line: 301,
            column: 66
          }
        }],
        line: 301
      },
      "31": {
        loc: {
          start: {
            line: 302,
            column: 28
          },
          end: {
            line: 302,
            column: 64
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 302,
            column: 28
          },
          end: {
            line: 302,
            column: 56
          }
        }, {
          start: {
            line: 302,
            column: 60
          },
          end: {
            line: 302,
            column: 64
          }
        }],
        line: 302
      },
      "32": {
        loc: {
          start: {
            line: 320,
            column: 15
          },
          end: {
            line: 320,
            column: 71
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 320,
            column: 15
          },
          end: {
            line: 320,
            column: 38
          }
        }, {
          start: {
            line: 320,
            column: 42
          },
          end: {
            line: 320,
            column: 71
          }
        }],
        line: 320
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0,
      "66": 0,
      "67": 0,
      "68": 0,
      "69": 0,
      "70": 0,
      "71": 0,
      "72": 0,
      "73": 0,
      "74": 0,
      "75": 0,
      "76": 0,
      "77": 0,
      "78": 0,
      "79": 0,
      "80": 0,
      "81": 0,
      "82": 0,
      "83": 0,
      "84": 0,
      "85": 0,
      "86": 0,
      "87": 0,
      "88": 0,
      "89": 0,
      "90": 0,
      "91": 0,
      "92": 0,
      "93": 0,
      "94": 0,
      "95": 0,
      "96": 0,
      "97": 0,
      "98": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0
    },
    b: {
      "0": [0, 0, 0, 0, 0, 0, 0, 0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0],
      "13": [0, 0],
      "14": [0, 0],
      "15": [0, 0],
      "16": [0, 0],
      "17": [0, 0],
      "18": [0, 0],
      "19": [0, 0],
      "20": [0, 0],
      "21": [0, 0],
      "22": [0, 0],
      "23": [0, 0],
      "24": [0, 0],
      "25": [0, 0],
      "26": [0, 0],
      "27": [0, 0],
      "28": [0, 0],
      "29": [0, 0],
      "30": [0, 0],
      "31": [0, 0],
      "32": [0, 0]
    },
    inputSourceMap: {
      file: "C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\stripe-webhook.service.ts",
      mappings: "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",
      names: [],
      sources: ["C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\stripe-webhook.service.ts"],
      sourcesContent: ["import Stripe from 'stripe';\nimport { PrismaService } from '../database/prisma.service';\nimport { StripeService } from './stripe.service';\nimport { logger } from '../utils/logger';\nimport { SubscriptionStatus, InvoiceStatus } from '@prisma/client';\n\nexport class StripeWebhookService {\n  private prisma: PrismaService;\n  private stripeService: StripeService;\n\n  constructor() {\n    this.prisma = new PrismaService();\n    this.stripeService = new StripeService();\n  }\n\n  async handleWebhook(event: Stripe.Event): Promise<void> {\n    logger.info(`Processing Stripe webhook: ${event.type}`, { eventId: event.id });\n\n    try {\n      switch (event.type) {\n        case 'customer.subscription.created':\n          await this.handleSubscriptionCreated(event.data.object as Stripe.Subscription);\n          break;\n\n        case 'customer.subscription.updated':\n          await this.handleSubscriptionUpdated(event.data.object as Stripe.Subscription);\n          break;\n\n        case 'customer.subscription.deleted':\n          await this.handleSubscriptionDeleted(event.data.object as Stripe.Subscription);\n          break;\n\n        case 'invoice.payment_succeeded':\n          await this.handleInvoicePaymentSucceeded(event.data.object as Stripe.Invoice);\n          break;\n\n        case 'invoice.payment_failed':\n          await this.handleInvoicePaymentFailed(event.data.object as Stripe.Invoice);\n          break;\n\n        case 'customer.created':\n          await this.handleCustomerCreated(event.data.object as Stripe.Customer);\n          break;\n\n        case 'customer.updated':\n          await this.handleCustomerUpdated(event.data.object as Stripe.Customer);\n          break;\n\n        case 'payment_method.attached':\n          await this.handlePaymentMethodAttached(event.data.object as Stripe.PaymentMethod);\n          break;\n\n        default:\n          logger.warn(`Unhandled webhook event type: ${event.type}`);\n      }\n\n      // Log successful webhook processing\n      await this.logWebhookEvent(event, 'success');\n      logger.info(`Successfully processed webhook: ${event.type}`, { eventId: event.id });\n\n    } catch (error) {\n      logger.error(`Error processing webhook ${event.type}:`, error, { eventId: event.id });\n      await this.logWebhookEvent(event, 'failed', error.message);\n      throw error;\n    }\n  }\n\n  private async handleSubscriptionCreated(subscription: Stripe.Subscription): Promise<void> {\n    const customerId = subscription.customer as string;\n    const priceId = subscription.items.data[0]?.price.id;\n\n    // Find organization by Stripe customer ID\n    const organization = await this.prisma.organization.findFirst({\n      where: { stripeCustomerId: customerId },\n    });\n\n    if (!organization) {\n      throw new Error(`Organization not found for customer ID: ${customerId}`);\n    }\n\n    // Find plan by Stripe price ID\n    const plan = await this.prisma.plan.findFirst({\n      where: { stripePriceId: priceId },\n    });\n\n    if (!plan) {\n      throw new Error(`Plan not found for price ID: ${priceId}`);\n    }\n\n    // Create subscription record\n    await this.prisma.subscription.create({\n      data: {\n        organizationId: organization.id,\n        planId: plan.id,\n        stripeSubscriptionId: subscription.id,\n        status: this.mapStripeStatus(subscription.status),\n        currentPeriodStart: new Date(subscription.current_period_start * 1000),\n        currentPeriodEnd: new Date(subscription.current_period_end * 1000),\n        trialStart: subscription.trial_start ? new Date(subscription.trial_start * 1000) : null,\n        trialEnd: subscription.trial_end ? new Date(subscription.trial_end * 1000) : null,\n        cancelAtPeriodEnd: subscription.cancel_at_period_end,\n        canceledAt: subscription.canceled_at ? new Date(subscription.canceled_at * 1000) : null,\n      },\n    });\n\n    // Update organization plan type\n    await this.prisma.organization.update({\n      where: { id: organization.id },\n      data: { planType: plan.type },\n    });\n\n    logger.info(`Subscription created for organization ${organization.id}`, {\n      subscriptionId: subscription.id,\n      planType: plan.type,\n    });\n  }\n\n  private async handleSubscriptionUpdated(subscription: Stripe.Subscription): Promise<void> {\n    const existingSubscription = await this.prisma.subscription.findFirst({\n      where: { stripeSubscriptionId: subscription.id },\n      include: { plan: true, organization: true },\n    });\n\n    if (!existingSubscription) {\n      logger.warn(`Subscription not found for update: ${subscription.id}`);\n      return;\n    }\n\n    const priceId = subscription.items.data[0]?.price.id;\n    let planId = existingSubscription.planId;\n\n    // Check if plan changed\n    if (priceId && priceId !== existingSubscription.plan.stripePriceId) {\n      const newPlan = await this.prisma.plan.findFirst({\n        where: { stripePriceId: priceId },\n      });\n\n      if (newPlan) {\n        planId = newPlan.id;\n        \n        // Update organization plan type\n        await this.prisma.organization.update({\n          where: { id: existingSubscription.organizationId },\n          data: { planType: newPlan.type },\n        });\n      }\n    }\n\n    // Update subscription\n    await this.prisma.subscription.update({\n      where: { id: existingSubscription.id },\n      data: {\n        planId,\n        status: this.mapStripeStatus(subscription.status),\n        currentPeriodStart: new Date(subscription.current_period_start * 1000),\n        currentPeriodEnd: new Date(subscription.current_period_end * 1000),\n        trialStart: subscription.trial_start ? new Date(subscription.trial_start * 1000) : null,\n        trialEnd: subscription.trial_end ? new Date(subscription.trial_end * 1000) : null,\n        cancelAtPeriodEnd: subscription.cancel_at_period_end,\n        canceledAt: subscription.canceled_at ? new Date(subscription.canceled_at * 1000) : null,\n      },\n    });\n\n    logger.info(`Subscription updated: ${subscription.id}`, {\n      organizationId: existingSubscription.organizationId,\n      status: subscription.status,\n    });\n  }\n\n  private async handleSubscriptionDeleted(subscription: Stripe.Subscription): Promise<void> {\n    const existingSubscription = await this.prisma.subscription.findFirst({\n      where: { stripeSubscriptionId: subscription.id },\n      include: { organization: true },\n    });\n\n    if (!existingSubscription) {\n      logger.warn(`Subscription not found for deletion: ${subscription.id}`);\n      return;\n    }\n\n    // Soft delete: update status instead of deleting\n    await this.prisma.subscription.update({\n      where: { id: existingSubscription.id },\n      data: {\n        status: SubscriptionStatus.CANCELED,\n        canceledAt: new Date(),\n        deletedAt: new Date(), // Soft delete\n      },\n    });\n\n    // Downgrade organization to free plan\n    const freePlan = await this.prisma.plan.findFirst({\n      where: { type: 'FREE' },\n    });\n\n    if (freePlan) {\n      await this.prisma.organization.update({\n        where: { id: existingSubscription.organizationId },\n        data: { planType: freePlan.type },\n      });\n    }\n\n    logger.info(`Subscription deleted (soft): ${subscription.id}`, {\n      organizationId: existingSubscription.organizationId,\n    });\n  }\n\n  private async handleInvoicePaymentSucceeded(invoice: Stripe.Invoice): Promise<void> {\n    const subscriptionId = invoice.subscription as string;\n    \n    if (!subscriptionId) {\n      logger.warn('Invoice payment succeeded but no subscription ID found', { invoiceId: invoice.id });\n      return;\n    }\n\n    const subscription = await this.prisma.subscription.findFirst({\n      where: { stripeSubscriptionId: subscriptionId },\n    });\n\n    if (!subscription) {\n      logger.warn(`Subscription not found for invoice: ${invoice.id}`);\n      return;\n    }\n\n    // Create or update invoice record\n    await this.prisma.invoice.upsert({\n      where: { stripeInvoiceId: invoice.id },\n      update: {\n        status: InvoiceStatus.PAID,\n        paidAt: new Date(invoice.status_transitions.paid_at! * 1000),\n        hostedInvoiceUrl: invoice.hosted_invoice_url,\n        invoicePdf: invoice.invoice_pdf,\n      },\n      create: {\n        subscriptionId: subscription.id,\n        stripeInvoiceId: invoice.id,\n        number: invoice.number || `INV-${invoice.id}`,\n        status: InvoiceStatus.PAID,\n        total: invoice.total,\n        currency: invoice.currency.toUpperCase(),\n        paidAt: new Date(invoice.status_transitions.paid_at! * 1000),\n        hostedInvoiceUrl: invoice.hosted_invoice_url,\n        invoicePdf: invoice.invoice_pdf,\n      },\n    });\n\n    // Update subscription status if it was past due\n    if (subscription.status === SubscriptionStatus.PAST_DUE) {\n      await this.prisma.subscription.update({\n        where: { id: subscription.id },\n        data: { status: SubscriptionStatus.ACTIVE },\n      });\n    }\n\n    logger.info(`Invoice payment succeeded: ${invoice.id}`, {\n      subscriptionId: subscription.id,\n      amount: invoice.total,\n    });\n  }\n\n  private async handleInvoicePaymentFailed(invoice: Stripe.Invoice): Promise<void> {\n    const subscriptionId = invoice.subscription as string;\n    \n    if (!subscriptionId) {\n      logger.warn('Invoice payment failed but no subscription ID found', { invoiceId: invoice.id });\n      return;\n    }\n\n    const subscription = await this.prisma.subscription.findFirst({\n      where: { stripeSubscriptionId: subscriptionId },\n    });\n\n    if (!subscription) {\n      logger.warn(`Subscription not found for failed invoice: ${invoice.id}`);\n      return;\n    }\n\n    // Create or update invoice record\n    await this.prisma.invoice.upsert({\n      where: { stripeInvoiceId: invoice.id },\n      update: {\n        status: InvoiceStatus.FAILED,\n      },\n      create: {\n        subscriptionId: subscription.id,\n        stripeInvoiceId: invoice.id,\n        number: invoice.number || `INV-${invoice.id}`,\n        status: InvoiceStatus.FAILED,\n        total: invoice.total,\n        currency: invoice.currency.toUpperCase(),\n        hostedInvoiceUrl: invoice.hosted_invoice_url,\n        invoicePdf: invoice.invoice_pdf,\n      },\n    });\n\n    // Update subscription status to past due\n    await this.prisma.subscription.update({\n      where: { id: subscription.id },\n      data: { status: SubscriptionStatus.PAST_DUE },\n    });\n\n    logger.error(`Invoice payment failed: ${invoice.id}`, {\n      subscriptionId: subscription.id,\n      amount: invoice.total,\n    });\n\n    // TODO: Send dunning emails or notifications\n  }\n\n  private async handleCustomerCreated(customer: Stripe.Customer): Promise<void> {\n    logger.info(`Customer created: ${customer.id}`, {\n      email: customer.email,\n      name: customer.name,\n    });\n    // Customer creation is handled in the billing service when creating checkout\n  }\n\n  private async handleCustomerUpdated(customer: Stripe.Customer): Promise<void> {\n    const organization = await this.prisma.organization.findFirst({\n      where: { stripeCustomerId: customer.id },\n    });\n\n    if (organization) {\n      logger.info(`Customer updated: ${customer.id}`, {\n        organizationId: organization.id,\n        email: customer.email,\n      });\n    }\n  }\n\n  private async handlePaymentMethodAttached(paymentMethod: Stripe.PaymentMethod): Promise<void> {\n    const customerId = paymentMethod.customer as string;\n    \n    const organization = await this.prisma.organization.findFirst({\n      where: { stripeCustomerId: customerId },\n    });\n\n    if (!organization) {\n      logger.warn(`Organization not found for payment method: ${paymentMethod.id}`);\n      return;\n    }\n\n    // Create or update payment method record\n    await this.prisma.paymentMethod.upsert({\n      where: { stripePaymentMethodId: paymentMethod.id },\n      update: {\n        type: paymentMethod.type,\n        last4: paymentMethod.card?.last4 || null,\n        brand: paymentMethod.card?.brand || null,\n        expiryMonth: paymentMethod.card?.exp_month || null,\n        expiryYear: paymentMethod.card?.exp_year || null,\n      },\n      create: {\n        organizationId: organization.id,\n        stripePaymentMethodId: paymentMethod.id,\n        type: paymentMethod.type,\n        last4: paymentMethod.card?.last4 || null,\n        brand: paymentMethod.card?.brand || null,\n        expiryMonth: paymentMethod.card?.exp_month || null,\n        expiryYear: paymentMethod.card?.exp_year || null,\n      },\n    });\n\n    logger.info(`Payment method attached: ${paymentMethod.id}`, {\n      organizationId: organization.id,\n      type: paymentMethod.type,\n    });\n  }\n\n  private mapStripeStatus(stripeStatus: Stripe.Subscription.Status): SubscriptionStatus {\n    const statusMap: Record<Stripe.Subscription.Status, SubscriptionStatus> = {\n      active: SubscriptionStatus.ACTIVE,\n      canceled: SubscriptionStatus.CANCELED,\n      incomplete: SubscriptionStatus.INCOMPLETE,\n      incomplete_expired: SubscriptionStatus.INCOMPLETE_EXPIRED,\n      past_due: SubscriptionStatus.PAST_DUE,\n      trialing: SubscriptionStatus.TRIALING,\n      unpaid: SubscriptionStatus.UNPAID,\n    };\n\n    return statusMap[stripeStatus] || SubscriptionStatus.INCOMPLETE;\n  }\n\n  private async logWebhookEvent(\n    event: Stripe.Event,\n    status: 'success' | 'failed',\n    errorMessage?: string\n  ): Promise<void> {\n    try {\n      await this.prisma.billingEvent.create({\n        data: {\n          eventType: event.type,\n          stripeEventId: event.id,\n          status,\n          data: event.data.object as any,\n          errorMessage,\n          processedAt: new Date(),\n        },\n      });\n    } catch (error) {\n      logger.error('Failed to log webhook event:', error);\n    }\n  }\n}"],
      version: 3
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "a36371f415286e03b15da9ad6b97a1d373bb30b8"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_vlnq7ry4i = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_vlnq7ry4i();
import { PrismaService } from '../database/prisma.service';
import { StripeService } from './stripe.service';
import { logger } from '../utils/logger';
import { SubscriptionStatus, InvoiceStatus } from '@prisma/client';
export class StripeWebhookService {
  prisma;
  stripeService;
  constructor() {
    /* istanbul ignore next */
    cov_vlnq7ry4i().f[0]++;
    cov_vlnq7ry4i().s[0]++;
    this.prisma = new PrismaService();
    /* istanbul ignore next */
    cov_vlnq7ry4i().s[1]++;
    this.stripeService = new StripeService();
  }
  async handleWebhook(event) {
    /* istanbul ignore next */
    cov_vlnq7ry4i().f[1]++;
    cov_vlnq7ry4i().s[2]++;
    logger.info(`Processing Stripe webhook: ${event.type}`, {
      eventId: event.id
    });
    /* istanbul ignore next */
    cov_vlnq7ry4i().s[3]++;
    try {
      /* istanbul ignore next */
      cov_vlnq7ry4i().s[4]++;
      switch (event.type) {
        case 'customer.subscription.created':
          /* istanbul ignore next */
          cov_vlnq7ry4i().b[0][0]++;
          cov_vlnq7ry4i().s[5]++;
          await this.handleSubscriptionCreated(event.data.object);
          /* istanbul ignore next */
          cov_vlnq7ry4i().s[6]++;
          break;
        case 'customer.subscription.updated':
          /* istanbul ignore next */
          cov_vlnq7ry4i().b[0][1]++;
          cov_vlnq7ry4i().s[7]++;
          await this.handleSubscriptionUpdated(event.data.object);
          /* istanbul ignore next */
          cov_vlnq7ry4i().s[8]++;
          break;
        case 'customer.subscription.deleted':
          /* istanbul ignore next */
          cov_vlnq7ry4i().b[0][2]++;
          cov_vlnq7ry4i().s[9]++;
          await this.handleSubscriptionDeleted(event.data.object);
          /* istanbul ignore next */
          cov_vlnq7ry4i().s[10]++;
          break;
        case 'invoice.payment_succeeded':
          /* istanbul ignore next */
          cov_vlnq7ry4i().b[0][3]++;
          cov_vlnq7ry4i().s[11]++;
          await this.handleInvoicePaymentSucceeded(event.data.object);
          /* istanbul ignore next */
          cov_vlnq7ry4i().s[12]++;
          break;
        case 'invoice.payment_failed':
          /* istanbul ignore next */
          cov_vlnq7ry4i().b[0][4]++;
          cov_vlnq7ry4i().s[13]++;
          await this.handleInvoicePaymentFailed(event.data.object);
          /* istanbul ignore next */
          cov_vlnq7ry4i().s[14]++;
          break;
        case 'customer.created':
          /* istanbul ignore next */
          cov_vlnq7ry4i().b[0][5]++;
          cov_vlnq7ry4i().s[15]++;
          await this.handleCustomerCreated(event.data.object);
          /* istanbul ignore next */
          cov_vlnq7ry4i().s[16]++;
          break;
        case 'customer.updated':
          /* istanbul ignore next */
          cov_vlnq7ry4i().b[0][6]++;
          cov_vlnq7ry4i().s[17]++;
          await this.handleCustomerUpdated(event.data.object);
          /* istanbul ignore next */
          cov_vlnq7ry4i().s[18]++;
          break;
        case 'payment_method.attached':
          /* istanbul ignore next */
          cov_vlnq7ry4i().b[0][7]++;
          cov_vlnq7ry4i().s[19]++;
          await this.handlePaymentMethodAttached(event.data.object);
          /* istanbul ignore next */
          cov_vlnq7ry4i().s[20]++;
          break;
        default:
          /* istanbul ignore next */
          cov_vlnq7ry4i().b[0][8]++;
          cov_vlnq7ry4i().s[21]++;
          logger.warn(`Unhandled webhook event type: ${event.type}`);
      }
      // Log successful webhook processing
      /* istanbul ignore next */
      cov_vlnq7ry4i().s[22]++;
      await this.logWebhookEvent(event, 'success');
      /* istanbul ignore next */
      cov_vlnq7ry4i().s[23]++;
      logger.info(`Successfully processed webhook: ${event.type}`, {
        eventId: event.id
      });
    } catch (error) {
      /* istanbul ignore next */
      cov_vlnq7ry4i().s[24]++;
      logger.error(`Error processing webhook ${event.type}:`, error, {
        eventId: event.id
      });
      /* istanbul ignore next */
      cov_vlnq7ry4i().s[25]++;
      await this.logWebhookEvent(event, 'failed', error.message);
      /* istanbul ignore next */
      cov_vlnq7ry4i().s[26]++;
      throw error;
    }
  }
  async handleSubscriptionCreated(subscription) {
    /* istanbul ignore next */
    cov_vlnq7ry4i().f[2]++;
    const customerId =
    /* istanbul ignore next */
    (cov_vlnq7ry4i().s[27]++, subscription.customer);
    const priceId =
    /* istanbul ignore next */
    (cov_vlnq7ry4i().s[28]++, subscription.items.data[0]?.price.id);
    // Find organization by Stripe customer ID
    const organization =
    /* istanbul ignore next */
    (cov_vlnq7ry4i().s[29]++, await this.prisma.organization.findFirst({
      where: {
        stripeCustomerId: customerId
      }
    }));
    /* istanbul ignore next */
    cov_vlnq7ry4i().s[30]++;
    if (!organization) {
      /* istanbul ignore next */
      cov_vlnq7ry4i().b[1][0]++;
      cov_vlnq7ry4i().s[31]++;
      throw new Error(`Organization not found for customer ID: ${customerId}`);
    } else
    /* istanbul ignore next */
    {
      cov_vlnq7ry4i().b[1][1]++;
    }
    // Find plan by Stripe price ID
    const plan =
    /* istanbul ignore next */
    (cov_vlnq7ry4i().s[32]++, await this.prisma.plan.findFirst({
      where: {
        stripePriceId: priceId
      }
    }));
    /* istanbul ignore next */
    cov_vlnq7ry4i().s[33]++;
    if (!plan) {
      /* istanbul ignore next */
      cov_vlnq7ry4i().b[2][0]++;
      cov_vlnq7ry4i().s[34]++;
      throw new Error(`Plan not found for price ID: ${priceId}`);
    } else
    /* istanbul ignore next */
    {
      cov_vlnq7ry4i().b[2][1]++;
    }
    // Create subscription record
    cov_vlnq7ry4i().s[35]++;
    await this.prisma.subscription.create({
      data: {
        organizationId: organization.id,
        planId: plan.id,
        stripeSubscriptionId: subscription.id,
        status: this.mapStripeStatus(subscription.status),
        currentPeriodStart: new Date(subscription.current_period_start * 1000),
        currentPeriodEnd: new Date(subscription.current_period_end * 1000),
        trialStart: subscription.trial_start ?
        /* istanbul ignore next */
        (cov_vlnq7ry4i().b[3][0]++, new Date(subscription.trial_start * 1000)) :
        /* istanbul ignore next */
        (cov_vlnq7ry4i().b[3][1]++, null),
        trialEnd: subscription.trial_end ?
        /* istanbul ignore next */
        (cov_vlnq7ry4i().b[4][0]++, new Date(subscription.trial_end * 1000)) :
        /* istanbul ignore next */
        (cov_vlnq7ry4i().b[4][1]++, null),
        cancelAtPeriodEnd: subscription.cancel_at_period_end,
        canceledAt: subscription.canceled_at ?
        /* istanbul ignore next */
        (cov_vlnq7ry4i().b[5][0]++, new Date(subscription.canceled_at * 1000)) :
        /* istanbul ignore next */
        (cov_vlnq7ry4i().b[5][1]++, null)
      }
    });
    // Update organization plan type
    /* istanbul ignore next */
    cov_vlnq7ry4i().s[36]++;
    await this.prisma.organization.update({
      where: {
        id: organization.id
      },
      data: {
        planType: plan.type
      }
    });
    /* istanbul ignore next */
    cov_vlnq7ry4i().s[37]++;
    logger.info(`Subscription created for organization ${organization.id}`, {
      subscriptionId: subscription.id,
      planType: plan.type
    });
  }
  async handleSubscriptionUpdated(subscription) {
    /* istanbul ignore next */
    cov_vlnq7ry4i().f[3]++;
    const existingSubscription =
    /* istanbul ignore next */
    (cov_vlnq7ry4i().s[38]++, await this.prisma.subscription.findFirst({
      where: {
        stripeSubscriptionId: subscription.id
      },
      include: {
        plan: true,
        organization: true
      }
    }));
    /* istanbul ignore next */
    cov_vlnq7ry4i().s[39]++;
    if (!existingSubscription) {
      /* istanbul ignore next */
      cov_vlnq7ry4i().b[6][0]++;
      cov_vlnq7ry4i().s[40]++;
      logger.warn(`Subscription not found for update: ${subscription.id}`);
      /* istanbul ignore next */
      cov_vlnq7ry4i().s[41]++;
      return;
    } else
    /* istanbul ignore next */
    {
      cov_vlnq7ry4i().b[6][1]++;
    }
    const priceId =
    /* istanbul ignore next */
    (cov_vlnq7ry4i().s[42]++, subscription.items.data[0]?.price.id);
    let planId =
    /* istanbul ignore next */
    (cov_vlnq7ry4i().s[43]++, existingSubscription.planId);
    // Check if plan changed
    /* istanbul ignore next */
    cov_vlnq7ry4i().s[44]++;
    if (
    /* istanbul ignore next */
    (cov_vlnq7ry4i().b[8][0]++, priceId) &&
    /* istanbul ignore next */
    (cov_vlnq7ry4i().b[8][1]++, priceId !== existingSubscription.plan.stripePriceId)) {
      /* istanbul ignore next */
      cov_vlnq7ry4i().b[7][0]++;
      const newPlan =
      /* istanbul ignore next */
      (cov_vlnq7ry4i().s[45]++, await this.prisma.plan.findFirst({
        where: {
          stripePriceId: priceId
        }
      }));
      /* istanbul ignore next */
      cov_vlnq7ry4i().s[46]++;
      if (newPlan) {
        /* istanbul ignore next */
        cov_vlnq7ry4i().b[9][0]++;
        cov_vlnq7ry4i().s[47]++;
        planId = newPlan.id;
        // Update organization plan type
        /* istanbul ignore next */
        cov_vlnq7ry4i().s[48]++;
        await this.prisma.organization.update({
          where: {
            id: existingSubscription.organizationId
          },
          data: {
            planType: newPlan.type
          }
        });
      } else
      /* istanbul ignore next */
      {
        cov_vlnq7ry4i().b[9][1]++;
      }
    } else
    /* istanbul ignore next */
    {
      cov_vlnq7ry4i().b[7][1]++;
    }
    // Update subscription
    cov_vlnq7ry4i().s[49]++;
    await this.prisma.subscription.update({
      where: {
        id: existingSubscription.id
      },
      data: {
        planId,
        status: this.mapStripeStatus(subscription.status),
        currentPeriodStart: new Date(subscription.current_period_start * 1000),
        currentPeriodEnd: new Date(subscription.current_period_end * 1000),
        trialStart: subscription.trial_start ?
        /* istanbul ignore next */
        (cov_vlnq7ry4i().b[10][0]++, new Date(subscription.trial_start * 1000)) :
        /* istanbul ignore next */
        (cov_vlnq7ry4i().b[10][1]++, null),
        trialEnd: subscription.trial_end ?
        /* istanbul ignore next */
        (cov_vlnq7ry4i().b[11][0]++, new Date(subscription.trial_end * 1000)) :
        /* istanbul ignore next */
        (cov_vlnq7ry4i().b[11][1]++, null),
        cancelAtPeriodEnd: subscription.cancel_at_period_end,
        canceledAt: subscription.canceled_at ?
        /* istanbul ignore next */
        (cov_vlnq7ry4i().b[12][0]++, new Date(subscription.canceled_at * 1000)) :
        /* istanbul ignore next */
        (cov_vlnq7ry4i().b[12][1]++, null)
      }
    });
    /* istanbul ignore next */
    cov_vlnq7ry4i().s[50]++;
    logger.info(`Subscription updated: ${subscription.id}`, {
      organizationId: existingSubscription.organizationId,
      status: subscription.status
    });
  }
  async handleSubscriptionDeleted(subscription) {
    /* istanbul ignore next */
    cov_vlnq7ry4i().f[4]++;
    const existingSubscription =
    /* istanbul ignore next */
    (cov_vlnq7ry4i().s[51]++, await this.prisma.subscription.findFirst({
      where: {
        stripeSubscriptionId: subscription.id
      },
      include: {
        organization: true
      }
    }));
    /* istanbul ignore next */
    cov_vlnq7ry4i().s[52]++;
    if (!existingSubscription) {
      /* istanbul ignore next */
      cov_vlnq7ry4i().b[13][0]++;
      cov_vlnq7ry4i().s[53]++;
      logger.warn(`Subscription not found for deletion: ${subscription.id}`);
      /* istanbul ignore next */
      cov_vlnq7ry4i().s[54]++;
      return;
    } else
    /* istanbul ignore next */
    {
      cov_vlnq7ry4i().b[13][1]++;
    }
    // Soft delete: update status instead of deleting
    cov_vlnq7ry4i().s[55]++;
    await this.prisma.subscription.update({
      where: {
        id: existingSubscription.id
      },
      data: {
        status: SubscriptionStatus.CANCELED,
        canceledAt: new Date(),
        deletedAt: new Date() // Soft delete
      }
    });
    // Downgrade organization to free plan
    const freePlan =
    /* istanbul ignore next */
    (cov_vlnq7ry4i().s[56]++, await this.prisma.plan.findFirst({
      where: {
        type: 'FREE'
      }
    }));
    /* istanbul ignore next */
    cov_vlnq7ry4i().s[57]++;
    if (freePlan) {
      /* istanbul ignore next */
      cov_vlnq7ry4i().b[14][0]++;
      cov_vlnq7ry4i().s[58]++;
      await this.prisma.organization.update({
        where: {
          id: existingSubscription.organizationId
        },
        data: {
          planType: freePlan.type
        }
      });
    } else
    /* istanbul ignore next */
    {
      cov_vlnq7ry4i().b[14][1]++;
    }
    cov_vlnq7ry4i().s[59]++;
    logger.info(`Subscription deleted (soft): ${subscription.id}`, {
      organizationId: existingSubscription.organizationId
    });
  }
  async handleInvoicePaymentSucceeded(invoice) {
    /* istanbul ignore next */
    cov_vlnq7ry4i().f[5]++;
    const subscriptionId =
    /* istanbul ignore next */
    (cov_vlnq7ry4i().s[60]++, invoice.subscription);
    /* istanbul ignore next */
    cov_vlnq7ry4i().s[61]++;
    if (!subscriptionId) {
      /* istanbul ignore next */
      cov_vlnq7ry4i().b[15][0]++;
      cov_vlnq7ry4i().s[62]++;
      logger.warn('Invoice payment succeeded but no subscription ID found', {
        invoiceId: invoice.id
      });
      /* istanbul ignore next */
      cov_vlnq7ry4i().s[63]++;
      return;
    } else
    /* istanbul ignore next */
    {
      cov_vlnq7ry4i().b[15][1]++;
    }
    const subscription =
    /* istanbul ignore next */
    (cov_vlnq7ry4i().s[64]++, await this.prisma.subscription.findFirst({
      where: {
        stripeSubscriptionId: subscriptionId
      }
    }));
    /* istanbul ignore next */
    cov_vlnq7ry4i().s[65]++;
    if (!subscription) {
      /* istanbul ignore next */
      cov_vlnq7ry4i().b[16][0]++;
      cov_vlnq7ry4i().s[66]++;
      logger.warn(`Subscription not found for invoice: ${invoice.id}`);
      /* istanbul ignore next */
      cov_vlnq7ry4i().s[67]++;
      return;
    } else
    /* istanbul ignore next */
    {
      cov_vlnq7ry4i().b[16][1]++;
    }
    // Create or update invoice record
    cov_vlnq7ry4i().s[68]++;
    await this.prisma.invoice.upsert({
      where: {
        stripeInvoiceId: invoice.id
      },
      update: {
        status: InvoiceStatus.PAID,
        paidAt: new Date(invoice.status_transitions.paid_at * 1000),
        hostedInvoiceUrl: invoice.hosted_invoice_url,
        invoicePdf: invoice.invoice_pdf
      },
      create: {
        subscriptionId: subscription.id,
        stripeInvoiceId: invoice.id,
        number:
        /* istanbul ignore next */
        (cov_vlnq7ry4i().b[17][0]++, invoice.number) ||
        /* istanbul ignore next */
        (cov_vlnq7ry4i().b[17][1]++, `INV-${invoice.id}`),
        status: InvoiceStatus.PAID,
        total: invoice.total,
        currency: invoice.currency.toUpperCase(),
        paidAt: new Date(invoice.status_transitions.paid_at * 1000),
        hostedInvoiceUrl: invoice.hosted_invoice_url,
        invoicePdf: invoice.invoice_pdf
      }
    });
    // Update subscription status if it was past due
    /* istanbul ignore next */
    cov_vlnq7ry4i().s[69]++;
    if (subscription.status === SubscriptionStatus.PAST_DUE) {
      /* istanbul ignore next */
      cov_vlnq7ry4i().b[18][0]++;
      cov_vlnq7ry4i().s[70]++;
      await this.prisma.subscription.update({
        where: {
          id: subscription.id
        },
        data: {
          status: SubscriptionStatus.ACTIVE
        }
      });
    } else
    /* istanbul ignore next */
    {
      cov_vlnq7ry4i().b[18][1]++;
    }
    cov_vlnq7ry4i().s[71]++;
    logger.info(`Invoice payment succeeded: ${invoice.id}`, {
      subscriptionId: subscription.id,
      amount: invoice.total
    });
  }
  async handleInvoicePaymentFailed(invoice) {
    /* istanbul ignore next */
    cov_vlnq7ry4i().f[6]++;
    const subscriptionId =
    /* istanbul ignore next */
    (cov_vlnq7ry4i().s[72]++, invoice.subscription);
    /* istanbul ignore next */
    cov_vlnq7ry4i().s[73]++;
    if (!subscriptionId) {
      /* istanbul ignore next */
      cov_vlnq7ry4i().b[19][0]++;
      cov_vlnq7ry4i().s[74]++;
      logger.warn('Invoice payment failed but no subscription ID found', {
        invoiceId: invoice.id
      });
      /* istanbul ignore next */
      cov_vlnq7ry4i().s[75]++;
      return;
    } else
    /* istanbul ignore next */
    {
      cov_vlnq7ry4i().b[19][1]++;
    }
    const subscription =
    /* istanbul ignore next */
    (cov_vlnq7ry4i().s[76]++, await this.prisma.subscription.findFirst({
      where: {
        stripeSubscriptionId: subscriptionId
      }
    }));
    /* istanbul ignore next */
    cov_vlnq7ry4i().s[77]++;
    if (!subscription) {
      /* istanbul ignore next */
      cov_vlnq7ry4i().b[20][0]++;
      cov_vlnq7ry4i().s[78]++;
      logger.warn(`Subscription not found for failed invoice: ${invoice.id}`);
      /* istanbul ignore next */
      cov_vlnq7ry4i().s[79]++;
      return;
    } else
    /* istanbul ignore next */
    {
      cov_vlnq7ry4i().b[20][1]++;
    }
    // Create or update invoice record
    cov_vlnq7ry4i().s[80]++;
    await this.prisma.invoice.upsert({
      where: {
        stripeInvoiceId: invoice.id
      },
      update: {
        status: InvoiceStatus.FAILED
      },
      create: {
        subscriptionId: subscription.id,
        stripeInvoiceId: invoice.id,
        number:
        /* istanbul ignore next */
        (cov_vlnq7ry4i().b[21][0]++, invoice.number) ||
        /* istanbul ignore next */
        (cov_vlnq7ry4i().b[21][1]++, `INV-${invoice.id}`),
        status: InvoiceStatus.FAILED,
        total: invoice.total,
        currency: invoice.currency.toUpperCase(),
        hostedInvoiceUrl: invoice.hosted_invoice_url,
        invoicePdf: invoice.invoice_pdf
      }
    });
    // Update subscription status to past due
    /* istanbul ignore next */
    cov_vlnq7ry4i().s[81]++;
    await this.prisma.subscription.update({
      where: {
        id: subscription.id
      },
      data: {
        status: SubscriptionStatus.PAST_DUE
      }
    });
    /* istanbul ignore next */
    cov_vlnq7ry4i().s[82]++;
    logger.error(`Invoice payment failed: ${invoice.id}`, {
      subscriptionId: subscription.id,
      amount: invoice.total
    });
    // TODO: Send dunning emails or notifications
  }
  async handleCustomerCreated(customer) {
    /* istanbul ignore next */
    cov_vlnq7ry4i().f[7]++;
    cov_vlnq7ry4i().s[83]++;
    logger.info(`Customer created: ${customer.id}`, {
      email: customer.email,
      name: customer.name
    });
    // Customer creation is handled in the billing service when creating checkout
  }
  async handleCustomerUpdated(customer) {
    /* istanbul ignore next */
    cov_vlnq7ry4i().f[8]++;
    const organization =
    /* istanbul ignore next */
    (cov_vlnq7ry4i().s[84]++, await this.prisma.organization.findFirst({
      where: {
        stripeCustomerId: customer.id
      }
    }));
    /* istanbul ignore next */
    cov_vlnq7ry4i().s[85]++;
    if (organization) {
      /* istanbul ignore next */
      cov_vlnq7ry4i().b[22][0]++;
      cov_vlnq7ry4i().s[86]++;
      logger.info(`Customer updated: ${customer.id}`, {
        organizationId: organization.id,
        email: customer.email
      });
    } else
    /* istanbul ignore next */
    {
      cov_vlnq7ry4i().b[22][1]++;
    }
  }
  async handlePaymentMethodAttached(paymentMethod) {
    /* istanbul ignore next */
    cov_vlnq7ry4i().f[9]++;
    const customerId =
    /* istanbul ignore next */
    (cov_vlnq7ry4i().s[87]++, paymentMethod.customer);
    const organization =
    /* istanbul ignore next */
    (cov_vlnq7ry4i().s[88]++, await this.prisma.organization.findFirst({
      where: {
        stripeCustomerId: customerId
      }
    }));
    /* istanbul ignore next */
    cov_vlnq7ry4i().s[89]++;
    if (!organization) {
      /* istanbul ignore next */
      cov_vlnq7ry4i().b[23][0]++;
      cov_vlnq7ry4i().s[90]++;
      logger.warn(`Organization not found for payment method: ${paymentMethod.id}`);
      /* istanbul ignore next */
      cov_vlnq7ry4i().s[91]++;
      return;
    } else
    /* istanbul ignore next */
    {
      cov_vlnq7ry4i().b[23][1]++;
    }
    // Create or update payment method record
    cov_vlnq7ry4i().s[92]++;
    await this.prisma.paymentMethod.upsert({
      where: {
        stripePaymentMethodId: paymentMethod.id
      },
      update: {
        type: paymentMethod.type,
        last4:
        /* istanbul ignore next */
        (cov_vlnq7ry4i().b[24][0]++, paymentMethod.card?.last4) ||
        /* istanbul ignore next */
        (cov_vlnq7ry4i().b[24][1]++, null),
        brand:
        /* istanbul ignore next */
        (cov_vlnq7ry4i().b[25][0]++, paymentMethod.card?.brand) ||
        /* istanbul ignore next */
        (cov_vlnq7ry4i().b[25][1]++, null),
        expiryMonth:
        /* istanbul ignore next */
        (cov_vlnq7ry4i().b[26][0]++, paymentMethod.card?.exp_month) ||
        /* istanbul ignore next */
        (cov_vlnq7ry4i().b[26][1]++, null),
        expiryYear:
        /* istanbul ignore next */
        (cov_vlnq7ry4i().b[27][0]++, paymentMethod.card?.exp_year) ||
        /* istanbul ignore next */
        (cov_vlnq7ry4i().b[27][1]++, null)
      },
      create: {
        organizationId: organization.id,
        stripePaymentMethodId: paymentMethod.id,
        type: paymentMethod.type,
        last4:
        /* istanbul ignore next */
        (cov_vlnq7ry4i().b[28][0]++, paymentMethod.card?.last4) ||
        /* istanbul ignore next */
        (cov_vlnq7ry4i().b[28][1]++, null),
        brand:
        /* istanbul ignore next */
        (cov_vlnq7ry4i().b[29][0]++, paymentMethod.card?.brand) ||
        /* istanbul ignore next */
        (cov_vlnq7ry4i().b[29][1]++, null),
        expiryMonth:
        /* istanbul ignore next */
        (cov_vlnq7ry4i().b[30][0]++, paymentMethod.card?.exp_month) ||
        /* istanbul ignore next */
        (cov_vlnq7ry4i().b[30][1]++, null),
        expiryYear:
        /* istanbul ignore next */
        (cov_vlnq7ry4i().b[31][0]++, paymentMethod.card?.exp_year) ||
        /* istanbul ignore next */
        (cov_vlnq7ry4i().b[31][1]++, null)
      }
    });
    /* istanbul ignore next */
    cov_vlnq7ry4i().s[93]++;
    logger.info(`Payment method attached: ${paymentMethod.id}`, {
      organizationId: organization.id,
      type: paymentMethod.type
    });
  }
  mapStripeStatus(stripeStatus) {
    /* istanbul ignore next */
    cov_vlnq7ry4i().f[10]++;
    const statusMap =
    /* istanbul ignore next */
    (cov_vlnq7ry4i().s[94]++, {
      active: SubscriptionStatus.ACTIVE,
      canceled: SubscriptionStatus.CANCELED,
      incomplete: SubscriptionStatus.INCOMPLETE,
      incomplete_expired: SubscriptionStatus.INCOMPLETE_EXPIRED,
      past_due: SubscriptionStatus.PAST_DUE,
      trialing: SubscriptionStatus.TRIALING,
      unpaid: SubscriptionStatus.UNPAID
    });
    /* istanbul ignore next */
    cov_vlnq7ry4i().s[95]++;
    return /* istanbul ignore next */(cov_vlnq7ry4i().b[32][0]++, statusMap[stripeStatus]) ||
    /* istanbul ignore next */
    (cov_vlnq7ry4i().b[32][1]++, SubscriptionStatus.INCOMPLETE);
  }
  async logWebhookEvent(event, status, errorMessage) {
    /* istanbul ignore next */
    cov_vlnq7ry4i().f[11]++;
    cov_vlnq7ry4i().s[96]++;
    try {
      /* istanbul ignore next */
      cov_vlnq7ry4i().s[97]++;
      await this.prisma.billingEvent.create({
        data: {
          eventType: event.type,
          stripeEventId: event.id,
          status,
          data: event.data.object,
          errorMessage,
          processedAt: new Date()
        }
      });
    } catch (error) {
      /* istanbul ignore next */
      cov_vlnq7ry4i().s[98]++;
      logger.error('Failed to log webhook event:', error);
    }
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQcmlzbWFTZXJ2aWNlIiwiU3RyaXBlU2VydmljZSIsImxvZ2dlciIsIlN1YnNjcmlwdGlvblN0YXR1cyIsIkludm9pY2VTdGF0dXMiLCJTdHJpcGVXZWJob29rU2VydmljZSIsInByaXNtYSIsInN0cmlwZVNlcnZpY2UiLCJjb25zdHJ1Y3RvciIsImNvdl92bG5xN3J5NGkiLCJmIiwicyIsImhhbmRsZVdlYmhvb2siLCJldmVudCIsImluZm8iLCJ0eXBlIiwiZXZlbnRJZCIsImlkIiwiYiIsImhhbmRsZVN1YnNjcmlwdGlvbkNyZWF0ZWQiLCJkYXRhIiwib2JqZWN0IiwiaGFuZGxlU3Vic2NyaXB0aW9uVXBkYXRlZCIsImhhbmRsZVN1YnNjcmlwdGlvbkRlbGV0ZWQiLCJoYW5kbGVJbnZvaWNlUGF5bWVudFN1Y2NlZWRlZCIsImhhbmRsZUludm9pY2VQYXltZW50RmFpbGVkIiwiaGFuZGxlQ3VzdG9tZXJDcmVhdGVkIiwiaGFuZGxlQ3VzdG9tZXJVcGRhdGVkIiwiaGFuZGxlUGF5bWVudE1ldGhvZEF0dGFjaGVkIiwid2FybiIsImxvZ1dlYmhvb2tFdmVudCIsImVycm9yIiwibWVzc2FnZSIsInN1YnNjcmlwdGlvbiIsImN1c3RvbWVySWQiLCJjdXN0b21lciIsInByaWNlSWQiLCJpdGVtcyIsInByaWNlIiwib3JnYW5pemF0aW9uIiwiZmluZEZpcnN0Iiwid2hlcmUiLCJzdHJpcGVDdXN0b21lcklkIiwiRXJyb3IiLCJwbGFuIiwic3RyaXBlUHJpY2VJZCIsImNyZWF0ZSIsIm9yZ2FuaXphdGlvbklkIiwicGxhbklkIiwic3RyaXBlU3Vic2NyaXB0aW9uSWQiLCJzdGF0dXMiLCJtYXBTdHJpcGVTdGF0dXMiLCJjdXJyZW50UGVyaW9kU3RhcnQiLCJEYXRlIiwiY3VycmVudF9wZXJpb2Rfc3RhcnQiLCJjdXJyZW50UGVyaW9kRW5kIiwiY3VycmVudF9wZXJpb2RfZW5kIiwidHJpYWxTdGFydCIsInRyaWFsX3N0YXJ0IiwidHJpYWxFbmQiLCJ0cmlhbF9lbmQiLCJjYW5jZWxBdFBlcmlvZEVuZCIsImNhbmNlbF9hdF9wZXJpb2RfZW5kIiwiY2FuY2VsZWRBdCIsImNhbmNlbGVkX2F0IiwidXBkYXRlIiwicGxhblR5cGUiLCJzdWJzY3JpcHRpb25JZCIsImV4aXN0aW5nU3Vic2NyaXB0aW9uIiwiaW5jbHVkZSIsIm5ld1BsYW4iLCJDQU5DRUxFRCIsImRlbGV0ZWRBdCIsImZyZWVQbGFuIiwiaW52b2ljZSIsImludm9pY2VJZCIsInVwc2VydCIsInN0cmlwZUludm9pY2VJZCIsIlBBSUQiLCJwYWlkQXQiLCJzdGF0dXNfdHJhbnNpdGlvbnMiLCJwYWlkX2F0IiwiaG9zdGVkSW52b2ljZVVybCIsImhvc3RlZF9pbnZvaWNlX3VybCIsImludm9pY2VQZGYiLCJpbnZvaWNlX3BkZiIsIm51bWJlciIsInRvdGFsIiwiY3VycmVuY3kiLCJ0b1VwcGVyQ2FzZSIsIlBBU1RfRFVFIiwiQUNUSVZFIiwiYW1vdW50IiwiRkFJTEVEIiwiZW1haWwiLCJuYW1lIiwicGF5bWVudE1ldGhvZCIsInN0cmlwZVBheW1lbnRNZXRob2RJZCIsImxhc3Q0IiwiY2FyZCIsImJyYW5kIiwiZXhwaXJ5TW9udGgiLCJleHBfbW9udGgiLCJleHBpcnlZZWFyIiwiZXhwX3llYXIiLCJzdHJpcGVTdGF0dXMiLCJzdGF0dXNNYXAiLCJhY3RpdmUiLCJjYW5jZWxlZCIsImluY29tcGxldGUiLCJJTkNPTVBMRVRFIiwiaW5jb21wbGV0ZV9leHBpcmVkIiwiSU5DT01QTEVURV9FWFBJUkVEIiwicGFzdF9kdWUiLCJ0cmlhbGluZyIsIlRSSUFMSU5HIiwidW5wYWlkIiwiVU5QQUlEIiwiZXJyb3JNZXNzYWdlIiwiYmlsbGluZ0V2ZW50IiwiZXZlbnRUeXBlIiwic3RyaXBlRXZlbnRJZCIsInByb2Nlc3NlZEF0Il0sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxFbnpvIE1hcmNlbG9cXERlc2t0b3BcXFByb2pldG9zIEVtcHJlc2FcXFNhYXMgVXRtaWZ5XFx1dG1pZnktY2xvbmVcXGFwcHNcXGFwaVxcc3JjXFxzZXJ2aWNlc1xcc3RyaXBlLXdlYmhvb2suc2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgU3RyaXBlIGZyb20gJ3N0cmlwZSc7XG5pbXBvcnQgeyBQcmlzbWFTZXJ2aWNlIH0gZnJvbSAnLi4vZGF0YWJhc2UvcHJpc21hLnNlcnZpY2UnO1xuaW1wb3J0IHsgU3RyaXBlU2VydmljZSB9IGZyb20gJy4vc3RyaXBlLnNlcnZpY2UnO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi4vdXRpbHMvbG9nZ2VyJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvblN0YXR1cywgSW52b2ljZVN0YXR1cyB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcblxuZXhwb3J0IGNsYXNzIFN0cmlwZVdlYmhvb2tTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBwcmlzbWE6IFByaXNtYVNlcnZpY2U7XG4gIHByaXZhdGUgc3RyaXBlU2VydmljZTogU3RyaXBlU2VydmljZTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnByaXNtYSA9IG5ldyBQcmlzbWFTZXJ2aWNlKCk7XG4gICAgdGhpcy5zdHJpcGVTZXJ2aWNlID0gbmV3IFN0cmlwZVNlcnZpY2UoKTtcbiAgfVxuXG4gIGFzeW5jIGhhbmRsZVdlYmhvb2soZXZlbnQ6IFN0cmlwZS5FdmVudCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGxvZ2dlci5pbmZvKGBQcm9jZXNzaW5nIFN0cmlwZSB3ZWJob29rOiAke2V2ZW50LnR5cGV9YCwgeyBldmVudElkOiBldmVudC5pZCB9KTtcblxuICAgIHRyeSB7XG4gICAgICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcbiAgICAgICAgY2FzZSAnY3VzdG9tZXIuc3Vic2NyaXB0aW9uLmNyZWF0ZWQnOlxuICAgICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlU3Vic2NyaXB0aW9uQ3JlYXRlZChldmVudC5kYXRhLm9iamVjdCBhcyBTdHJpcGUuU3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdjdXN0b21lci5zdWJzY3JpcHRpb24udXBkYXRlZCc6XG4gICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVTdWJzY3JpcHRpb25VcGRhdGVkKGV2ZW50LmRhdGEub2JqZWN0IGFzIFN0cmlwZS5TdWJzY3JpcHRpb24pO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ2N1c3RvbWVyLnN1YnNjcmlwdGlvbi5kZWxldGVkJzpcbiAgICAgICAgICBhd2FpdCB0aGlzLmhhbmRsZVN1YnNjcmlwdGlvbkRlbGV0ZWQoZXZlbnQuZGF0YS5vYmplY3QgYXMgU3RyaXBlLlN1YnNjcmlwdGlvbik7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnaW52b2ljZS5wYXltZW50X3N1Y2NlZWRlZCc6XG4gICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVJbnZvaWNlUGF5bWVudFN1Y2NlZWRlZChldmVudC5kYXRhLm9iamVjdCBhcyBTdHJpcGUuSW52b2ljZSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnaW52b2ljZS5wYXltZW50X2ZhaWxlZCc6XG4gICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVJbnZvaWNlUGF5bWVudEZhaWxlZChldmVudC5kYXRhLm9iamVjdCBhcyBTdHJpcGUuSW52b2ljZSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnY3VzdG9tZXIuY3JlYXRlZCc6XG4gICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVDdXN0b21lckNyZWF0ZWQoZXZlbnQuZGF0YS5vYmplY3QgYXMgU3RyaXBlLkN1c3RvbWVyKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdjdXN0b21lci51cGRhdGVkJzpcbiAgICAgICAgICBhd2FpdCB0aGlzLmhhbmRsZUN1c3RvbWVyVXBkYXRlZChldmVudC5kYXRhLm9iamVjdCBhcyBTdHJpcGUuQ3VzdG9tZXIpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ3BheW1lbnRfbWV0aG9kLmF0dGFjaGVkJzpcbiAgICAgICAgICBhd2FpdCB0aGlzLmhhbmRsZVBheW1lbnRNZXRob2RBdHRhY2hlZChldmVudC5kYXRhLm9iamVjdCBhcyBTdHJpcGUuUGF5bWVudE1ldGhvZCk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBsb2dnZXIud2FybihgVW5oYW5kbGVkIHdlYmhvb2sgZXZlbnQgdHlwZTogJHtldmVudC50eXBlfWApO1xuICAgICAgfVxuXG4gICAgICAvLyBMb2cgc3VjY2Vzc2Z1bCB3ZWJob29rIHByb2Nlc3NpbmdcbiAgICAgIGF3YWl0IHRoaXMubG9nV2ViaG9va0V2ZW50KGV2ZW50LCAnc3VjY2VzcycpO1xuICAgICAgbG9nZ2VyLmluZm8oYFN1Y2Nlc3NmdWxseSBwcm9jZXNzZWQgd2ViaG9vazogJHtldmVudC50eXBlfWAsIHsgZXZlbnRJZDogZXZlbnQuaWQgfSk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKGBFcnJvciBwcm9jZXNzaW5nIHdlYmhvb2sgJHtldmVudC50eXBlfTpgLCBlcnJvciwgeyBldmVudElkOiBldmVudC5pZCB9KTtcbiAgICAgIGF3YWl0IHRoaXMubG9nV2ViaG9va0V2ZW50KGV2ZW50LCAnZmFpbGVkJywgZXJyb3IubWVzc2FnZSk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGhhbmRsZVN1YnNjcmlwdGlvbkNyZWF0ZWQoc3Vic2NyaXB0aW9uOiBTdHJpcGUuU3Vic2NyaXB0aW9uKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgY3VzdG9tZXJJZCA9IHN1YnNjcmlwdGlvbi5jdXN0b21lciBhcyBzdHJpbmc7XG4gICAgY29uc3QgcHJpY2VJZCA9IHN1YnNjcmlwdGlvbi5pdGVtcy5kYXRhWzBdPy5wcmljZS5pZDtcblxuICAgIC8vIEZpbmQgb3JnYW5pemF0aW9uIGJ5IFN0cmlwZSBjdXN0b21lciBJRFxuICAgIGNvbnN0IG9yZ2FuaXphdGlvbiA9IGF3YWl0IHRoaXMucHJpc21hLm9yZ2FuaXphdGlvbi5maW5kRmlyc3Qoe1xuICAgICAgd2hlcmU6IHsgc3RyaXBlQ3VzdG9tZXJJZDogY3VzdG9tZXJJZCB9LFxuICAgIH0pO1xuXG4gICAgaWYgKCFvcmdhbml6YXRpb24pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgT3JnYW5pemF0aW9uIG5vdCBmb3VuZCBmb3IgY3VzdG9tZXIgSUQ6ICR7Y3VzdG9tZXJJZH1gKTtcbiAgICB9XG5cbiAgICAvLyBGaW5kIHBsYW4gYnkgU3RyaXBlIHByaWNlIElEXG4gICAgY29uc3QgcGxhbiA9IGF3YWl0IHRoaXMucHJpc21hLnBsYW4uZmluZEZpcnN0KHtcbiAgICAgIHdoZXJlOiB7IHN0cmlwZVByaWNlSWQ6IHByaWNlSWQgfSxcbiAgICB9KTtcblxuICAgIGlmICghcGxhbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBQbGFuIG5vdCBmb3VuZCBmb3IgcHJpY2UgSUQ6ICR7cHJpY2VJZH1gKTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgc3Vic2NyaXB0aW9uIHJlY29yZFxuICAgIGF3YWl0IHRoaXMucHJpc21hLnN1YnNjcmlwdGlvbi5jcmVhdGUoe1xuICAgICAgZGF0YToge1xuICAgICAgICBvcmdhbml6YXRpb25JZDogb3JnYW5pemF0aW9uLmlkLFxuICAgICAgICBwbGFuSWQ6IHBsYW4uaWQsXG4gICAgICAgIHN0cmlwZVN1YnNjcmlwdGlvbklkOiBzdWJzY3JpcHRpb24uaWQsXG4gICAgICAgIHN0YXR1czogdGhpcy5tYXBTdHJpcGVTdGF0dXMoc3Vic2NyaXB0aW9uLnN0YXR1cyksXG4gICAgICAgIGN1cnJlbnRQZXJpb2RTdGFydDogbmV3IERhdGUoc3Vic2NyaXB0aW9uLmN1cnJlbnRfcGVyaW9kX3N0YXJ0ICogMTAwMCksXG4gICAgICAgIGN1cnJlbnRQZXJpb2RFbmQ6IG5ldyBEYXRlKHN1YnNjcmlwdGlvbi5jdXJyZW50X3BlcmlvZF9lbmQgKiAxMDAwKSxcbiAgICAgICAgdHJpYWxTdGFydDogc3Vic2NyaXB0aW9uLnRyaWFsX3N0YXJ0ID8gbmV3IERhdGUoc3Vic2NyaXB0aW9uLnRyaWFsX3N0YXJ0ICogMTAwMCkgOiBudWxsLFxuICAgICAgICB0cmlhbEVuZDogc3Vic2NyaXB0aW9uLnRyaWFsX2VuZCA/IG5ldyBEYXRlKHN1YnNjcmlwdGlvbi50cmlhbF9lbmQgKiAxMDAwKSA6IG51bGwsXG4gICAgICAgIGNhbmNlbEF0UGVyaW9kRW5kOiBzdWJzY3JpcHRpb24uY2FuY2VsX2F0X3BlcmlvZF9lbmQsXG4gICAgICAgIGNhbmNlbGVkQXQ6IHN1YnNjcmlwdGlvbi5jYW5jZWxlZF9hdCA/IG5ldyBEYXRlKHN1YnNjcmlwdGlvbi5jYW5jZWxlZF9hdCAqIDEwMDApIDogbnVsbCxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBVcGRhdGUgb3JnYW5pemF0aW9uIHBsYW4gdHlwZVxuICAgIGF3YWl0IHRoaXMucHJpc21hLm9yZ2FuaXphdGlvbi51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IG9yZ2FuaXphdGlvbi5pZCB9LFxuICAgICAgZGF0YTogeyBwbGFuVHlwZTogcGxhbi50eXBlIH0sXG4gICAgfSk7XG5cbiAgICBsb2dnZXIuaW5mbyhgU3Vic2NyaXB0aW9uIGNyZWF0ZWQgZm9yIG9yZ2FuaXphdGlvbiAke29yZ2FuaXphdGlvbi5pZH1gLCB7XG4gICAgICBzdWJzY3JpcHRpb25JZDogc3Vic2NyaXB0aW9uLmlkLFxuICAgICAgcGxhblR5cGU6IHBsYW4udHlwZSxcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgaGFuZGxlU3Vic2NyaXB0aW9uVXBkYXRlZChzdWJzY3JpcHRpb246IFN0cmlwZS5TdWJzY3JpcHRpb24pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBleGlzdGluZ1N1YnNjcmlwdGlvbiA9IGF3YWl0IHRoaXMucHJpc21hLnN1YnNjcmlwdGlvbi5maW5kRmlyc3Qoe1xuICAgICAgd2hlcmU6IHsgc3RyaXBlU3Vic2NyaXB0aW9uSWQ6IHN1YnNjcmlwdGlvbi5pZCB9LFxuICAgICAgaW5jbHVkZTogeyBwbGFuOiB0cnVlLCBvcmdhbml6YXRpb246IHRydWUgfSxcbiAgICB9KTtcblxuICAgIGlmICghZXhpc3RpbmdTdWJzY3JpcHRpb24pIHtcbiAgICAgIGxvZ2dlci53YXJuKGBTdWJzY3JpcHRpb24gbm90IGZvdW5kIGZvciB1cGRhdGU6ICR7c3Vic2NyaXB0aW9uLmlkfWApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHByaWNlSWQgPSBzdWJzY3JpcHRpb24uaXRlbXMuZGF0YVswXT8ucHJpY2UuaWQ7XG4gICAgbGV0IHBsYW5JZCA9IGV4aXN0aW5nU3Vic2NyaXB0aW9uLnBsYW5JZDtcblxuICAgIC8vIENoZWNrIGlmIHBsYW4gY2hhbmdlZFxuICAgIGlmIChwcmljZUlkICYmIHByaWNlSWQgIT09IGV4aXN0aW5nU3Vic2NyaXB0aW9uLnBsYW4uc3RyaXBlUHJpY2VJZCkge1xuICAgICAgY29uc3QgbmV3UGxhbiA9IGF3YWl0IHRoaXMucHJpc21hLnBsYW4uZmluZEZpcnN0KHtcbiAgICAgICAgd2hlcmU6IHsgc3RyaXBlUHJpY2VJZDogcHJpY2VJZCB9LFxuICAgICAgfSk7XG5cbiAgICAgIGlmIChuZXdQbGFuKSB7XG4gICAgICAgIHBsYW5JZCA9IG5ld1BsYW4uaWQ7XG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgb3JnYW5pemF0aW9uIHBsYW4gdHlwZVxuICAgICAgICBhd2FpdCB0aGlzLnByaXNtYS5vcmdhbml6YXRpb24udXBkYXRlKHtcbiAgICAgICAgICB3aGVyZTogeyBpZDogZXhpc3RpbmdTdWJzY3JpcHRpb24ub3JnYW5pemF0aW9uSWQgfSxcbiAgICAgICAgICBkYXRhOiB7IHBsYW5UeXBlOiBuZXdQbGFuLnR5cGUgfSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIHN1YnNjcmlwdGlvblxuICAgIGF3YWl0IHRoaXMucHJpc21hLnN1YnNjcmlwdGlvbi51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IGV4aXN0aW5nU3Vic2NyaXB0aW9uLmlkIH0sXG4gICAgICBkYXRhOiB7XG4gICAgICAgIHBsYW5JZCxcbiAgICAgICAgc3RhdHVzOiB0aGlzLm1hcFN0cmlwZVN0YXR1cyhzdWJzY3JpcHRpb24uc3RhdHVzKSxcbiAgICAgICAgY3VycmVudFBlcmlvZFN0YXJ0OiBuZXcgRGF0ZShzdWJzY3JpcHRpb24uY3VycmVudF9wZXJpb2Rfc3RhcnQgKiAxMDAwKSxcbiAgICAgICAgY3VycmVudFBlcmlvZEVuZDogbmV3IERhdGUoc3Vic2NyaXB0aW9uLmN1cnJlbnRfcGVyaW9kX2VuZCAqIDEwMDApLFxuICAgICAgICB0cmlhbFN0YXJ0OiBzdWJzY3JpcHRpb24udHJpYWxfc3RhcnQgPyBuZXcgRGF0ZShzdWJzY3JpcHRpb24udHJpYWxfc3RhcnQgKiAxMDAwKSA6IG51bGwsXG4gICAgICAgIHRyaWFsRW5kOiBzdWJzY3JpcHRpb24udHJpYWxfZW5kID8gbmV3IERhdGUoc3Vic2NyaXB0aW9uLnRyaWFsX2VuZCAqIDEwMDApIDogbnVsbCxcbiAgICAgICAgY2FuY2VsQXRQZXJpb2RFbmQ6IHN1YnNjcmlwdGlvbi5jYW5jZWxfYXRfcGVyaW9kX2VuZCxcbiAgICAgICAgY2FuY2VsZWRBdDogc3Vic2NyaXB0aW9uLmNhbmNlbGVkX2F0ID8gbmV3IERhdGUoc3Vic2NyaXB0aW9uLmNhbmNlbGVkX2F0ICogMTAwMCkgOiBudWxsLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGxvZ2dlci5pbmZvKGBTdWJzY3JpcHRpb24gdXBkYXRlZDogJHtzdWJzY3JpcHRpb24uaWR9YCwge1xuICAgICAgb3JnYW5pemF0aW9uSWQ6IGV4aXN0aW5nU3Vic2NyaXB0aW9uLm9yZ2FuaXphdGlvbklkLFxuICAgICAgc3RhdHVzOiBzdWJzY3JpcHRpb24uc3RhdHVzLFxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBoYW5kbGVTdWJzY3JpcHRpb25EZWxldGVkKHN1YnNjcmlwdGlvbjogU3RyaXBlLlN1YnNjcmlwdGlvbik6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGV4aXN0aW5nU3Vic2NyaXB0aW9uID0gYXdhaXQgdGhpcy5wcmlzbWEuc3Vic2NyaXB0aW9uLmZpbmRGaXJzdCh7XG4gICAgICB3aGVyZTogeyBzdHJpcGVTdWJzY3JpcHRpb25JZDogc3Vic2NyaXB0aW9uLmlkIH0sXG4gICAgICBpbmNsdWRlOiB7IG9yZ2FuaXphdGlvbjogdHJ1ZSB9LFxuICAgIH0pO1xuXG4gICAgaWYgKCFleGlzdGluZ1N1YnNjcmlwdGlvbikge1xuICAgICAgbG9nZ2VyLndhcm4oYFN1YnNjcmlwdGlvbiBub3QgZm91bmQgZm9yIGRlbGV0aW9uOiAke3N1YnNjcmlwdGlvbi5pZH1gKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBTb2Z0IGRlbGV0ZTogdXBkYXRlIHN0YXR1cyBpbnN0ZWFkIG9mIGRlbGV0aW5nXG4gICAgYXdhaXQgdGhpcy5wcmlzbWEuc3Vic2NyaXB0aW9uLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogZXhpc3RpbmdTdWJzY3JpcHRpb24uaWQgfSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgc3RhdHVzOiBTdWJzY3JpcHRpb25TdGF0dXMuQ0FOQ0VMRUQsXG4gICAgICAgIGNhbmNlbGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIGRlbGV0ZWRBdDogbmV3IERhdGUoKSwgLy8gU29mdCBkZWxldGVcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBEb3duZ3JhZGUgb3JnYW5pemF0aW9uIHRvIGZyZWUgcGxhblxuICAgIGNvbnN0IGZyZWVQbGFuID0gYXdhaXQgdGhpcy5wcmlzbWEucGxhbi5maW5kRmlyc3Qoe1xuICAgICAgd2hlcmU6IHsgdHlwZTogJ0ZSRUUnIH0sXG4gICAgfSk7XG5cbiAgICBpZiAoZnJlZVBsYW4pIHtcbiAgICAgIGF3YWl0IHRoaXMucHJpc21hLm9yZ2FuaXphdGlvbi51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZDogZXhpc3RpbmdTdWJzY3JpcHRpb24ub3JnYW5pemF0aW9uSWQgfSxcbiAgICAgICAgZGF0YTogeyBwbGFuVHlwZTogZnJlZVBsYW4udHlwZSB9LFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgbG9nZ2VyLmluZm8oYFN1YnNjcmlwdGlvbiBkZWxldGVkIChzb2Z0KTogJHtzdWJzY3JpcHRpb24uaWR9YCwge1xuICAgICAgb3JnYW5pemF0aW9uSWQ6IGV4aXN0aW5nU3Vic2NyaXB0aW9uLm9yZ2FuaXphdGlvbklkLFxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBoYW5kbGVJbnZvaWNlUGF5bWVudFN1Y2NlZWRlZChpbnZvaWNlOiBTdHJpcGUuSW52b2ljZSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHN1YnNjcmlwdGlvbklkID0gaW52b2ljZS5zdWJzY3JpcHRpb24gYXMgc3RyaW5nO1xuICAgIFxuICAgIGlmICghc3Vic2NyaXB0aW9uSWQpIHtcbiAgICAgIGxvZ2dlci53YXJuKCdJbnZvaWNlIHBheW1lbnQgc3VjY2VlZGVkIGJ1dCBubyBzdWJzY3JpcHRpb24gSUQgZm91bmQnLCB7IGludm9pY2VJZDogaW52b2ljZS5pZCB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzdWJzY3JpcHRpb24gPSBhd2FpdCB0aGlzLnByaXNtYS5zdWJzY3JpcHRpb24uZmluZEZpcnN0KHtcbiAgICAgIHdoZXJlOiB7IHN0cmlwZVN1YnNjcmlwdGlvbklkOiBzdWJzY3JpcHRpb25JZCB9LFxuICAgIH0pO1xuXG4gICAgaWYgKCFzdWJzY3JpcHRpb24pIHtcbiAgICAgIGxvZ2dlci53YXJuKGBTdWJzY3JpcHRpb24gbm90IGZvdW5kIGZvciBpbnZvaWNlOiAke2ludm9pY2UuaWR9YCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIG9yIHVwZGF0ZSBpbnZvaWNlIHJlY29yZFxuICAgIGF3YWl0IHRoaXMucHJpc21hLmludm9pY2UudXBzZXJ0KHtcbiAgICAgIHdoZXJlOiB7IHN0cmlwZUludm9pY2VJZDogaW52b2ljZS5pZCB9LFxuICAgICAgdXBkYXRlOiB7XG4gICAgICAgIHN0YXR1czogSW52b2ljZVN0YXR1cy5QQUlELFxuICAgICAgICBwYWlkQXQ6IG5ldyBEYXRlKGludm9pY2Uuc3RhdHVzX3RyYW5zaXRpb25zLnBhaWRfYXQhICogMTAwMCksXG4gICAgICAgIGhvc3RlZEludm9pY2VVcmw6IGludm9pY2UuaG9zdGVkX2ludm9pY2VfdXJsLFxuICAgICAgICBpbnZvaWNlUGRmOiBpbnZvaWNlLmludm9pY2VfcGRmLFxuICAgICAgfSxcbiAgICAgIGNyZWF0ZToge1xuICAgICAgICBzdWJzY3JpcHRpb25JZDogc3Vic2NyaXB0aW9uLmlkLFxuICAgICAgICBzdHJpcGVJbnZvaWNlSWQ6IGludm9pY2UuaWQsXG4gICAgICAgIG51bWJlcjogaW52b2ljZS5udW1iZXIgfHwgYElOVi0ke2ludm9pY2UuaWR9YCxcbiAgICAgICAgc3RhdHVzOiBJbnZvaWNlU3RhdHVzLlBBSUQsXG4gICAgICAgIHRvdGFsOiBpbnZvaWNlLnRvdGFsLFxuICAgICAgICBjdXJyZW5jeTogaW52b2ljZS5jdXJyZW5jeS50b1VwcGVyQ2FzZSgpLFxuICAgICAgICBwYWlkQXQ6IG5ldyBEYXRlKGludm9pY2Uuc3RhdHVzX3RyYW5zaXRpb25zLnBhaWRfYXQhICogMTAwMCksXG4gICAgICAgIGhvc3RlZEludm9pY2VVcmw6IGludm9pY2UuaG9zdGVkX2ludm9pY2VfdXJsLFxuICAgICAgICBpbnZvaWNlUGRmOiBpbnZvaWNlLmludm9pY2VfcGRmLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8vIFVwZGF0ZSBzdWJzY3JpcHRpb24gc3RhdHVzIGlmIGl0IHdhcyBwYXN0IGR1ZVxuICAgIGlmIChzdWJzY3JpcHRpb24uc3RhdHVzID09PSBTdWJzY3JpcHRpb25TdGF0dXMuUEFTVF9EVUUpIHtcbiAgICAgIGF3YWl0IHRoaXMucHJpc21hLnN1YnNjcmlwdGlvbi51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZDogc3Vic2NyaXB0aW9uLmlkIH0sXG4gICAgICAgIGRhdGE6IHsgc3RhdHVzOiBTdWJzY3JpcHRpb25TdGF0dXMuQUNUSVZFIH0sXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBsb2dnZXIuaW5mbyhgSW52b2ljZSBwYXltZW50IHN1Y2NlZWRlZDogJHtpbnZvaWNlLmlkfWAsIHtcbiAgICAgIHN1YnNjcmlwdGlvbklkOiBzdWJzY3JpcHRpb24uaWQsXG4gICAgICBhbW91bnQ6IGludm9pY2UudG90YWwsXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGhhbmRsZUludm9pY2VQYXltZW50RmFpbGVkKGludm9pY2U6IFN0cmlwZS5JbnZvaWNlKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgc3Vic2NyaXB0aW9uSWQgPSBpbnZvaWNlLnN1YnNjcmlwdGlvbiBhcyBzdHJpbmc7XG4gICAgXG4gICAgaWYgKCFzdWJzY3JpcHRpb25JZCkge1xuICAgICAgbG9nZ2VyLndhcm4oJ0ludm9pY2UgcGF5bWVudCBmYWlsZWQgYnV0IG5vIHN1YnNjcmlwdGlvbiBJRCBmb3VuZCcsIHsgaW52b2ljZUlkOiBpbnZvaWNlLmlkIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IGF3YWl0IHRoaXMucHJpc21hLnN1YnNjcmlwdGlvbi5maW5kRmlyc3Qoe1xuICAgICAgd2hlcmU6IHsgc3RyaXBlU3Vic2NyaXB0aW9uSWQ6IHN1YnNjcmlwdGlvbklkIH0sXG4gICAgfSk7XG5cbiAgICBpZiAoIXN1YnNjcmlwdGlvbikge1xuICAgICAgbG9nZ2VyLndhcm4oYFN1YnNjcmlwdGlvbiBub3QgZm91bmQgZm9yIGZhaWxlZCBpbnZvaWNlOiAke2ludm9pY2UuaWR9YCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIG9yIHVwZGF0ZSBpbnZvaWNlIHJlY29yZFxuICAgIGF3YWl0IHRoaXMucHJpc21hLmludm9pY2UudXBzZXJ0KHtcbiAgICAgIHdoZXJlOiB7IHN0cmlwZUludm9pY2VJZDogaW52b2ljZS5pZCB9LFxuICAgICAgdXBkYXRlOiB7XG4gICAgICAgIHN0YXR1czogSW52b2ljZVN0YXR1cy5GQUlMRUQsXG4gICAgICB9LFxuICAgICAgY3JlYXRlOiB7XG4gICAgICAgIHN1YnNjcmlwdGlvbklkOiBzdWJzY3JpcHRpb24uaWQsXG4gICAgICAgIHN0cmlwZUludm9pY2VJZDogaW52b2ljZS5pZCxcbiAgICAgICAgbnVtYmVyOiBpbnZvaWNlLm51bWJlciB8fCBgSU5WLSR7aW52b2ljZS5pZH1gLFxuICAgICAgICBzdGF0dXM6IEludm9pY2VTdGF0dXMuRkFJTEVELFxuICAgICAgICB0b3RhbDogaW52b2ljZS50b3RhbCxcbiAgICAgICAgY3VycmVuY3k6IGludm9pY2UuY3VycmVuY3kudG9VcHBlckNhc2UoKSxcbiAgICAgICAgaG9zdGVkSW52b2ljZVVybDogaW52b2ljZS5ob3N0ZWRfaW52b2ljZV91cmwsXG4gICAgICAgIGludm9pY2VQZGY6IGludm9pY2UuaW52b2ljZV9wZGYsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgLy8gVXBkYXRlIHN1YnNjcmlwdGlvbiBzdGF0dXMgdG8gcGFzdCBkdWVcbiAgICBhd2FpdCB0aGlzLnByaXNtYS5zdWJzY3JpcHRpb24udXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiBzdWJzY3JpcHRpb24uaWQgfSxcbiAgICAgIGRhdGE6IHsgc3RhdHVzOiBTdWJzY3JpcHRpb25TdGF0dXMuUEFTVF9EVUUgfSxcbiAgICB9KTtcblxuICAgIGxvZ2dlci5lcnJvcihgSW52b2ljZSBwYXltZW50IGZhaWxlZDogJHtpbnZvaWNlLmlkfWAsIHtcbiAgICAgIHN1YnNjcmlwdGlvbklkOiBzdWJzY3JpcHRpb24uaWQsXG4gICAgICBhbW91bnQ6IGludm9pY2UudG90YWwsXG4gICAgfSk7XG5cbiAgICAvLyBUT0RPOiBTZW5kIGR1bm5pbmcgZW1haWxzIG9yIG5vdGlmaWNhdGlvbnNcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgaGFuZGxlQ3VzdG9tZXJDcmVhdGVkKGN1c3RvbWVyOiBTdHJpcGUuQ3VzdG9tZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBsb2dnZXIuaW5mbyhgQ3VzdG9tZXIgY3JlYXRlZDogJHtjdXN0b21lci5pZH1gLCB7XG4gICAgICBlbWFpbDogY3VzdG9tZXIuZW1haWwsXG4gICAgICBuYW1lOiBjdXN0b21lci5uYW1lLFxuICAgIH0pO1xuICAgIC8vIEN1c3RvbWVyIGNyZWF0aW9uIGlzIGhhbmRsZWQgaW4gdGhlIGJpbGxpbmcgc2VydmljZSB3aGVuIGNyZWF0aW5nIGNoZWNrb3V0XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGhhbmRsZUN1c3RvbWVyVXBkYXRlZChjdXN0b21lcjogU3RyaXBlLkN1c3RvbWVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgb3JnYW5pemF0aW9uID0gYXdhaXQgdGhpcy5wcmlzbWEub3JnYW5pemF0aW9uLmZpbmRGaXJzdCh7XG4gICAgICB3aGVyZTogeyBzdHJpcGVDdXN0b21lcklkOiBjdXN0b21lci5pZCB9LFxuICAgIH0pO1xuXG4gICAgaWYgKG9yZ2FuaXphdGlvbikge1xuICAgICAgbG9nZ2VyLmluZm8oYEN1c3RvbWVyIHVwZGF0ZWQ6ICR7Y3VzdG9tZXIuaWR9YCwge1xuICAgICAgICBvcmdhbml6YXRpb25JZDogb3JnYW5pemF0aW9uLmlkLFxuICAgICAgICBlbWFpbDogY3VzdG9tZXIuZW1haWwsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGhhbmRsZVBheW1lbnRNZXRob2RBdHRhY2hlZChwYXltZW50TWV0aG9kOiBTdHJpcGUuUGF5bWVudE1ldGhvZCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGN1c3RvbWVySWQgPSBwYXltZW50TWV0aG9kLmN1c3RvbWVyIGFzIHN0cmluZztcbiAgICBcbiAgICBjb25zdCBvcmdhbml6YXRpb24gPSBhd2FpdCB0aGlzLnByaXNtYS5vcmdhbml6YXRpb24uZmluZEZpcnN0KHtcbiAgICAgIHdoZXJlOiB7IHN0cmlwZUN1c3RvbWVySWQ6IGN1c3RvbWVySWQgfSxcbiAgICB9KTtcblxuICAgIGlmICghb3JnYW5pemF0aW9uKSB7XG4gICAgICBsb2dnZXIud2FybihgT3JnYW5pemF0aW9uIG5vdCBmb3VuZCBmb3IgcGF5bWVudCBtZXRob2Q6ICR7cGF5bWVudE1ldGhvZC5pZH1gKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgb3IgdXBkYXRlIHBheW1lbnQgbWV0aG9kIHJlY29yZFxuICAgIGF3YWl0IHRoaXMucHJpc21hLnBheW1lbnRNZXRob2QudXBzZXJ0KHtcbiAgICAgIHdoZXJlOiB7IHN0cmlwZVBheW1lbnRNZXRob2RJZDogcGF5bWVudE1ldGhvZC5pZCB9LFxuICAgICAgdXBkYXRlOiB7XG4gICAgICAgIHR5cGU6IHBheW1lbnRNZXRob2QudHlwZSxcbiAgICAgICAgbGFzdDQ6IHBheW1lbnRNZXRob2QuY2FyZD8ubGFzdDQgfHwgbnVsbCxcbiAgICAgICAgYnJhbmQ6IHBheW1lbnRNZXRob2QuY2FyZD8uYnJhbmQgfHwgbnVsbCxcbiAgICAgICAgZXhwaXJ5TW9udGg6IHBheW1lbnRNZXRob2QuY2FyZD8uZXhwX21vbnRoIHx8IG51bGwsXG4gICAgICAgIGV4cGlyeVllYXI6IHBheW1lbnRNZXRob2QuY2FyZD8uZXhwX3llYXIgfHwgbnVsbCxcbiAgICAgIH0sXG4gICAgICBjcmVhdGU6IHtcbiAgICAgICAgb3JnYW5pemF0aW9uSWQ6IG9yZ2FuaXphdGlvbi5pZCxcbiAgICAgICAgc3RyaXBlUGF5bWVudE1ldGhvZElkOiBwYXltZW50TWV0aG9kLmlkLFxuICAgICAgICB0eXBlOiBwYXltZW50TWV0aG9kLnR5cGUsXG4gICAgICAgIGxhc3Q0OiBwYXltZW50TWV0aG9kLmNhcmQ/Lmxhc3Q0IHx8IG51bGwsXG4gICAgICAgIGJyYW5kOiBwYXltZW50TWV0aG9kLmNhcmQ/LmJyYW5kIHx8IG51bGwsXG4gICAgICAgIGV4cGlyeU1vbnRoOiBwYXltZW50TWV0aG9kLmNhcmQ/LmV4cF9tb250aCB8fCBudWxsLFxuICAgICAgICBleHBpcnlZZWFyOiBwYXltZW50TWV0aG9kLmNhcmQ/LmV4cF95ZWFyIHx8IG51bGwsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgbG9nZ2VyLmluZm8oYFBheW1lbnQgbWV0aG9kIGF0dGFjaGVkOiAke3BheW1lbnRNZXRob2QuaWR9YCwge1xuICAgICAgb3JnYW5pemF0aW9uSWQ6IG9yZ2FuaXphdGlvbi5pZCxcbiAgICAgIHR5cGU6IHBheW1lbnRNZXRob2QudHlwZSxcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgbWFwU3RyaXBlU3RhdHVzKHN0cmlwZVN0YXR1czogU3RyaXBlLlN1YnNjcmlwdGlvbi5TdGF0dXMpOiBTdWJzY3JpcHRpb25TdGF0dXMge1xuICAgIGNvbnN0IHN0YXR1c01hcDogUmVjb3JkPFN0cmlwZS5TdWJzY3JpcHRpb24uU3RhdHVzLCBTdWJzY3JpcHRpb25TdGF0dXM+ID0ge1xuICAgICAgYWN0aXZlOiBTdWJzY3JpcHRpb25TdGF0dXMuQUNUSVZFLFxuICAgICAgY2FuY2VsZWQ6IFN1YnNjcmlwdGlvblN0YXR1cy5DQU5DRUxFRCxcbiAgICAgIGluY29tcGxldGU6IFN1YnNjcmlwdGlvblN0YXR1cy5JTkNPTVBMRVRFLFxuICAgICAgaW5jb21wbGV0ZV9leHBpcmVkOiBTdWJzY3JpcHRpb25TdGF0dXMuSU5DT01QTEVURV9FWFBJUkVELFxuICAgICAgcGFzdF9kdWU6IFN1YnNjcmlwdGlvblN0YXR1cy5QQVNUX0RVRSxcbiAgICAgIHRyaWFsaW5nOiBTdWJzY3JpcHRpb25TdGF0dXMuVFJJQUxJTkcsXG4gICAgICB1bnBhaWQ6IFN1YnNjcmlwdGlvblN0YXR1cy5VTlBBSUQsXG4gICAgfTtcblxuICAgIHJldHVybiBzdGF0dXNNYXBbc3RyaXBlU3RhdHVzXSB8fCBTdWJzY3JpcHRpb25TdGF0dXMuSU5DT01QTEVURTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbG9nV2ViaG9va0V2ZW50KFxuICAgIGV2ZW50OiBTdHJpcGUuRXZlbnQsXG4gICAgc3RhdHVzOiAnc3VjY2VzcycgfCAnZmFpbGVkJyxcbiAgICBlcnJvck1lc3NhZ2U/OiBzdHJpbmdcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMucHJpc21hLmJpbGxpbmdFdmVudC5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgZXZlbnRUeXBlOiBldmVudC50eXBlLFxuICAgICAgICAgIHN0cmlwZUV2ZW50SWQ6IGV2ZW50LmlkLFxuICAgICAgICAgIHN0YXR1cyxcbiAgICAgICAgICBkYXRhOiBldmVudC5kYXRhLm9iamVjdCBhcyBhbnksXG4gICAgICAgICAgZXJyb3JNZXNzYWdlLFxuICAgICAgICAgIHByb2Nlc3NlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGxvZyB3ZWJob29rIGV2ZW50OicsIGVycm9yKTtcbiAgICB9XG4gIH1cbn0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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