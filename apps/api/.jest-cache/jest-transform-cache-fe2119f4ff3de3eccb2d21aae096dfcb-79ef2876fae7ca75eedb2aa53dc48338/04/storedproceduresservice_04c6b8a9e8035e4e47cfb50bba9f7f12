1d84324c1f29b155c51c462600ba0097
"use strict";

/* istanbul ignore next */
function cov_2m5wgvitkk() {
  var path = "C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\stored-procedures.service.ts";
  var hash = "5d417cfb6c1300329489d8b5d7527f77b8a6c904";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\stored-procedures.service.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 0
        },
        end: {
          line: 2,
          column: 62
        }
      },
      "1": {
        start: {
          line: 3,
          column: 0
        },
        end: {
          line: 3,
          column: 78
        }
      },
      "2": {
        start: {
          line: 4,
          column: 17
        },
        end: {
          line: 4,
          column: 43
        }
      },
      "3": {
        start: {
          line: 8,
          column: 8
        },
        end: {
          line: 8,
          column: 29
        }
      },
      "4": {
        start: {
          line: 14,
          column: 8
        },
        end: {
          line: 36,
          column: 9
        }
      },
      "5": {
        start: {
          line: 15,
          column: 26
        },
        end: {
          line: 15,
          column: 86
        }
      },
      "6": {
        start: {
          line: 16,
          column: 24
        },
        end: {
          line: 16,
          column: 45
        }
      },
      "7": {
        start: {
          line: 17,
          column: 12
        },
        end: {
          line: 22,
          column: 15
        }
      },
      "8": {
        start: {
          line: 23,
          column: 27
        },
        end: {
          line: 30,
          column: 7
        }
      },
      "9": {
        start: {
          line: 26,
          column: 57
        },
        end: {
          line: 26,
          column: 72
        }
      },
      "10": {
        start: {
          line: 31,
          column: 12
        },
        end: {
          line: 31,
          column: 37
        }
      },
      "11": {
        start: {
          line: 34,
          column: 12
        },
        end: {
          line: 34,
          column: 100
        }
      },
      "12": {
        start: {
          line: 35,
          column: 12
        },
        end: {
          line: 35,
          column: 86
        }
      },
      "13": {
        start: {
          line: 42,
          column: 8
        },
        end: {
          line: 62,
          column: 9
        }
      },
      "14": {
        start: {
          line: 43,
          column: 12
        },
        end: {
          line: 48,
          column: 15
        }
      },
      "15": {
        start: {
          line: 49,
          column: 27
        },
        end: {
          line: 56,
          column: 7
        }
      },
      "16": {
        start: {
          line: 57,
          column: 12
        },
        end: {
          line: 57,
          column: 26
        }
      },
      "17": {
        start: {
          line: 60,
          column: 12
        },
        end: {
          line: 60,
          column: 96
        }
      },
      "18": {
        start: {
          line: 61,
          column: 12
        },
        end: {
          line: 61,
          column: 82
        }
      },
      "19": {
        start: {
          line: 68,
          column: 8
        },
        end: {
          line: 86,
          column: 9
        }
      },
      "20": {
        start: {
          line: 69,
          column: 12
        },
        end: {
          line: 73,
          column: 15
        }
      },
      "21": {
        start: {
          line: 74,
          column: 27
        },
        end: {
          line: 80,
          column: 7
        }
      },
      "22": {
        start: {
          line: 81,
          column: 12
        },
        end: {
          line: 81,
          column: 26
        }
      },
      "23": {
        start: {
          line: 84,
          column: 12
        },
        end: {
          line: 84,
          column: 103
        }
      },
      "24": {
        start: {
          line: 85,
          column: 12
        },
        end: {
          line: 85,
          column: 89
        }
      },
      "25": {
        start: {
          line: 92,
          column: 8
        },
        end: {
          line: 108,
          column: 9
        }
      },
      "26": {
        start: {
          line: 93,
          column: 12
        },
        end: {
          line: 96,
          column: 15
        }
      },
      "27": {
        start: {
          line: 97,
          column: 27
        },
        end: {
          line: 102,
          column: 7
        }
      },
      "28": {
        start: {
          line: 103,
          column: 12
        },
        end: {
          line: 103,
          column: 37
        }
      },
      "29": {
        start: {
          line: 106,
          column: 12
        },
        end: {
          line: 106,
          column: 101
        }
      },
      "30": {
        start: {
          line: 107,
          column: 12
        },
        end: {
          line: 107,
          column: 87
        }
      },
      "31": {
        start: {
          line: 114,
          column: 8
        },
        end: {
          line: 129,
          column: 9
        }
      },
      "32": {
        start: {
          line: 115,
          column: 25
        },
        end: {
          line: 115,
          column: 81
        }
      },
      "33": {
        start: {
          line: 116,
          column: 12
        },
        end: {
          line: 118,
          column: 15
        }
      },
      "34": {
        start: {
          line: 119,
          column: 27
        },
        end: {
          line: 121,
          column: 7
        }
      },
      "35": {
        start: {
          line: 122,
          column: 35
        },
        end: {
          line: 122,
          column: 76
        }
      },
      "36": {
        start: {
          line: 123,
          column: 12
        },
        end: {
          line: 123,
          column: 127
        }
      },
      "37": {
        start: {
          line: 124,
          column: 12
        },
        end: {
          line: 124,
          column: 34
        }
      },
      "38": {
        start: {
          line: 127,
          column: 12
        },
        end: {
          line: 127,
          column: 104
        }
      },
      "39": {
        start: {
          line: 128,
          column: 12
        },
        end: {
          line: 128,
          column: 89
        }
      },
      "40": {
        start: {
          line: 135,
          column: 8
        },
        end: {
          line: 149,
          column: 9
        }
      },
      "41": {
        start: {
          line: 136,
          column: 12
        },
        end: {
          line: 138,
          column: 15
        }
      },
      "42": {
        start: {
          line: 139,
          column: 27
        },
        end: {
          line: 141,
          column: 7
        }
      },
      "43": {
        start: {
          line: 142,
          column: 33
        },
        end: {
          line: 142,
          column: 68
        }
      },
      "44": {
        start: {
          line: 143,
          column: 12
        },
        end: {
          line: 143,
          column: 122
        }
      },
      "45": {
        start: {
          line: 144,
          column: 12
        },
        end: {
          line: 144,
          column: 32
        }
      },
      "46": {
        start: {
          line: 147,
          column: 12
        },
        end: {
          line: 147,
          column: 98
        }
      },
      "47": {
        start: {
          line: 148,
          column: 12
        },
        end: {
          line: 148,
          column: 84
        }
      },
      "48": {
        start: {
          line: 155,
          column: 8
        },
        end: {
          line: 163,
          column: 9
        }
      },
      "49": {
        start: {
          line: 156,
          column: 12
        },
        end: {
          line: 156,
          column: 83
        }
      },
      "50": {
        start: {
          line: 157,
          column: 27
        },
        end: {
          line: 157,
          column: 78
        }
      },
      "51": {
        start: {
          line: 158,
          column: 12
        },
        end: {
          line: 158,
          column: 26
        }
      },
      "52": {
        start: {
          line: 161,
          column: 12
        },
        end: {
          line: 161,
          column: 78
        }
      },
      "53": {
        start: {
          line: 162,
          column: 12
        },
        end: {
          line: 162,
          column: 66
        }
      },
      "54": {
        start: {
          line: 169,
          column: 8
        },
        end: {
          line: 199,
          column: 9
        }
      },
      "55": {
        start: {
          line: 170,
          column: 39
        },
        end: {
          line: 177,
          column: 13
        }
      },
      "56": {
        start: {
          line: 178,
          column: 27
        },
        end: {
          line: 183,
          column: 7
        }
      },
      "57": {
        start: {
          line: 182,
          column: 67
        },
        end: {
          line: 182,
          column: 75
        }
      },
      "58": {
        start: {
          line: 184,
          column: 40
        },
        end: {
          line: 184,
          column: 71
        }
      },
      "59": {
        start: {
          line: 184,
          column: 56
        },
        end: {
          line: 184,
          column: 70
        }
      },
      "60": {
        start: {
          line: 185,
          column: 38
        },
        end: {
          line: 185,
          column: 108
        }
      },
      "61": {
        start: {
          line: 185,
          column: 72
        },
        end: {
          line: 185,
          column: 107
        }
      },
      "62": {
        start: {
          line: 186,
          column: 12
        },
        end: {
          line: 190,
          column: 14
        }
      },
      "63": {
        start: {
          line: 193,
          column: 12
        },
        end: {
          line: 193,
          column: 85
        }
      },
      "64": {
        start: {
          line: 194,
          column: 12
        },
        end: {
          line: 198,
          column: 14
        }
      },
      "65": {
        start: {
          line: 205,
          column: 8
        },
        end: {
          line: 215,
          column: 9
        }
      },
      "66": {
        start: {
          line: 206,
          column: 12
        },
        end: {
          line: 206,
          column: 68
        }
      },
      "67": {
        start: {
          line: 209,
          column: 12
        },
        end: {
          line: 209,
          column: 95
        }
      },
      "68": {
        start: {
          line: 210,
          column: 12
        },
        end: {
          line: 210,
          column: 106
        }
      },
      "69": {
        start: {
          line: 213,
          column: 12
        },
        end: {
          line: 213,
          column: 80
        }
      },
      "70": {
        start: {
          line: 214,
          column: 12
        },
        end: {
          line: 214,
          column: 67
        }
      },
      "71": {
        start: {
          line: 221,
          column: 8
        },
        end: {
          line: 241,
          column: 9
        }
      },
      "72": {
        start: {
          line: 223,
          column: 27
        },
        end: {
          line: 235,
          column: 7
        }
      },
      "73": {
        start: {
          line: 236,
          column: 12
        },
        end: {
          line: 236,
          column: 26
        }
      },
      "74": {
        start: {
          line: 239,
          column: 12
        },
        end: {
          line: 239,
          column: 118
        }
      },
      "75": {
        start: {
          line: 240,
          column: 12
        },
        end: {
          line: 240,
          column: 22
        }
      },
      "76": {
        start: {
          line: 244,
          column: 0
        },
        end: {
          line: 244,
          column: 58
        }
      },
      "77": {
        start: {
          line: 247,
          column: 35
        },
        end: {
          line: 255,
          column: 1
        }
      },
      "78": {
        start: {
          line: 248,
          column: 4
        },
        end: {
          line: 253,
          column: 5
        }
      },
      "79": {
        start: {
          line: 249,
          column: 8
        },
        end: {
          line: 251,
          column: 9
        }
      },
      "80": {
        start: {
          line: 250,
          column: 12
        },
        end: {
          line: 250,
          column: 95
        }
      },
      "81": {
        start: {
          line: 252,
          column: 8
        },
        end: {
          line: 252,
          column: 70
        }
      },
      "82": {
        start: {
          line: 254,
          column: 4
        },
        end: {
          line: 254,
          column: 35
        }
      },
      "83": {
        start: {
          line: 256,
          column: 0
        },
        end: {
          line: 256,
          column: 64
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 7,
            column: 4
          },
          end: {
            line: 7,
            column: 5
          }
        },
        loc: {
          start: {
            line: 7,
            column: 24
          },
          end: {
            line: 9,
            column: 5
          }
        },
        line: 7
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 13,
            column: 4
          },
          end: {
            line: 13,
            column: 5
          }
        },
        loc: {
          start: {
            line: 13,
            column: 79
          },
          end: {
            line: 37,
            column: 5
          }
        },
        line: 13
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 26,
            column: 51
          },
          end: {
            line: 26,
            column: 52
          }
        },
        loc: {
          start: {
            line: 26,
            column: 57
          },
          end: {
            line: 26,
            column: 72
          }
        },
        line: 26
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 41,
            column: 4
          },
          end: {
            line: 41,
            column: 5
          }
        },
        loc: {
          start: {
            line: 41,
            column: 74
          },
          end: {
            line: 63,
            column: 5
          }
        },
        line: 41
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 67,
            column: 4
          },
          end: {
            line: 67,
            column: 5
          }
        },
        loc: {
          start: {
            line: 67,
            column: 65
          },
          end: {
            line: 87,
            column: 5
          }
        },
        line: 67
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 91,
            column: 4
          },
          end: {
            line: 91,
            column: 5
          }
        },
        loc: {
          start: {
            line: 91,
            column: 63
          },
          end: {
            line: 109,
            column: 5
          }
        },
        line: 91
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 113,
            column: 4
          },
          end: {
            line: 113,
            column: 5
          }
        },
        loc: {
          start: {
            line: 113,
            column: 45
          },
          end: {
            line: 130,
            column: 5
          }
        },
        line: 113
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 134,
            column: 4
          },
          end: {
            line: 134,
            column: 5
          }
        },
        loc: {
          start: {
            line: 134,
            column: 48
          },
          end: {
            line: 150,
            column: 5
          }
        },
        line: 134
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 154,
            column: 4
          },
          end: {
            line: 154,
            column: 5
          }
        },
        loc: {
          start: {
            line: 154,
            column: 49
          },
          end: {
            line: 164,
            column: 5
          }
        },
        line: 154
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 168,
            column: 4
          },
          end: {
            line: 168,
            column: 5
          }
        },
        loc: {
          start: {
            line: 168,
            column: 40
          },
          end: {
            line: 200,
            column: 5
          }
        },
        line: 168
      },
      "10": {
        name: "(anonymous_10)",
        decl: {
          start: {
            line: 182,
            column: 62
          },
          end: {
            line: 182,
            column: 63
          }
        },
        loc: {
          start: {
            line: 182,
            column: 67
          },
          end: {
            line: 182,
            column: 75
          }
        },
        line: 182
      },
      "11": {
        name: "(anonymous_11)",
        decl: {
          start: {
            line: 184,
            column: 51
          },
          end: {
            line: 184,
            column: 52
          }
        },
        loc: {
          start: {
            line: 184,
            column: 56
          },
          end: {
            line: 184,
            column: 70
          }
        },
        line: 184
      },
      "12": {
        name: "(anonymous_12)",
        decl: {
          start: {
            line: 185,
            column: 64
          },
          end: {
            line: 185,
            column: 65
          }
        },
        loc: {
          start: {
            line: 185,
            column: 72
          },
          end: {
            line: 185,
            column: 107
          }
        },
        line: 185
      },
      "13": {
        name: "(anonymous_13)",
        decl: {
          start: {
            line: 204,
            column: 4
          },
          end: {
            line: 204,
            column: 5
          }
        },
        loc: {
          start: {
            line: 204,
            column: 36
          },
          end: {
            line: 216,
            column: 5
          }
        },
        line: 204
      },
      "14": {
        name: "(anonymous_14)",
        decl: {
          start: {
            line: 220,
            column: 4
          },
          end: {
            line: 220,
            column: 5
          }
        },
        loc: {
          start: {
            line: 220,
            column: 32
          },
          end: {
            line: 242,
            column: 5
          }
        },
        line: 220
      },
      "15": {
        name: "(anonymous_15)",
        decl: {
          start: {
            line: 247,
            column: 35
          },
          end: {
            line: 247,
            column: 36
          }
        },
        loc: {
          start: {
            line: 247,
            column: 47
          },
          end: {
            line: 255,
            column: 1
          }
        },
        line: 247
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 15,
            column: 26
          },
          end: {
            line: 15,
            column: 86
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 15,
            column: 26
          },
          end: {
            line: 15,
            column: 35
          }
        }, {
          start: {
            line: 15,
            column: 39
          },
          end: {
            line: 15,
            column: 86
          }
        }],
        line: 15
      },
      "1": {
        loc: {
          start: {
            line: 16,
            column: 24
          },
          end: {
            line: 16,
            column: 45
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 16,
            column: 24
          },
          end: {
            line: 16,
            column: 31
          }
        }, {
          start: {
            line: 16,
            column: 35
          },
          end: {
            line: 16,
            column: 45
          }
        }],
        line: 16
      },
      "2": {
        loc: {
          start: {
            line: 26,
            column: 12
          },
          end: {
            line: 26,
            column: 95
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 26,
            column: 26
          },
          end: {
            line: 26,
            column: 86
          }
        }, {
          start: {
            line: 26,
            column: 89
          },
          end: {
            line: 26,
            column: 95
          }
        }],
        line: 26
      },
      "3": {
        loc: {
          start: {
            line: 31,
            column: 19
          },
          end: {
            line: 31,
            column: 36
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 31,
            column: 19
          },
          end: {
            line: 31,
            column: 28
          }
        }, {
          start: {
            line: 31,
            column: 32
          },
          end: {
            line: 31,
            column: 36
          }
        }],
        line: 31
      },
      "4": {
        loc: {
          start: {
            line: 41,
            column: 62
          },
          end: {
            line: 41,
            column: 72
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 41,
            column: 70
          },
          end: {
            line: 41,
            column: 72
          }
        }],
        line: 41
      },
      "5": {
        loc: {
          start: {
            line: 91,
            column: 47
          },
          end: {
            line: 91,
            column: 61
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 91,
            column: 59
          },
          end: {
            line: 91,
            column: 61
          }
        }],
        line: 91
      },
      "6": {
        loc: {
          start: {
            line: 103,
            column: 19
          },
          end: {
            line: 103,
            column: 36
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 103,
            column: 19
          },
          end: {
            line: 103,
            column: 28
          }
        }, {
          start: {
            line: 103,
            column: 32
          },
          end: {
            line: 103,
            column: 36
          }
        }],
        line: 103
      },
      "7": {
        loc: {
          start: {
            line: 115,
            column: 25
          },
          end: {
            line: 115,
            column: 81
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 115,
            column: 25
          },
          end: {
            line: 115,
            column: 35
          }
        }, {
          start: {
            line: 115,
            column: 39
          },
          end: {
            line: 115,
            column: 81
          }
        }],
        line: 115
      },
      "8": {
        loc: {
          start: {
            line: 122,
            column: 35
          },
          end: {
            line: 122,
            column: 76
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 122,
            column: 35
          },
          end: {
            line: 122,
            column: 71
          }
        }, {
          start: {
            line: 122,
            column: 75
          },
          end: {
            line: 122,
            column: 76
          }
        }],
        line: 122
      },
      "9": {
        loc: {
          start: {
            line: 134,
            column: 28
          },
          end: {
            line: 134,
            column: 46
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 134,
            column: 44
          },
          end: {
            line: 134,
            column: 46
          }
        }],
        line: 134
      },
      "10": {
        loc: {
          start: {
            line: 142,
            column: 33
          },
          end: {
            line: 142,
            column: 68
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 142,
            column: 33
          },
          end: {
            line: 142,
            column: 63
          }
        }, {
          start: {
            line: 142,
            column: 67
          },
          end: {
            line: 142,
            column: 68
          }
        }],
        line: 142
      },
      "11": {
        loc: {
          start: {
            line: 154,
            column: 36
          },
          end: {
            line: 154,
            column: 47
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 154,
            column: 45
          },
          end: {
            line: 154,
            column: 47
          }
        }],
        line: 154
      },
      "12": {
        loc: {
          start: {
            line: 248,
            column: 4
          },
          end: {
            line: 253,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 248,
            column: 4
          },
          end: {
            line: 253,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 248
      },
      "13": {
        loc: {
          start: {
            line: 249,
            column: 8
          },
          end: {
            line: 251,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 249,
            column: 8
          },
          end: {
            line: 251,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 249
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0,
      "66": 0,
      "67": 0,
      "68": 0,
      "69": 0,
      "70": 0,
      "71": 0,
      "72": 0,
      "73": 0,
      "74": 0,
      "75": 0,
      "76": 0,
      "77": 0,
      "78": 0,
      "79": 0,
      "80": 0,
      "81": 0,
      "82": 0,
      "83": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0],
      "5": [0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0],
      "10": [0, 0],
      "11": [0],
      "12": [0, 0],
      "13": [0, 0]
    },
    inputSourceMap: {
      file: "C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\stored-procedures.service.ts",
      mappings: ";;;AACA,4CAAyC;AAkDzC,MAAa,uBAAuB;IACd;IAApB,YAAoB,MAAqB;QAArB,WAAM,GAAN,MAAM,CAAe;IAAG,CAAC;IAE7C;;OAEG;IACH,KAAK,CAAC,mBAAmB,CACvB,cAAsB,EACtB,WAAsB,EACtB,SAAgB,EAChB,OAAc;QAEd,IAAI,CAAC;YACH,MAAM,KAAK,GAAG,SAAS,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC,CAAC,uBAAuB;YACnG,MAAM,GAAG,GAAG,OAAO,IAAI,IAAI,IAAI,EAAE,CAAC;YAElC,eAAM,CAAC,KAAK,CAAC,kDAAkD,EAAE;gBAC/D,cAAc;gBACd,WAAW;gBACX,SAAS,EAAE,KAAK;gBAChB,OAAO,EAAE,GAAG;aACb,CAAC,CAAC;YAEH,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,MAAM,CAAC,SAAS,CAA4B;;YAEhE,cAAc;YACd,WAAW,CAAC,CAAC,CAAC,SAAS,WAAW,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM;YACnF,KAAK;YACL,GAAG;;OAER,CAAC;YAEF,OAAO,MAAM,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC;QAC3B,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,eAAM,CAAC,KAAK,CAAC,yDAAyD,EAAE,KAAK,CAAC,CAAC;YAC/E,MAAM,IAAI,KAAK,CAAC,wDAAwD,CAAC,CAAC;QAC5E,CAAC;IACH,CAAC;IAED;;OAEG;IACH,KAAK,CAAC,eAAe,CACnB,cAAsB,EACtB,SAAe,EACf,OAAa,EACb,QAAgB,EAAE;QAElB,IAAI,CAAC;YACH,eAAM,CAAC,KAAK,CAAC,8CAA8C,EAAE;gBAC3D,cAAc;gBACd,SAAS;gBACT,OAAO;gBACP,KAAK;aACN,CAAC,CAAC;YAEH,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,MAAM,CAAC,SAAS,CAAqB;;YAEzD,cAAc;YACd,SAAS;YACT,OAAO;YACP,KAAK;;OAEV,CAAC;YAEF,OAAO,MAAM,CAAC;QAChB,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,eAAM,CAAC,KAAK,CAAC,qDAAqD,EAAE,KAAK,CAAC,CAAC;YAC3E,MAAM,IAAI,KAAK,CAAC,oDAAoD,CAAC,CAAC;QACxE,CAAC;IACH,CAAC;IAED;;OAEG;IACH,KAAK,CAAC,sBAAsB,CAC1B,UAAkB,EAClB,SAAe,EACf,OAAa;QAEb,IAAI,CAAC;YACH,eAAM,CAAC,KAAK,CAAC,qDAAqD,EAAE;gBAClE,UAAU;gBACV,SAAS;gBACT,OAAO;aACR,CAAC,CAAC;YAEH,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,MAAM,CAAC,SAAS,CAAsB;;YAE1D,UAAU;YACV,SAAS;YACT,OAAO;;OAEZ,CAAC;YAEF,OAAO,MAAM,CAAC;QAChB,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,eAAM,CAAC,KAAK,CAAC,4DAA4D,EAAE,KAAK,CAAC,CAAC;YAClF,MAAM,IAAI,KAAK,CAAC,2DAA2D,CAAC,CAAC;QAC/E,CAAC;IACH,CAAC;IAED;;OAEG;IACH,KAAK,CAAC,oBAAoB,CACxB,cAAsB,EACtB,YAAoB,EAAE;QAEtB,IAAI,CAAC;YACH,eAAM,CAAC,KAAK,CAAC,mDAAmD,EAAE;gBAChE,cAAc;gBACd,SAAS;aACV,CAAC,CAAC;YAEH,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,MAAM,CAAC,SAAS,CAA2B;;YAE/D,cAAc;YACd,SAAS;;OAEd,CAAC;YAEF,OAAO,MAAM,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC;QAC3B,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,eAAM,CAAC,KAAK,CAAC,0DAA0D,EAAE,KAAK,CAAC,CAAC;YAChF,MAAM,IAAI,KAAK,CAAC,yDAAyD,CAAC,CAAC;QAC7E,CAAC;IACH,CAAC;IAED;;OAEG;IACH,KAAK,CAAC,sBAAsB,CAAC,UAAiB;QAC5C,IAAI,CAAC;YACH,MAAM,IAAI,GAAG,UAAU,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC,CAAC,qBAAqB;YAE5F,eAAM,CAAC,KAAK,CAAC,sDAAsD,EAAE;gBACnE,UAAU,EAAE,IAAI;aACjB,CAAC,CAAC;YAEH,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,MAAM,CAAC,SAAS,CAAyC;2CAC9C,IAAI;OACxC,CAAC;YAEF,MAAM,cAAc,GAAG,MAAM,CAAC,CAAC,CAAC,EAAE,yBAAyB,IAAI,CAAC,CAAC;YAEjE,eAAM,CAAC,IAAI,CAAC,cAAc,cAAc,8BAA8B,IAAI,CAAC,WAAW,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;YAE1G,OAAO,cAAc,CAAC;QACxB,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,eAAM,CAAC,KAAK,CAAC,6DAA6D,EAAE,KAAK,CAAC,CAAC;YACnF,MAAM,IAAI,KAAK,CAAC,2DAA2D,CAAC,CAAC;QAC/E,CAAC;IACH,CAAC;IAED;;OAEG;IACH,KAAK,CAAC,iBAAiB,CAAC,gBAAwB,EAAE;QAChD,IAAI,CAAC;YACH,eAAM,CAAC,KAAK,CAAC,gDAAgD,EAAE;gBAC7D,aAAa;aACd,CAAC,CAAC;YAEH,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,MAAM,CAAC,SAAS,CAAmC;qCAC9C,aAAa;OAC3C,CAAC;YAEF,MAAM,YAAY,GAAG,MAAM,CAAC,CAAC,CAAC,EAAE,mBAAmB,IAAI,CAAC,CAAC;YAEzD,eAAM,CAAC,IAAI,CAAC,cAAc,YAAY,yCAAyC,aAAa,OAAO,CAAC,CAAC;YAErG,OAAO,YAAY,CAAC;QACtB,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,eAAM,CAAC,KAAK,CAAC,uDAAuD,EAAE,KAAK,CAAC,CAAC;YAC7E,MAAM,IAAI,KAAK,CAAC,sDAAsD,CAAC,CAAC;QAC1E,CAAC;IACH,CAAC;IAED;;OAEG;IACH,KAAK,CAAC,kBAAkB,CAAU,KAAa,EAAE,SAAgB,EAAE;QACjE,IAAI,CAAC;YACH,eAAM,CAAC,KAAK,CAAC,4BAA4B,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC,CAAC;YAE9D,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,MAAM,CAAC,eAAe,CAAM,KAAK,EAAE,GAAG,MAAM,CAAC,CAAC;YAExE,OAAO,MAAM,CAAC;QAChB,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,eAAM,CAAC,KAAK,CAAC,mCAAmC,EAAE,KAAK,CAAC,CAAC;YACzD,MAAM,IAAI,KAAK,CAAC,oCAAoC,CAAC,CAAC;QACxD,CAAC;IACH,CAAC;IAED;;OAEG;IACH,KAAK,CAAC,2BAA2B;QAK/B,IAAI,CAAC;YACH,MAAM,kBAAkB,GAAG;gBACzB,uBAAuB;gBACvB,mBAAmB;gBACnB,0BAA0B;gBAC1B,2BAA2B;gBAC3B,qBAAqB;gBACrB,wBAAwB;aACzB,CAAC;YAEF,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,MAAM,CAAC,SAAS,CAA4B;;;;uCAIrC,kBAAkB,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC;OAC/E,CAAC;YAEF,MAAM,mBAAmB,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC;YAC5D,MAAM,iBAAiB,GAAG,kBAAkB,CAAC,MAAM,CACjD,IAAI,CAAC,EAAE,CAAC,CAAC,mBAAmB,CAAC,QAAQ,CAAC,IAAI,CAAC,CAC5C,CAAC;YAEF,OAAO;gBACL,SAAS,EAAE,iBAAiB,CAAC,MAAM,KAAK,CAAC;gBACzC,UAAU,EAAE,mBAAmB;gBAC/B,OAAO,EAAE,iBAAiB;aAC3B,CAAC;QACJ,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,eAAM,CAAC,KAAK,CAAC,0CAA0C,EAAE,KAAK,CAAC,CAAC;YAChE,OAAO;gBACL,SAAS,EAAE,KAAK;gBAChB,UAAU,EAAE,EAAE;gBACd,OAAO,EAAE,EAAE;aACZ,CAAC;QACJ,CAAC;IACH,CAAC;IAED;;OAEG;IACH,KAAK,CAAC,uBAAuB;QAC3B,IAAI,CAAC;YACH,eAAM,CAAC,IAAI,CAAC,iCAAiC,CAAC,CAAC;YAE/C,wDAAwD;YACxD,uEAAuE;YACvE,eAAM,CAAC,IAAI,CAAC,4DAA4D,CAAC,CAAC;YAC1E,eAAM,CAAC,IAAI,CAAC,uEAAuE,CAAC,CAAC;QAEvF,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,eAAM,CAAC,KAAK,CAAC,qCAAqC,EAAE,KAAK,CAAC,CAAC;YAC3D,MAAM,IAAI,KAAK,CAAC,qCAAqC,CAAC,CAAC;QACzD,CAAC;IACH,CAAC;IAED;;OAEG;IACH,KAAK,CAAC,mBAAmB;QAMvB,IAAI,CAAC;YACH,6CAA6C;YAC7C,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,MAAM,CAAC,SAAS,CAKtC;;;;;;;;;;;;OAYH,CAAC;YAEF,OAAO,MAAM,CAAC;QAChB,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,eAAM,CAAC,IAAI,CAAC,mFAAmF,CAAC,CAAC;YACjG,OAAO,EAAE,CAAC;QACZ,CAAC;IACH,CAAC;CACF;AAtSD,0DAsSC;AAED,qBAAqB;AACrB,IAAI,uBAAgD,CAAC;AAE9C,MAAM,0BAA0B,GAAG,CAAC,MAAsB,EAA2B,EAAE;IAC5F,IAAI,CAAC,uBAAuB,EAAE,CAAC;QAC7B,IAAI,CAAC,MAAM,EAAE,CAAC;YACZ,MAAM,IAAI,KAAK,CAAC,iEAAiE,CAAC,CAAC;QACrF,CAAC;QACD,uBAAuB,GAAG,IAAI,uBAAuB,CAAC,MAAM,CAAC,CAAC;IAChE,CAAC;IACD,OAAO,uBAAuB,CAAC;AACjC,CAAC,CAAC;AARW,QAAA,0BAA0B,8BAQrC",
      names: [],
      sources: ["C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\stored-procedures.service.ts"],
      sourcesContent: ["import { PrismaService } from '../database/prisma.service';\nimport { logger } from '../utils/logger';\n\n// Interfaces for stored procedure results\nexport interface StoredProcedureKPIResult {\n  revenue: number;\n  ad_spend: number;\n  impressions: number;\n  clicks: number;\n  conversions: number;\n  roas: number;\n  roi: number;\n  cpc: number;\n  cpm: number;\n  cac: number;\n  ctr: number;\n  conversion_rate: number;\n  arpu: number;\n  ltv: number;\n  margin: number;\n  profit: number;\n}\n\nexport interface TopCampaignResult {\n  campaign_id: string;\n  campaign_name: string;\n  revenue: number;\n  ad_spend: number;\n  roas: number;\n  conversions: number;\n}\n\nexport interface FunnelMetricResult {\n  stage_name: string;\n  stage_order: number;\n  users: number;\n  conversion_rate: number;\n  dropoff_rate: number;\n}\n\nexport interface RealtimeDashboardResult {\n  total_impressions: number;\n  total_clicks: number;\n  total_conversions: number;\n  total_revenue: number;\n  total_ad_spend: number;\n  avg_ctr: number;\n  avg_conversion_rate: number;\n  current_roas: number;\n}\n\nexport class StoredProceduresService {\n  constructor(private prisma: PrismaService) {}\n\n  /**\n   * Calculate KPI metrics using optimized stored procedure\n   */\n  async calculateKPIMetrics(\n    organizationId: string,\n    campaignIds?: string[],\n    startDate?: Date,\n    endDate?: Date\n  ): Promise<StoredProcedureKPIResult | null> {\n    try {\n      const start = startDate || new Date(Date.now() - 30 * 24 * 60 * 60 * 1000); // Default: 30 days ago\n      const end = endDate || new Date();\n\n      logger.debug('Executing calculate_kpi_metrics stored procedure', {\n        organizationId,\n        campaignIds,\n        startDate: start,\n        endDate: end,\n      });\n\n      const result = await this.prisma.$queryRaw<StoredProcedureKPIResult[]>`\n        SELECT * FROM calculate_kpi_metrics(\n          ${organizationId}::uuid,\n          ${campaignIds ? `ARRAY[${campaignIds.map(id => `'${id}'::uuid`).join(',')}]` : 'NULL'}::uuid[],\n          ${start}::date,\n          ${end}::date\n        )\n      `;\n\n      return result[0] || null;\n    } catch (error) {\n      logger.error('Error executing calculate_kpi_metrics stored procedure:', error);\n      throw new Error('Failed to calculate KPI metrics using stored procedure');\n    }\n  }\n\n  /**\n   * Get top performing campaigns using stored procedure\n   */\n  async getTopCampaigns(\n    organizationId: string,\n    startDate: Date,\n    endDate: Date,\n    limit: number = 10\n  ): Promise<TopCampaignResult[]> {\n    try {\n      logger.debug('Executing get_top_campaigns stored procedure', {\n        organizationId,\n        startDate,\n        endDate,\n        limit,\n      });\n\n      const result = await this.prisma.$queryRaw<TopCampaignResult[]>`\n        SELECT * FROM get_top_campaigns(\n          ${organizationId}::uuid,\n          ${startDate}::date,\n          ${endDate}::date,\n          ${limit}::integer\n        )\n      `;\n\n      return result;\n    } catch (error) {\n      logger.error('Error executing get_top_campaigns stored procedure:', error);\n      throw new Error('Failed to get top campaigns using stored procedure');\n    }\n  }\n\n  /**\n   * Calculate funnel metrics using stored procedure\n   */\n  async calculateFunnelMetrics(\n    campaignId: string,\n    startDate: Date,\n    endDate: Date\n  ): Promise<FunnelMetricResult[]> {\n    try {\n      logger.debug('Executing calculate_funnel_metrics stored procedure', {\n        campaignId,\n        startDate,\n        endDate,\n      });\n\n      const result = await this.prisma.$queryRaw<FunnelMetricResult[]>`\n        SELECT * FROM calculate_funnel_metrics(\n          ${campaignId}::uuid,\n          ${startDate}::date,\n          ${endDate}::date\n        )\n      `;\n\n      return result;\n    } catch (error) {\n      logger.error('Error executing calculate_funnel_metrics stored procedure:', error);\n      throw new Error('Failed to calculate funnel metrics using stored procedure');\n    }\n  }\n\n  /**\n   * Get real-time dashboard metrics using stored procedure\n   */\n  async getRealtimeDashboard(\n    organizationId: string,\n    hoursBack: number = 24\n  ): Promise<RealtimeDashboardResult | null> {\n    try {\n      logger.debug('Executing get_realtime_dashboard stored procedure', {\n        organizationId,\n        hoursBack,\n      });\n\n      const result = await this.prisma.$queryRaw<RealtimeDashboardResult[]>`\n        SELECT * FROM get_realtime_dashboard(\n          ${organizationId}::uuid,\n          ${hoursBack}::integer\n        )\n      `;\n\n      return result[0] || null;\n    } catch (error) {\n      logger.error('Error executing get_realtime_dashboard stored procedure:', error);\n      throw new Error('Failed to get realtime dashboard using stored procedure');\n    }\n  }\n\n  /**\n   * Aggregate hourly metrics to daily using stored procedure\n   */\n  async aggregateHourlyToDaily(targetDate?: Date): Promise<number> {\n    try {\n      const date = targetDate || new Date(Date.now() - 24 * 60 * 60 * 1000); // Default: yesterday\n\n      logger.debug('Executing aggregate_hourly_to_daily stored procedure', {\n        targetDate: date,\n      });\n\n      const result = await this.prisma.$queryRaw<{ aggregate_hourly_to_daily: number }[]>`\n        SELECT aggregate_hourly_to_daily(${date}::date) as aggregate_hourly_to_daily\n      `;\n\n      const processedCount = result[0]?.aggregate_hourly_to_daily || 0;\n      \n      logger.info(`Aggregated ${processedCount} campaign metrics for date ${date.toISOString().split('T')[0]}`);\n      \n      return processedCount;\n    } catch (error) {\n      logger.error('Error executing aggregate_hourly_to_daily stored procedure:', error);\n      throw new Error('Failed to aggregate hourly metrics using stored procedure');\n    }\n  }\n\n  /**\n   * Clean up old metrics data using stored procedure\n   */\n  async cleanupOldMetrics(retentionDays: number = 90): Promise<number> {\n    try {\n      logger.debug('Executing cleanup_old_metrics stored procedure', {\n        retentionDays,\n      });\n\n      const result = await this.prisma.$queryRaw<{ cleanup_old_metrics: number }[]>`\n        SELECT cleanup_old_metrics(${retentionDays}::integer) as cleanup_old_metrics\n      `;\n\n      const deletedCount = result[0]?.cleanup_old_metrics || 0;\n      \n      logger.info(`Cleaned up ${deletedCount} old metric records with retention of ${retentionDays} days`);\n      \n      return deletedCount;\n    } catch (error) {\n      logger.error('Error executing cleanup_old_metrics stored procedure:', error);\n      throw new Error('Failed to cleanup old metrics using stored procedure');\n    }\n  }\n\n  /**\n   * Execute custom SQL query with proper error handling\n   */\n  async executeCustomQuery<T = any>(query: string, params: any[] = []): Promise<T[]> {\n    try {\n      logger.debug('Executing custom SQL query', { query, params });\n\n      const result = await this.prisma.$queryRawUnsafe<T[]>(query, ...params);\n      \n      return result;\n    } catch (error) {\n      logger.error('Error executing custom SQL query:', error);\n      throw new Error('Failed to execute custom SQL query');\n    }\n  }\n\n  /**\n   * Check if stored procedures are available\n   */\n  async checkStoredProceduresHealth(): Promise<{\n    available: boolean;\n    procedures: string[];\n    missing: string[];\n  }> {\n    try {\n      const expectedProcedures = [\n        'calculate_kpi_metrics',\n        'get_top_campaigns',\n        'calculate_funnel_metrics',\n        'aggregate_hourly_to_daily',\n        'cleanup_old_metrics',\n        'get_realtime_dashboard',\n      ];\n\n      const result = await this.prisma.$queryRaw<{ routine_name: string }[]>`\n        SELECT routine_name \n        FROM information_schema.routines \n        WHERE routine_type = 'FUNCTION' \n        AND routine_name = ANY(ARRAY[${expectedProcedures.map(p => `'${p}'`).join(',')}])\n      `;\n\n      const availableProcedures = result.map(r => r.routine_name);\n      const missingProcedures = expectedProcedures.filter(\n        proc => !availableProcedures.includes(proc)\n      );\n\n      return {\n        available: missingProcedures.length === 0,\n        procedures: availableProcedures,\n        missing: missingProcedures,\n      };\n    } catch (error) {\n      logger.error('Error checking stored procedures health:', error);\n      return {\n        available: false,\n        procedures: [],\n        missing: [],\n      };\n    }\n  }\n\n  /**\n   * Install stored procedures from migration file\n   */\n  async installStoredProcedures(): Promise<void> {\n    try {\n      logger.info('Installing stored procedures...');\n\n      // This would typically be handled by a migration system\n      // For now, we'll just log that procedures should be installed manually\n      logger.warn('Stored procedures should be installed via migration system');\n      logger.info('Run the SQL file: prisma/migrations/001_create_metrics_procedures.sql');\n      \n    } catch (error) {\n      logger.error('Error installing stored procedures:', error);\n      throw new Error('Failed to install stored procedures');\n    }\n  }\n\n  /**\n   * Get performance statistics for stored procedures\n   */\n  async getPerformanceStats(): Promise<{\n    procedure_name: string;\n    calls: number;\n    total_time: number;\n    mean_time: number;\n  }[]> {\n    try {\n      // This requires pg_stat_statements extension\n      const result = await this.prisma.$queryRaw<{\n        procedure_name: string;\n        calls: number;\n        total_time: number;\n        mean_time: number;\n      }[]>`\n        SELECT \n          regexp_replace(query, '^SELECT \\* FROM (\\w+)\\(.*', '\\\\1') as procedure_name,\n          calls,\n          total_exec_time as total_time,\n          mean_exec_time as mean_time\n        FROM pg_stat_statements \n        WHERE query LIKE 'SELECT * FROM calculate_%' \n           OR query LIKE 'SELECT * FROM get_%'\n           OR query LIKE 'SELECT * FROM aggregate_%'\n           OR query LIKE 'SELECT * FROM cleanup_%'\n        ORDER BY calls DESC\n      `;\n\n      return result;\n    } catch (error) {\n      logger.warn('Performance stats not available (pg_stat_statements extension may not be enabled)');\n      return [];\n    }\n  }\n}\n\n// Singleton instance\nlet storedProceduresService: StoredProceduresService;\n\nexport const getStoredProceduresService = (prisma?: PrismaService): StoredProceduresService => {\n  if (!storedProceduresService) {\n    if (!prisma) {\n      throw new Error('PrismaService is required to initialize StoredProceduresService');\n    }\n    storedProceduresService = new StoredProceduresService(prisma);\n  }\n  return storedProceduresService;\n};"],
      version: 3
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "5d417cfb6c1300329489d8b5d7527f77b8a6c904"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_2m5wgvitkk = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_2m5wgvitkk();
cov_2m5wgvitkk().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
/* istanbul ignore next */
cov_2m5wgvitkk().s[1]++;
exports.getStoredProceduresService = exports.StoredProceduresService = void 0;
const logger_1 =
/* istanbul ignore next */
(cov_2m5wgvitkk().s[2]++, require("../utils/logger"));
class StoredProceduresService {
  prisma;
  constructor(prisma) {
    /* istanbul ignore next */
    cov_2m5wgvitkk().f[0]++;
    cov_2m5wgvitkk().s[3]++;
    this.prisma = prisma;
  }
  /**
   * Calculate KPI metrics using optimized stored procedure
   */
  async calculateKPIMetrics(organizationId, campaignIds, startDate, endDate) {
    /* istanbul ignore next */
    cov_2m5wgvitkk().f[1]++;
    cov_2m5wgvitkk().s[4]++;
    try {
      const start =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[5]++,
      /* istanbul ignore next */
      (cov_2m5wgvitkk().b[0][0]++, startDate) ||
      /* istanbul ignore next */
      (cov_2m5wgvitkk().b[0][1]++, new Date(Date.now() - 30 * 24 * 60 * 60 * 1000))); // Default: 30 days ago
      const end =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[6]++,
      /* istanbul ignore next */
      (cov_2m5wgvitkk().b[1][0]++, endDate) ||
      /* istanbul ignore next */
      (cov_2m5wgvitkk().b[1][1]++, new Date()));
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[7]++;
      logger_1.logger.debug('Executing calculate_kpi_metrics stored procedure', {
        organizationId,
        campaignIds,
        startDate: start,
        endDate: end
      });
      const result =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[8]++, await this.prisma.$queryRaw`
        SELECT * FROM calculate_kpi_metrics(
          ${organizationId}::uuid,
          ${campaignIds ?
      /* istanbul ignore next */
      (cov_2m5wgvitkk().b[2][0]++, `ARRAY[${campaignIds.map(id => {
        /* istanbul ignore next */
        cov_2m5wgvitkk().f[2]++;
        cov_2m5wgvitkk().s[9]++;
        return `'${id}'::uuid`;
      }).join(',')}]`) :
      /* istanbul ignore next */
      (cov_2m5wgvitkk().b[2][1]++, 'NULL')}::uuid[],
          ${start}::date,
          ${end}::date
        )
      `);
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[10]++;
      return /* istanbul ignore next */(cov_2m5wgvitkk().b[3][0]++, result[0]) ||
      /* istanbul ignore next */
      (cov_2m5wgvitkk().b[3][1]++, null);
    } catch (error) {
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[11]++;
      logger_1.logger.error('Error executing calculate_kpi_metrics stored procedure:', error);
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[12]++;
      throw new Error('Failed to calculate KPI metrics using stored procedure');
    }
  }
  /**
   * Get top performing campaigns using stored procedure
   */
  async getTopCampaigns(organizationId, startDate, endDate, limit =
  /* istanbul ignore next */
  (cov_2m5wgvitkk().b[4][0]++, 10)) {
    /* istanbul ignore next */
    cov_2m5wgvitkk().f[3]++;
    cov_2m5wgvitkk().s[13]++;
    try {
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[14]++;
      logger_1.logger.debug('Executing get_top_campaigns stored procedure', {
        organizationId,
        startDate,
        endDate,
        limit
      });
      const result =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[15]++, await this.prisma.$queryRaw`
        SELECT * FROM get_top_campaigns(
          ${organizationId}::uuid,
          ${startDate}::date,
          ${endDate}::date,
          ${limit}::integer
        )
      `);
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[16]++;
      return result;
    } catch (error) {
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[17]++;
      logger_1.logger.error('Error executing get_top_campaigns stored procedure:', error);
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[18]++;
      throw new Error('Failed to get top campaigns using stored procedure');
    }
  }
  /**
   * Calculate funnel metrics using stored procedure
   */
  async calculateFunnelMetrics(campaignId, startDate, endDate) {
    /* istanbul ignore next */
    cov_2m5wgvitkk().f[4]++;
    cov_2m5wgvitkk().s[19]++;
    try {
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[20]++;
      logger_1.logger.debug('Executing calculate_funnel_metrics stored procedure', {
        campaignId,
        startDate,
        endDate
      });
      const result =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[21]++, await this.prisma.$queryRaw`
        SELECT * FROM calculate_funnel_metrics(
          ${campaignId}::uuid,
          ${startDate}::date,
          ${endDate}::date
        )
      `);
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[22]++;
      return result;
    } catch (error) {
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[23]++;
      logger_1.logger.error('Error executing calculate_funnel_metrics stored procedure:', error);
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[24]++;
      throw new Error('Failed to calculate funnel metrics using stored procedure');
    }
  }
  /**
   * Get real-time dashboard metrics using stored procedure
   */
  async getRealtimeDashboard(organizationId, hoursBack =
  /* istanbul ignore next */
  (cov_2m5wgvitkk().b[5][0]++, 24)) {
    /* istanbul ignore next */
    cov_2m5wgvitkk().f[5]++;
    cov_2m5wgvitkk().s[25]++;
    try {
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[26]++;
      logger_1.logger.debug('Executing get_realtime_dashboard stored procedure', {
        organizationId,
        hoursBack
      });
      const result =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[27]++, await this.prisma.$queryRaw`
        SELECT * FROM get_realtime_dashboard(
          ${organizationId}::uuid,
          ${hoursBack}::integer
        )
      `);
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[28]++;
      return /* istanbul ignore next */(cov_2m5wgvitkk().b[6][0]++, result[0]) ||
      /* istanbul ignore next */
      (cov_2m5wgvitkk().b[6][1]++, null);
    } catch (error) {
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[29]++;
      logger_1.logger.error('Error executing get_realtime_dashboard stored procedure:', error);
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[30]++;
      throw new Error('Failed to get realtime dashboard using stored procedure');
    }
  }
  /**
   * Aggregate hourly metrics to daily using stored procedure
   */
  async aggregateHourlyToDaily(targetDate) {
    /* istanbul ignore next */
    cov_2m5wgvitkk().f[6]++;
    cov_2m5wgvitkk().s[31]++;
    try {
      const date =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[32]++,
      /* istanbul ignore next */
      (cov_2m5wgvitkk().b[7][0]++, targetDate) ||
      /* istanbul ignore next */
      (cov_2m5wgvitkk().b[7][1]++, new Date(Date.now() - 24 * 60 * 60 * 1000))); // Default: yesterday
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[33]++;
      logger_1.logger.debug('Executing aggregate_hourly_to_daily stored procedure', {
        targetDate: date
      });
      const result =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[34]++, await this.prisma.$queryRaw`
        SELECT aggregate_hourly_to_daily(${date}::date) as aggregate_hourly_to_daily
      `);
      const processedCount =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[35]++,
      /* istanbul ignore next */
      (cov_2m5wgvitkk().b[8][0]++, result[0]?.aggregate_hourly_to_daily) ||
      /* istanbul ignore next */
      (cov_2m5wgvitkk().b[8][1]++, 0));
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[36]++;
      logger_1.logger.info(`Aggregated ${processedCount} campaign metrics for date ${date.toISOString().split('T')[0]}`);
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[37]++;
      return processedCount;
    } catch (error) {
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[38]++;
      logger_1.logger.error('Error executing aggregate_hourly_to_daily stored procedure:', error);
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[39]++;
      throw new Error('Failed to aggregate hourly metrics using stored procedure');
    }
  }
  /**
   * Clean up old metrics data using stored procedure
   */
  async cleanupOldMetrics(retentionDays =
  /* istanbul ignore next */
  (cov_2m5wgvitkk().b[9][0]++, 90)) {
    /* istanbul ignore next */
    cov_2m5wgvitkk().f[7]++;
    cov_2m5wgvitkk().s[40]++;
    try {
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[41]++;
      logger_1.logger.debug('Executing cleanup_old_metrics stored procedure', {
        retentionDays
      });
      const result =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[42]++, await this.prisma.$queryRaw`
        SELECT cleanup_old_metrics(${retentionDays}::integer) as cleanup_old_metrics
      `);
      const deletedCount =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[43]++,
      /* istanbul ignore next */
      (cov_2m5wgvitkk().b[10][0]++, result[0]?.cleanup_old_metrics) ||
      /* istanbul ignore next */
      (cov_2m5wgvitkk().b[10][1]++, 0));
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[44]++;
      logger_1.logger.info(`Cleaned up ${deletedCount} old metric records with retention of ${retentionDays} days`);
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[45]++;
      return deletedCount;
    } catch (error) {
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[46]++;
      logger_1.logger.error('Error executing cleanup_old_metrics stored procedure:', error);
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[47]++;
      throw new Error('Failed to cleanup old metrics using stored procedure');
    }
  }
  /**
   * Execute custom SQL query with proper error handling
   */
  async executeCustomQuery(query, params =
  /* istanbul ignore next */
  (cov_2m5wgvitkk().b[11][0]++, [])) {
    /* istanbul ignore next */
    cov_2m5wgvitkk().f[8]++;
    cov_2m5wgvitkk().s[48]++;
    try {
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[49]++;
      logger_1.logger.debug('Executing custom SQL query', {
        query,
        params
      });
      const result =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[50]++, await this.prisma.$queryRawUnsafe(query, ...params));
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[51]++;
      return result;
    } catch (error) {
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[52]++;
      logger_1.logger.error('Error executing custom SQL query:', error);
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[53]++;
      throw new Error('Failed to execute custom SQL query');
    }
  }
  /**
   * Check if stored procedures are available
   */
  async checkStoredProceduresHealth() {
    /* istanbul ignore next */
    cov_2m5wgvitkk().f[9]++;
    cov_2m5wgvitkk().s[54]++;
    try {
      const expectedProcedures =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[55]++, ['calculate_kpi_metrics', 'get_top_campaigns', 'calculate_funnel_metrics', 'aggregate_hourly_to_daily', 'cleanup_old_metrics', 'get_realtime_dashboard']);
      const result =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[56]++, await this.prisma.$queryRaw`
        SELECT routine_name 
        FROM information_schema.routines 
        WHERE routine_type = 'FUNCTION' 
        AND routine_name = ANY(ARRAY[${expectedProcedures.map(p => {
        /* istanbul ignore next */
        cov_2m5wgvitkk().f[10]++;
        cov_2m5wgvitkk().s[57]++;
        return `'${p}'`;
      }).join(',')}])
      `);
      const availableProcedures =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[58]++, result.map(r => {
        /* istanbul ignore next */
        cov_2m5wgvitkk().f[11]++;
        cov_2m5wgvitkk().s[59]++;
        return r.routine_name;
      }));
      const missingProcedures =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[60]++, expectedProcedures.filter(proc => {
        /* istanbul ignore next */
        cov_2m5wgvitkk().f[12]++;
        cov_2m5wgvitkk().s[61]++;
        return !availableProcedures.includes(proc);
      }));
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[62]++;
      return {
        available: missingProcedures.length === 0,
        procedures: availableProcedures,
        missing: missingProcedures
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[63]++;
      logger_1.logger.error('Error checking stored procedures health:', error);
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[64]++;
      return {
        available: false,
        procedures: [],
        missing: []
      };
    }
  }
  /**
   * Install stored procedures from migration file
   */
  async installStoredProcedures() {
    /* istanbul ignore next */
    cov_2m5wgvitkk().f[13]++;
    cov_2m5wgvitkk().s[65]++;
    try {
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[66]++;
      logger_1.logger.info('Installing stored procedures...');
      // This would typically be handled by a migration system
      // For now, we'll just log that procedures should be installed manually
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[67]++;
      logger_1.logger.warn('Stored procedures should be installed via migration system');
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[68]++;
      logger_1.logger.info('Run the SQL file: prisma/migrations/001_create_metrics_procedures.sql');
    } catch (error) {
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[69]++;
      logger_1.logger.error('Error installing stored procedures:', error);
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[70]++;
      throw new Error('Failed to install stored procedures');
    }
  }
  /**
   * Get performance statistics for stored procedures
   */
  async getPerformanceStats() {
    /* istanbul ignore next */
    cov_2m5wgvitkk().f[14]++;
    cov_2m5wgvitkk().s[71]++;
    try {
      // This requires pg_stat_statements extension
      const result =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[72]++, await this.prisma.$queryRaw`
        SELECT 
          regexp_replace(query, '^SELECT \* FROM (\w+)\(.*', '\\1') as procedure_name,
          calls,
          total_exec_time as total_time,
          mean_exec_time as mean_time
        FROM pg_stat_statements 
        WHERE query LIKE 'SELECT * FROM calculate_%' 
           OR query LIKE 'SELECT * FROM get_%'
           OR query LIKE 'SELECT * FROM aggregate_%'
           OR query LIKE 'SELECT * FROM cleanup_%'
        ORDER BY calls DESC
      `);
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[73]++;
      return result;
    } catch (error) {
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[74]++;
      logger_1.logger.warn('Performance stats not available (pg_stat_statements extension may not be enabled)');
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[75]++;
      return [];
    }
  }
}
/* istanbul ignore next */
cov_2m5wgvitkk().s[76]++;
exports.StoredProceduresService = StoredProceduresService;
// Singleton instance
let storedProceduresService;
/* istanbul ignore next */
cov_2m5wgvitkk().s[77]++;
const getStoredProceduresService = prisma => {
  /* istanbul ignore next */
  cov_2m5wgvitkk().f[15]++;
  cov_2m5wgvitkk().s[78]++;
  if (!storedProceduresService) {
    /* istanbul ignore next */
    cov_2m5wgvitkk().b[12][0]++;
    cov_2m5wgvitkk().s[79]++;
    if (!prisma) {
      /* istanbul ignore next */
      cov_2m5wgvitkk().b[13][0]++;
      cov_2m5wgvitkk().s[80]++;
      throw new Error('PrismaService is required to initialize StoredProceduresService');
    } else
    /* istanbul ignore next */
    {
      cov_2m5wgvitkk().b[13][1]++;
    }
    cov_2m5wgvitkk().s[81]++;
    storedProceduresService = new StoredProceduresService(prisma);
  } else
  /* istanbul ignore next */
  {
    cov_2m5wgvitkk().b[12][1]++;
  }
  cov_2m5wgvitkk().s[82]++;
  return storedProceduresService;
};
/* istanbul ignore next */
cov_2m5wgvitkk().s[83]++;
exports.getStoredProceduresService = getStoredProceduresService;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMm01d2d2aXRrayIsImFjdHVhbENvdmVyYWdlIiwicyIsImxvZ2dlcl8xIiwicmVxdWlyZSIsIlN0b3JlZFByb2NlZHVyZXNTZXJ2aWNlIiwicHJpc21hIiwiY29uc3RydWN0b3IiLCJmIiwiY2FsY3VsYXRlS1BJTWV0cmljcyIsIm9yZ2FuaXphdGlvbklkIiwiY2FtcGFpZ25JZHMiLCJzdGFydERhdGUiLCJlbmREYXRlIiwic3RhcnQiLCJiIiwiRGF0ZSIsIm5vdyIsImVuZCIsImxvZ2dlciIsImRlYnVnIiwicmVzdWx0IiwiJHF1ZXJ5UmF3IiwibWFwIiwiaWQiLCJqb2luIiwiZXJyb3IiLCJFcnJvciIsImdldFRvcENhbXBhaWducyIsImxpbWl0IiwiY2FsY3VsYXRlRnVubmVsTWV0cmljcyIsImNhbXBhaWduSWQiLCJnZXRSZWFsdGltZURhc2hib2FyZCIsImhvdXJzQmFjayIsImFnZ3JlZ2F0ZUhvdXJseVRvRGFpbHkiLCJ0YXJnZXREYXRlIiwiZGF0ZSIsInByb2Nlc3NlZENvdW50IiwiYWdncmVnYXRlX2hvdXJseV90b19kYWlseSIsImluZm8iLCJ0b0lTT1N0cmluZyIsInNwbGl0IiwiY2xlYW51cE9sZE1ldHJpY3MiLCJyZXRlbnRpb25EYXlzIiwiZGVsZXRlZENvdW50IiwiY2xlYW51cF9vbGRfbWV0cmljcyIsImV4ZWN1dGVDdXN0b21RdWVyeSIsInF1ZXJ5IiwicGFyYW1zIiwiJHF1ZXJ5UmF3VW5zYWZlIiwiY2hlY2tTdG9yZWRQcm9jZWR1cmVzSGVhbHRoIiwiZXhwZWN0ZWRQcm9jZWR1cmVzIiwicCIsImF2YWlsYWJsZVByb2NlZHVyZXMiLCJyIiwicm91dGluZV9uYW1lIiwibWlzc2luZ1Byb2NlZHVyZXMiLCJmaWx0ZXIiLCJwcm9jIiwiaW5jbHVkZXMiLCJhdmFpbGFibGUiLCJsZW5ndGgiLCJwcm9jZWR1cmVzIiwibWlzc2luZyIsImluc3RhbGxTdG9yZWRQcm9jZWR1cmVzIiwid2FybiIsImdldFBlcmZvcm1hbmNlU3RhdHMiLCJleHBvcnRzIiwic3RvcmVkUHJvY2VkdXJlc1NlcnZpY2UiLCJnZXRTdG9yZWRQcm9jZWR1cmVzU2VydmljZSJdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcRW56byBNYXJjZWxvXFxEZXNrdG9wXFxQcm9qZXRvcyBFbXByZXNhXFxTYWFzIFV0bWlmeVxcdXRtaWZ5LWNsb25lXFxhcHBzXFxhcGlcXHNyY1xcc2VydmljZXNcXHN0b3JlZC1wcm9jZWR1cmVzLnNlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hU2VydmljZSB9IGZyb20gJy4uL2RhdGFiYXNlL3ByaXNtYS5zZXJ2aWNlJztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uL3V0aWxzL2xvZ2dlcic7XG5cbi8vIEludGVyZmFjZXMgZm9yIHN0b3JlZCBwcm9jZWR1cmUgcmVzdWx0c1xuZXhwb3J0IGludGVyZmFjZSBTdG9yZWRQcm9jZWR1cmVLUElSZXN1bHQge1xuICByZXZlbnVlOiBudW1iZXI7XG4gIGFkX3NwZW5kOiBudW1iZXI7XG4gIGltcHJlc3Npb25zOiBudW1iZXI7XG4gIGNsaWNrczogbnVtYmVyO1xuICBjb252ZXJzaW9uczogbnVtYmVyO1xuICByb2FzOiBudW1iZXI7XG4gIHJvaTogbnVtYmVyO1xuICBjcGM6IG51bWJlcjtcbiAgY3BtOiBudW1iZXI7XG4gIGNhYzogbnVtYmVyO1xuICBjdHI6IG51bWJlcjtcbiAgY29udmVyc2lvbl9yYXRlOiBudW1iZXI7XG4gIGFycHU6IG51bWJlcjtcbiAgbHR2OiBudW1iZXI7XG4gIG1hcmdpbjogbnVtYmVyO1xuICBwcm9maXQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUb3BDYW1wYWlnblJlc3VsdCB7XG4gIGNhbXBhaWduX2lkOiBzdHJpbmc7XG4gIGNhbXBhaWduX25hbWU6IHN0cmluZztcbiAgcmV2ZW51ZTogbnVtYmVyO1xuICBhZF9zcGVuZDogbnVtYmVyO1xuICByb2FzOiBudW1iZXI7XG4gIGNvbnZlcnNpb25zOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRnVubmVsTWV0cmljUmVzdWx0IHtcbiAgc3RhZ2VfbmFtZTogc3RyaW5nO1xuICBzdGFnZV9vcmRlcjogbnVtYmVyO1xuICB1c2VyczogbnVtYmVyO1xuICBjb252ZXJzaW9uX3JhdGU6IG51bWJlcjtcbiAgZHJvcG9mZl9yYXRlOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVhbHRpbWVEYXNoYm9hcmRSZXN1bHQge1xuICB0b3RhbF9pbXByZXNzaW9uczogbnVtYmVyO1xuICB0b3RhbF9jbGlja3M6IG51bWJlcjtcbiAgdG90YWxfY29udmVyc2lvbnM6IG51bWJlcjtcbiAgdG90YWxfcmV2ZW51ZTogbnVtYmVyO1xuICB0b3RhbF9hZF9zcGVuZDogbnVtYmVyO1xuICBhdmdfY3RyOiBudW1iZXI7XG4gIGF2Z19jb252ZXJzaW9uX3JhdGU6IG51bWJlcjtcbiAgY3VycmVudF9yb2FzOiBudW1iZXI7XG59XG5cbmV4cG9ydCBjbGFzcyBTdG9yZWRQcm9jZWR1cmVzU2VydmljZSB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcHJpc21hOiBQcmlzbWFTZXJ2aWNlKSB7fVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgS1BJIG1ldHJpY3MgdXNpbmcgb3B0aW1pemVkIHN0b3JlZCBwcm9jZWR1cmVcbiAgICovXG4gIGFzeW5jIGNhbGN1bGF0ZUtQSU1ldHJpY3MoXG4gICAgb3JnYW5pemF0aW9uSWQ6IHN0cmluZyxcbiAgICBjYW1wYWlnbklkcz86IHN0cmluZ1tdLFxuICAgIHN0YXJ0RGF0ZT86IERhdGUsXG4gICAgZW5kRGF0ZT86IERhdGVcbiAgKTogUHJvbWlzZTxTdG9yZWRQcm9jZWR1cmVLUElSZXN1bHQgfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0YXJ0ID0gc3RhcnREYXRlIHx8IG5ldyBEYXRlKERhdGUubm93KCkgLSAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApOyAvLyBEZWZhdWx0OiAzMCBkYXlzIGFnb1xuICAgICAgY29uc3QgZW5kID0gZW5kRGF0ZSB8fCBuZXcgRGF0ZSgpO1xuXG4gICAgICBsb2dnZXIuZGVidWcoJ0V4ZWN1dGluZyBjYWxjdWxhdGVfa3BpX21ldHJpY3Mgc3RvcmVkIHByb2NlZHVyZScsIHtcbiAgICAgICAgb3JnYW5pemF0aW9uSWQsXG4gICAgICAgIGNhbXBhaWduSWRzLFxuICAgICAgICBzdGFydERhdGU6IHN0YXJ0LFxuICAgICAgICBlbmREYXRlOiBlbmQsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5wcmlzbWEuJHF1ZXJ5UmF3PFN0b3JlZFByb2NlZHVyZUtQSVJlc3VsdFtdPmBcbiAgICAgICAgU0VMRUNUICogRlJPTSBjYWxjdWxhdGVfa3BpX21ldHJpY3MoXG4gICAgICAgICAgJHtvcmdhbml6YXRpb25JZH06OnV1aWQsXG4gICAgICAgICAgJHtjYW1wYWlnbklkcyA/IGBBUlJBWVske2NhbXBhaWduSWRzLm1hcChpZCA9PiBgJyR7aWR9Jzo6dXVpZGApLmpvaW4oJywnKX1dYCA6ICdOVUxMJ306OnV1aWRbXSxcbiAgICAgICAgICAke3N0YXJ0fTo6ZGF0ZSxcbiAgICAgICAgICAke2VuZH06OmRhdGVcbiAgICAgICAgKVxuICAgICAgYDtcblxuICAgICAgcmV0dXJuIHJlc3VsdFswXSB8fCBudWxsO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGV4ZWN1dGluZyBjYWxjdWxhdGVfa3BpX21ldHJpY3Mgc3RvcmVkIHByb2NlZHVyZTonLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBjYWxjdWxhdGUgS1BJIG1ldHJpY3MgdXNpbmcgc3RvcmVkIHByb2NlZHVyZScpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdG9wIHBlcmZvcm1pbmcgY2FtcGFpZ25zIHVzaW5nIHN0b3JlZCBwcm9jZWR1cmVcbiAgICovXG4gIGFzeW5jIGdldFRvcENhbXBhaWducyhcbiAgICBvcmdhbml6YXRpb25JZDogc3RyaW5nLFxuICAgIHN0YXJ0RGF0ZTogRGF0ZSxcbiAgICBlbmREYXRlOiBEYXRlLFxuICAgIGxpbWl0OiBudW1iZXIgPSAxMFxuICApOiBQcm9taXNlPFRvcENhbXBhaWduUmVzdWx0W10+IHtcbiAgICB0cnkge1xuICAgICAgbG9nZ2VyLmRlYnVnKCdFeGVjdXRpbmcgZ2V0X3RvcF9jYW1wYWlnbnMgc3RvcmVkIHByb2NlZHVyZScsIHtcbiAgICAgICAgb3JnYW5pemF0aW9uSWQsXG4gICAgICAgIHN0YXJ0RGF0ZSxcbiAgICAgICAgZW5kRGF0ZSxcbiAgICAgICAgbGltaXQsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5wcmlzbWEuJHF1ZXJ5UmF3PFRvcENhbXBhaWduUmVzdWx0W10+YFxuICAgICAgICBTRUxFQ1QgKiBGUk9NIGdldF90b3BfY2FtcGFpZ25zKFxuICAgICAgICAgICR7b3JnYW5pemF0aW9uSWR9Ojp1dWlkLFxuICAgICAgICAgICR7c3RhcnREYXRlfTo6ZGF0ZSxcbiAgICAgICAgICAke2VuZERhdGV9OjpkYXRlLFxuICAgICAgICAgICR7bGltaXR9OjppbnRlZ2VyXG4gICAgICAgIClcbiAgICAgIGA7XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZXhlY3V0aW5nIGdldF90b3BfY2FtcGFpZ25zIHN0b3JlZCBwcm9jZWR1cmU6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZ2V0IHRvcCBjYW1wYWlnbnMgdXNpbmcgc3RvcmVkIHByb2NlZHVyZScpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgZnVubmVsIG1ldHJpY3MgdXNpbmcgc3RvcmVkIHByb2NlZHVyZVxuICAgKi9cbiAgYXN5bmMgY2FsY3VsYXRlRnVubmVsTWV0cmljcyhcbiAgICBjYW1wYWlnbklkOiBzdHJpbmcsXG4gICAgc3RhcnREYXRlOiBEYXRlLFxuICAgIGVuZERhdGU6IERhdGVcbiAgKTogUHJvbWlzZTxGdW5uZWxNZXRyaWNSZXN1bHRbXT4ge1xuICAgIHRyeSB7XG4gICAgICBsb2dnZXIuZGVidWcoJ0V4ZWN1dGluZyBjYWxjdWxhdGVfZnVubmVsX21ldHJpY3Mgc3RvcmVkIHByb2NlZHVyZScsIHtcbiAgICAgICAgY2FtcGFpZ25JZCxcbiAgICAgICAgc3RhcnREYXRlLFxuICAgICAgICBlbmREYXRlLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucHJpc21hLiRxdWVyeVJhdzxGdW5uZWxNZXRyaWNSZXN1bHRbXT5gXG4gICAgICAgIFNFTEVDVCAqIEZST00gY2FsY3VsYXRlX2Z1bm5lbF9tZXRyaWNzKFxuICAgICAgICAgICR7Y2FtcGFpZ25JZH06OnV1aWQsXG4gICAgICAgICAgJHtzdGFydERhdGV9OjpkYXRlLFxuICAgICAgICAgICR7ZW5kRGF0ZX06OmRhdGVcbiAgICAgICAgKVxuICAgICAgYDtcblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBleGVjdXRpbmcgY2FsY3VsYXRlX2Z1bm5lbF9tZXRyaWNzIHN0b3JlZCBwcm9jZWR1cmU6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gY2FsY3VsYXRlIGZ1bm5lbCBtZXRyaWNzIHVzaW5nIHN0b3JlZCBwcm9jZWR1cmUnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHJlYWwtdGltZSBkYXNoYm9hcmQgbWV0cmljcyB1c2luZyBzdG9yZWQgcHJvY2VkdXJlXG4gICAqL1xuICBhc3luYyBnZXRSZWFsdGltZURhc2hib2FyZChcbiAgICBvcmdhbml6YXRpb25JZDogc3RyaW5nLFxuICAgIGhvdXJzQmFjazogbnVtYmVyID0gMjRcbiAgKTogUHJvbWlzZTxSZWFsdGltZURhc2hib2FyZFJlc3VsdCB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgbG9nZ2VyLmRlYnVnKCdFeGVjdXRpbmcgZ2V0X3JlYWx0aW1lX2Rhc2hib2FyZCBzdG9yZWQgcHJvY2VkdXJlJywge1xuICAgICAgICBvcmdhbml6YXRpb25JZCxcbiAgICAgICAgaG91cnNCYWNrLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucHJpc21hLiRxdWVyeVJhdzxSZWFsdGltZURhc2hib2FyZFJlc3VsdFtdPmBcbiAgICAgICAgU0VMRUNUICogRlJPTSBnZXRfcmVhbHRpbWVfZGFzaGJvYXJkKFxuICAgICAgICAgICR7b3JnYW5pemF0aW9uSWR9Ojp1dWlkLFxuICAgICAgICAgICR7aG91cnNCYWNrfTo6aW50ZWdlclxuICAgICAgICApXG4gICAgICBgO1xuXG4gICAgICByZXR1cm4gcmVzdWx0WzBdIHx8IG51bGw7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZXhlY3V0aW5nIGdldF9yZWFsdGltZV9kYXNoYm9hcmQgc3RvcmVkIHByb2NlZHVyZTonLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBnZXQgcmVhbHRpbWUgZGFzaGJvYXJkIHVzaW5nIHN0b3JlZCBwcm9jZWR1cmUnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWdncmVnYXRlIGhvdXJseSBtZXRyaWNzIHRvIGRhaWx5IHVzaW5nIHN0b3JlZCBwcm9jZWR1cmVcbiAgICovXG4gIGFzeW5jIGFnZ3JlZ2F0ZUhvdXJseVRvRGFpbHkodGFyZ2V0RGF0ZT86IERhdGUpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkYXRlID0gdGFyZ2V0RGF0ZSB8fCBuZXcgRGF0ZShEYXRlLm5vdygpIC0gMjQgKiA2MCAqIDYwICogMTAwMCk7IC8vIERlZmF1bHQ6IHllc3RlcmRheVxuXG4gICAgICBsb2dnZXIuZGVidWcoJ0V4ZWN1dGluZyBhZ2dyZWdhdGVfaG91cmx5X3RvX2RhaWx5IHN0b3JlZCBwcm9jZWR1cmUnLCB7XG4gICAgICAgIHRhcmdldERhdGU6IGRhdGUsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5wcmlzbWEuJHF1ZXJ5UmF3PHsgYWdncmVnYXRlX2hvdXJseV90b19kYWlseTogbnVtYmVyIH1bXT5gXG4gICAgICAgIFNFTEVDVCBhZ2dyZWdhdGVfaG91cmx5X3RvX2RhaWx5KCR7ZGF0ZX06OmRhdGUpIGFzIGFnZ3JlZ2F0ZV9ob3VybHlfdG9fZGFpbHlcbiAgICAgIGA7XG5cbiAgICAgIGNvbnN0IHByb2Nlc3NlZENvdW50ID0gcmVzdWx0WzBdPy5hZ2dyZWdhdGVfaG91cmx5X3RvX2RhaWx5IHx8IDA7XG4gICAgICBcbiAgICAgIGxvZ2dlci5pbmZvKGBBZ2dyZWdhdGVkICR7cHJvY2Vzc2VkQ291bnR9IGNhbXBhaWduIG1ldHJpY3MgZm9yIGRhdGUgJHtkYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXX1gKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHByb2Nlc3NlZENvdW50O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGV4ZWN1dGluZyBhZ2dyZWdhdGVfaG91cmx5X3RvX2RhaWx5IHN0b3JlZCBwcm9jZWR1cmU6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gYWdncmVnYXRlIGhvdXJseSBtZXRyaWNzIHVzaW5nIHN0b3JlZCBwcm9jZWR1cmUnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW4gdXAgb2xkIG1ldHJpY3MgZGF0YSB1c2luZyBzdG9yZWQgcHJvY2VkdXJlXG4gICAqL1xuICBhc3luYyBjbGVhbnVwT2xkTWV0cmljcyhyZXRlbnRpb25EYXlzOiBudW1iZXIgPSA5MCk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgdHJ5IHtcbiAgICAgIGxvZ2dlci5kZWJ1ZygnRXhlY3V0aW5nIGNsZWFudXBfb2xkX21ldHJpY3Mgc3RvcmVkIHByb2NlZHVyZScsIHtcbiAgICAgICAgcmV0ZW50aW9uRGF5cyxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnByaXNtYS4kcXVlcnlSYXc8eyBjbGVhbnVwX29sZF9tZXRyaWNzOiBudW1iZXIgfVtdPmBcbiAgICAgICAgU0VMRUNUIGNsZWFudXBfb2xkX21ldHJpY3MoJHtyZXRlbnRpb25EYXlzfTo6aW50ZWdlcikgYXMgY2xlYW51cF9vbGRfbWV0cmljc1xuICAgICAgYDtcblxuICAgICAgY29uc3QgZGVsZXRlZENvdW50ID0gcmVzdWx0WzBdPy5jbGVhbnVwX29sZF9tZXRyaWNzIHx8IDA7XG4gICAgICBcbiAgICAgIGxvZ2dlci5pbmZvKGBDbGVhbmVkIHVwICR7ZGVsZXRlZENvdW50fSBvbGQgbWV0cmljIHJlY29yZHMgd2l0aCByZXRlbnRpb24gb2YgJHtyZXRlbnRpb25EYXlzfSBkYXlzYCk7XG4gICAgICBcbiAgICAgIHJldHVybiBkZWxldGVkQ291bnQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZXhlY3V0aW5nIGNsZWFudXBfb2xkX21ldHJpY3Mgc3RvcmVkIHByb2NlZHVyZTonLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBjbGVhbnVwIG9sZCBtZXRyaWNzIHVzaW5nIHN0b3JlZCBwcm9jZWR1cmUnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBjdXN0b20gU1FMIHF1ZXJ5IHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nXG4gICAqL1xuICBhc3luYyBleGVjdXRlQ3VzdG9tUXVlcnk8VCA9IGFueT4ocXVlcnk6IHN0cmluZywgcGFyYW1zOiBhbnlbXSA9IFtdKTogUHJvbWlzZTxUW10+IHtcbiAgICB0cnkge1xuICAgICAgbG9nZ2VyLmRlYnVnKCdFeGVjdXRpbmcgY3VzdG9tIFNRTCBxdWVyeScsIHsgcXVlcnksIHBhcmFtcyB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5wcmlzbWEuJHF1ZXJ5UmF3VW5zYWZlPFRbXT4ocXVlcnksIC4uLnBhcmFtcyk7XG4gICAgICBcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZXhlY3V0aW5nIGN1c3RvbSBTUUwgcXVlcnk6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZXhlY3V0ZSBjdXN0b20gU1FMIHF1ZXJ5Jyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHN0b3JlZCBwcm9jZWR1cmVzIGFyZSBhdmFpbGFibGVcbiAgICovXG4gIGFzeW5jIGNoZWNrU3RvcmVkUHJvY2VkdXJlc0hlYWx0aCgpOiBQcm9taXNlPHtcbiAgICBhdmFpbGFibGU6IGJvb2xlYW47XG4gICAgcHJvY2VkdXJlczogc3RyaW5nW107XG4gICAgbWlzc2luZzogc3RyaW5nW107XG4gIH0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZXhwZWN0ZWRQcm9jZWR1cmVzID0gW1xuICAgICAgICAnY2FsY3VsYXRlX2twaV9tZXRyaWNzJyxcbiAgICAgICAgJ2dldF90b3BfY2FtcGFpZ25zJyxcbiAgICAgICAgJ2NhbGN1bGF0ZV9mdW5uZWxfbWV0cmljcycsXG4gICAgICAgICdhZ2dyZWdhdGVfaG91cmx5X3RvX2RhaWx5JyxcbiAgICAgICAgJ2NsZWFudXBfb2xkX21ldHJpY3MnLFxuICAgICAgICAnZ2V0X3JlYWx0aW1lX2Rhc2hib2FyZCcsXG4gICAgICBdO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnByaXNtYS4kcXVlcnlSYXc8eyByb3V0aW5lX25hbWU6IHN0cmluZyB9W10+YFxuICAgICAgICBTRUxFQ1Qgcm91dGluZV9uYW1lIFxuICAgICAgICBGUk9NIGluZm9ybWF0aW9uX3NjaGVtYS5yb3V0aW5lcyBcbiAgICAgICAgV0hFUkUgcm91dGluZV90eXBlID0gJ0ZVTkNUSU9OJyBcbiAgICAgICAgQU5EIHJvdXRpbmVfbmFtZSA9IEFOWShBUlJBWVske2V4cGVjdGVkUHJvY2VkdXJlcy5tYXAocCA9PiBgJyR7cH0nYCkuam9pbignLCcpfV0pXG4gICAgICBgO1xuXG4gICAgICBjb25zdCBhdmFpbGFibGVQcm9jZWR1cmVzID0gcmVzdWx0Lm1hcChyID0+IHIucm91dGluZV9uYW1lKTtcbiAgICAgIGNvbnN0IG1pc3NpbmdQcm9jZWR1cmVzID0gZXhwZWN0ZWRQcm9jZWR1cmVzLmZpbHRlcihcbiAgICAgICAgcHJvYyA9PiAhYXZhaWxhYmxlUHJvY2VkdXJlcy5pbmNsdWRlcyhwcm9jKVxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYXZhaWxhYmxlOiBtaXNzaW5nUHJvY2VkdXJlcy5sZW5ndGggPT09IDAsXG4gICAgICAgIHByb2NlZHVyZXM6IGF2YWlsYWJsZVByb2NlZHVyZXMsXG4gICAgICAgIG1pc3Npbmc6IG1pc3NpbmdQcm9jZWR1cmVzLFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBjaGVja2luZyBzdG9yZWQgcHJvY2VkdXJlcyBoZWFsdGg6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYXZhaWxhYmxlOiBmYWxzZSxcbiAgICAgICAgcHJvY2VkdXJlczogW10sXG4gICAgICAgIG1pc3Npbmc6IFtdLFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSW5zdGFsbCBzdG9yZWQgcHJvY2VkdXJlcyBmcm9tIG1pZ3JhdGlvbiBmaWxlXG4gICAqL1xuICBhc3luYyBpbnN0YWxsU3RvcmVkUHJvY2VkdXJlcygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgbG9nZ2VyLmluZm8oJ0luc3RhbGxpbmcgc3RvcmVkIHByb2NlZHVyZXMuLi4nKTtcblxuICAgICAgLy8gVGhpcyB3b3VsZCB0eXBpY2FsbHkgYmUgaGFuZGxlZCBieSBhIG1pZ3JhdGlvbiBzeXN0ZW1cbiAgICAgIC8vIEZvciBub3csIHdlJ2xsIGp1c3QgbG9nIHRoYXQgcHJvY2VkdXJlcyBzaG91bGQgYmUgaW5zdGFsbGVkIG1hbnVhbGx5XG4gICAgICBsb2dnZXIud2FybignU3RvcmVkIHByb2NlZHVyZXMgc2hvdWxkIGJlIGluc3RhbGxlZCB2aWEgbWlncmF0aW9uIHN5c3RlbScpO1xuICAgICAgbG9nZ2VyLmluZm8oJ1J1biB0aGUgU1FMIGZpbGU6IHByaXNtYS9taWdyYXRpb25zLzAwMV9jcmVhdGVfbWV0cmljc19wcm9jZWR1cmVzLnNxbCcpO1xuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgaW5zdGFsbGluZyBzdG9yZWQgcHJvY2VkdXJlczonLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBpbnN0YWxsIHN0b3JlZCBwcm9jZWR1cmVzJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBwZXJmb3JtYW5jZSBzdGF0aXN0aWNzIGZvciBzdG9yZWQgcHJvY2VkdXJlc1xuICAgKi9cbiAgYXN5bmMgZ2V0UGVyZm9ybWFuY2VTdGF0cygpOiBQcm9taXNlPHtcbiAgICBwcm9jZWR1cmVfbmFtZTogc3RyaW5nO1xuICAgIGNhbGxzOiBudW1iZXI7XG4gICAgdG90YWxfdGltZTogbnVtYmVyO1xuICAgIG1lYW5fdGltZTogbnVtYmVyO1xuICB9W10+IHtcbiAgICB0cnkge1xuICAgICAgLy8gVGhpcyByZXF1aXJlcyBwZ19zdGF0X3N0YXRlbWVudHMgZXh0ZW5zaW9uXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnByaXNtYS4kcXVlcnlSYXc8e1xuICAgICAgICBwcm9jZWR1cmVfbmFtZTogc3RyaW5nO1xuICAgICAgICBjYWxsczogbnVtYmVyO1xuICAgICAgICB0b3RhbF90aW1lOiBudW1iZXI7XG4gICAgICAgIG1lYW5fdGltZTogbnVtYmVyO1xuICAgICAgfVtdPmBcbiAgICAgICAgU0VMRUNUIFxuICAgICAgICAgIHJlZ2V4cF9yZXBsYWNlKHF1ZXJ5LCAnXlNFTEVDVCBcXCogRlJPTSAoXFx3KylcXCguKicsICdcXFxcMScpIGFzIHByb2NlZHVyZV9uYW1lLFxuICAgICAgICAgIGNhbGxzLFxuICAgICAgICAgIHRvdGFsX2V4ZWNfdGltZSBhcyB0b3RhbF90aW1lLFxuICAgICAgICAgIG1lYW5fZXhlY190aW1lIGFzIG1lYW5fdGltZVxuICAgICAgICBGUk9NIHBnX3N0YXRfc3RhdGVtZW50cyBcbiAgICAgICAgV0hFUkUgcXVlcnkgTElLRSAnU0VMRUNUICogRlJPTSBjYWxjdWxhdGVfJScgXG4gICAgICAgICAgIE9SIHF1ZXJ5IExJS0UgJ1NFTEVDVCAqIEZST00gZ2V0XyUnXG4gICAgICAgICAgIE9SIHF1ZXJ5IExJS0UgJ1NFTEVDVCAqIEZST00gYWdncmVnYXRlXyUnXG4gICAgICAgICAgIE9SIHF1ZXJ5IExJS0UgJ1NFTEVDVCAqIEZST00gY2xlYW51cF8lJ1xuICAgICAgICBPUkRFUiBCWSBjYWxscyBERVNDXG4gICAgICBgO1xuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIud2FybignUGVyZm9ybWFuY2Ugc3RhdHMgbm90IGF2YWlsYWJsZSAocGdfc3RhdF9zdGF0ZW1lbnRzIGV4dGVuc2lvbiBtYXkgbm90IGJlIGVuYWJsZWQpJyk7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG59XG5cbi8vIFNpbmdsZXRvbiBpbnN0YW5jZVxubGV0IHN0b3JlZFByb2NlZHVyZXNTZXJ2aWNlOiBTdG9yZWRQcm9jZWR1cmVzU2VydmljZTtcblxuZXhwb3J0IGNvbnN0IGdldFN0b3JlZFByb2NlZHVyZXNTZXJ2aWNlID0gKHByaXNtYT86IFByaXNtYVNlcnZpY2UpOiBTdG9yZWRQcm9jZWR1cmVzU2VydmljZSA9PiB7XG4gIGlmICghc3RvcmVkUHJvY2VkdXJlc1NlcnZpY2UpIHtcbiAgICBpZiAoIXByaXNtYSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdQcmlzbWFTZXJ2aWNlIGlzIHJlcXVpcmVkIHRvIGluaXRpYWxpemUgU3RvcmVkUHJvY2VkdXJlc1NlcnZpY2UnKTtcbiAgICB9XG4gICAgc3RvcmVkUHJvY2VkdXJlc1NlcnZpY2UgPSBuZXcgU3RvcmVkUHJvY2VkdXJlc1NlcnZpY2UocHJpc21hKTtcbiAgfVxuICByZXR1cm4gc3RvcmVkUHJvY2VkdXJlc1NlcnZpY2U7XG59OyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBaUVNO0lBQUFBLGNBQUEsWUFBQUEsQ0FBQTtNQUFBLE9BQUFDLGNBQUE7SUFBQTtFQUFBO0VBQUEsT0FBQUEsY0FBQTtBQUFBO0FBQUFELGNBQUE7QUFBQUEsY0FBQSxHQUFBRSxDQUFBOzs7Ozs7O0FBaEVOLE1BQUFDLFFBQUE7QUFBQTtBQUFBLENBQUFILGNBQUEsR0FBQUUsQ0FBQSxPQUFBRSxPQUFBO0FBa0RBLE1BQWFDLHVCQUF1QjtFQUNkQyxNQUFBO0VBQXBCQyxZQUFvQkQsTUFBcUI7SUFBQTtJQUFBTixjQUFBLEdBQUFRLENBQUE7SUFBQVIsY0FBQSxHQUFBRSxDQUFBO0lBQXJCLEtBQUFJLE1BQU0sR0FBTkEsTUFBTTtFQUFrQjtFQUU1Qzs7O0VBR0EsTUFBTUcsbUJBQW1CQSxDQUN2QkMsY0FBc0IsRUFDdEJDLFdBQXNCLEVBQ3RCQyxTQUFnQixFQUNoQkMsT0FBYztJQUFBO0lBQUFiLGNBQUEsR0FBQVEsQ0FBQTtJQUFBUixjQUFBLEdBQUFFLENBQUE7SUFFZCxJQUFJO01BQ0YsTUFBTVksS0FBSztNQUFBO01BQUEsQ0FBQWQsY0FBQSxHQUFBRSxDQUFBO01BQUc7TUFBQSxDQUFBRixjQUFBLEdBQUFlLENBQUEsVUFBQUgsU0FBUztNQUFBO01BQUEsQ0FBQVosY0FBQSxHQUFBZSxDQUFBLFVBQUksSUFBSUMsSUFBSSxDQUFDQSxJQUFJLENBQUNDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsR0FBQyxDQUFDO01BQzVFLE1BQU1DLEdBQUc7TUFBQTtNQUFBLENBQUFsQixjQUFBLEdBQUFFLENBQUE7TUFBRztNQUFBLENBQUFGLGNBQUEsR0FBQWUsQ0FBQSxVQUFBRixPQUFPO01BQUE7TUFBQSxDQUFBYixjQUFBLEdBQUFlLENBQUEsVUFBSSxJQUFJQyxJQUFJLEVBQUU7TUFBQztNQUFBaEIsY0FBQSxHQUFBRSxDQUFBO01BRWxDQyxRQUFBLENBQUFnQixNQUFNLENBQUNDLEtBQUssQ0FBQyxrREFBa0QsRUFBRTtRQUMvRFYsY0FBYztRQUNkQyxXQUFXO1FBQ1hDLFNBQVMsRUFBRUUsS0FBSztRQUNoQkQsT0FBTyxFQUFFSztPQUNWLENBQUM7TUFFRixNQUFNRyxNQUFNO01BQUE7TUFBQSxDQUFBckIsY0FBQSxHQUFBRSxDQUFBLE9BQUcsTUFBTSxJQUFJLENBQUNJLE1BQU0sQ0FBQ2dCLFNBQXFDOztZQUVoRVosY0FBYztZQUNkQyxXQUFXO01BQUE7TUFBQSxDQUFBWCxjQUFBLEdBQUFlLENBQUEsVUFBRyxTQUFTSixXQUFXLENBQUNZLEdBQUcsQ0FBQ0MsRUFBRSxJQUFJO1FBQUE7UUFBQXhCLGNBQUEsR0FBQVEsQ0FBQTtRQUFBUixjQUFBLEdBQUFFLENBQUE7UUFBQSxXQUFJc0IsRUFBRSxTQUFTO01BQVQsQ0FBUyxDQUFDLENBQUNDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRztNQUFBO01BQUEsQ0FBQXpCLGNBQUEsR0FBQWUsQ0FBQSxVQUFHLE1BQU07WUFDbkZELEtBQUs7WUFDTEksR0FBRzs7T0FFUjtNQUFDO01BQUFsQixjQUFBLEdBQUFFLENBQUE7TUFFRixPQUFPLDJCQUFBRixjQUFBLEdBQUFlLENBQUEsVUFBQU0sTUFBTSxDQUFDLENBQUMsQ0FBQztNQUFBO01BQUEsQ0FBQXJCLGNBQUEsR0FBQWUsQ0FBQSxVQUFJLElBQUk7SUFDMUIsQ0FBQyxDQUFDLE9BQU9XLEtBQUssRUFBRTtNQUFBO01BQUExQixjQUFBLEdBQUFFLENBQUE7TUFDZEMsUUFBQSxDQUFBZ0IsTUFBTSxDQUFDTyxLQUFLLENBQUMseURBQXlELEVBQUVBLEtBQUssQ0FBQztNQUFDO01BQUExQixjQUFBLEdBQUFFLENBQUE7TUFDL0UsTUFBTSxJQUFJeUIsS0FBSyxDQUFDLHdEQUF3RCxDQUFDO0lBQzNFO0VBQ0Y7RUFFQTs7O0VBR0EsTUFBTUMsZUFBZUEsQ0FDbkJsQixjQUFzQixFQUN0QkUsU0FBZSxFQUNmQyxPQUFhLEVBQ2JnQixLQUFBO0VBQUE7RUFBQSxDQUFBN0IsY0FBQSxHQUFBZSxDQUFBLFVBQWdCLEVBQUU7SUFBQTtJQUFBZixjQUFBLEdBQUFRLENBQUE7SUFBQVIsY0FBQSxHQUFBRSxDQUFBO0lBRWxCLElBQUk7TUFBQTtNQUFBRixjQUFBLEdBQUFFLENBQUE7TUFDRkMsUUFBQSxDQUFBZ0IsTUFBTSxDQUFDQyxLQUFLLENBQUMsOENBQThDLEVBQUU7UUFDM0RWLGNBQWM7UUFDZEUsU0FBUztRQUNUQyxPQUFPO1FBQ1BnQjtPQUNELENBQUM7TUFFRixNQUFNUixNQUFNO01BQUE7TUFBQSxDQUFBckIsY0FBQSxHQUFBRSxDQUFBLFFBQUcsTUFBTSxJQUFJLENBQUNJLE1BQU0sQ0FBQ2dCLFNBQThCOztZQUV6RFosY0FBYztZQUNkRSxTQUFTO1lBQ1RDLE9BQU87WUFDUGdCLEtBQUs7O09BRVY7TUFBQztNQUFBN0IsY0FBQSxHQUFBRSxDQUFBO01BRUYsT0FBT21CLE1BQU07SUFDZixDQUFDLENBQUMsT0FBT0ssS0FBSyxFQUFFO01BQUE7TUFBQTFCLGNBQUEsR0FBQUUsQ0FBQTtNQUNkQyxRQUFBLENBQUFnQixNQUFNLENBQUNPLEtBQUssQ0FBQyxxREFBcUQsRUFBRUEsS0FBSyxDQUFDO01BQUM7TUFBQTFCLGNBQUEsR0FBQUUsQ0FBQTtNQUMzRSxNQUFNLElBQUl5QixLQUFLLENBQUMsb0RBQW9ELENBQUM7SUFDdkU7RUFDRjtFQUVBOzs7RUFHQSxNQUFNRyxzQkFBc0JBLENBQzFCQyxVQUFrQixFQUNsQm5CLFNBQWUsRUFDZkMsT0FBYTtJQUFBO0lBQUFiLGNBQUEsR0FBQVEsQ0FBQTtJQUFBUixjQUFBLEdBQUFFLENBQUE7SUFFYixJQUFJO01BQUE7TUFBQUYsY0FBQSxHQUFBRSxDQUFBO01BQ0ZDLFFBQUEsQ0FBQWdCLE1BQU0sQ0FBQ0MsS0FBSyxDQUFDLHFEQUFxRCxFQUFFO1FBQ2xFVyxVQUFVO1FBQ1ZuQixTQUFTO1FBQ1RDO09BQ0QsQ0FBQztNQUVGLE1BQU1RLE1BQU07TUFBQTtNQUFBLENBQUFyQixjQUFBLEdBQUFFLENBQUEsUUFBRyxNQUFNLElBQUksQ0FBQ0ksTUFBTSxDQUFDZ0IsU0FBK0I7O1lBRTFEUyxVQUFVO1lBQ1ZuQixTQUFTO1lBQ1RDLE9BQU87O09BRVo7TUFBQztNQUFBYixjQUFBLEdBQUFFLENBQUE7TUFFRixPQUFPbUIsTUFBTTtJQUNmLENBQUMsQ0FBQyxPQUFPSyxLQUFLLEVBQUU7TUFBQTtNQUFBMUIsY0FBQSxHQUFBRSxDQUFBO01BQ2RDLFFBQUEsQ0FBQWdCLE1BQU0sQ0FBQ08sS0FBSyxDQUFDLDREQUE0RCxFQUFFQSxLQUFLLENBQUM7TUFBQztNQUFBMUIsY0FBQSxHQUFBRSxDQUFBO01BQ2xGLE1BQU0sSUFBSXlCLEtBQUssQ0FBQywyREFBMkQsQ0FBQztJQUM5RTtFQUNGO0VBRUE7OztFQUdBLE1BQU1LLG9CQUFvQkEsQ0FDeEJ0QixjQUFzQixFQUN0QnVCLFNBQUE7RUFBQTtFQUFBLENBQUFqQyxjQUFBLEdBQUFlLENBQUEsVUFBb0IsRUFBRTtJQUFBO0lBQUFmLGNBQUEsR0FBQVEsQ0FBQTtJQUFBUixjQUFBLEdBQUFFLENBQUE7SUFFdEIsSUFBSTtNQUFBO01BQUFGLGNBQUEsR0FBQUUsQ0FBQTtNQUNGQyxRQUFBLENBQUFnQixNQUFNLENBQUNDLEtBQUssQ0FBQyxtREFBbUQsRUFBRTtRQUNoRVYsY0FBYztRQUNkdUI7T0FDRCxDQUFDO01BRUYsTUFBTVosTUFBTTtNQUFBO01BQUEsQ0FBQXJCLGNBQUEsR0FBQUUsQ0FBQSxRQUFHLE1BQU0sSUFBSSxDQUFDSSxNQUFNLENBQUNnQixTQUFvQzs7WUFFL0RaLGNBQWM7WUFDZHVCLFNBQVM7O09BRWQ7TUFBQztNQUFBakMsY0FBQSxHQUFBRSxDQUFBO01BRUYsT0FBTywyQkFBQUYsY0FBQSxHQUFBZSxDQUFBLFVBQUFNLE1BQU0sQ0FBQyxDQUFDLENBQUM7TUFBQTtNQUFBLENBQUFyQixjQUFBLEdBQUFlLENBQUEsVUFBSSxJQUFJO0lBQzFCLENBQUMsQ0FBQyxPQUFPVyxLQUFLLEVBQUU7TUFBQTtNQUFBMUIsY0FBQSxHQUFBRSxDQUFBO01BQ2RDLFFBQUEsQ0FBQWdCLE1BQU0sQ0FBQ08sS0FBSyxDQUFDLDBEQUEwRCxFQUFFQSxLQUFLLENBQUM7TUFBQztNQUFBMUIsY0FBQSxHQUFBRSxDQUFBO01BQ2hGLE1BQU0sSUFBSXlCLEtBQUssQ0FBQyx5REFBeUQsQ0FBQztJQUM1RTtFQUNGO0VBRUE7OztFQUdBLE1BQU1PLHNCQUFzQkEsQ0FBQ0MsVUFBaUI7SUFBQTtJQUFBbkMsY0FBQSxHQUFBUSxDQUFBO0lBQUFSLGNBQUEsR0FBQUUsQ0FBQTtJQUM1QyxJQUFJO01BQ0YsTUFBTWtDLElBQUk7TUFBQTtNQUFBLENBQUFwQyxjQUFBLEdBQUFFLENBQUE7TUFBRztNQUFBLENBQUFGLGNBQUEsR0FBQWUsQ0FBQSxVQUFBb0IsVUFBVTtNQUFBO01BQUEsQ0FBQW5DLGNBQUEsR0FBQWUsQ0FBQSxVQUFJLElBQUlDLElBQUksQ0FBQ0EsSUFBSSxDQUFDQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsR0FBQyxDQUFDO01BQUE7TUFBQWpCLGNBQUEsR0FBQUUsQ0FBQTtNQUV2RUMsUUFBQSxDQUFBZ0IsTUFBTSxDQUFDQyxLQUFLLENBQUMsc0RBQXNELEVBQUU7UUFDbkVlLFVBQVUsRUFBRUM7T0FDYixDQUFDO01BRUYsTUFBTWYsTUFBTTtNQUFBO01BQUEsQ0FBQXJCLGNBQUEsR0FBQUUsQ0FBQSxRQUFHLE1BQU0sSUFBSSxDQUFDSSxNQUFNLENBQUNnQixTQUFrRDsyQ0FDOUNjLElBQUk7T0FDeEM7TUFFRCxNQUFNQyxjQUFjO01BQUE7TUFBQSxDQUFBckMsY0FBQSxHQUFBRSxDQUFBO01BQUc7TUFBQSxDQUFBRixjQUFBLEdBQUFlLENBQUEsVUFBQU0sTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFaUIseUJBQXlCO01BQUE7TUFBQSxDQUFBdEMsY0FBQSxHQUFBZSxDQUFBLFVBQUksQ0FBQztNQUFDO01BQUFmLGNBQUEsR0FBQUUsQ0FBQTtNQUVqRUMsUUFBQSxDQUFBZ0IsTUFBTSxDQUFDb0IsSUFBSSxDQUFDLGNBQWNGLGNBQWMsOEJBQThCRCxJQUFJLENBQUNJLFdBQVcsRUFBRSxDQUFDQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztNQUFDO01BQUF6QyxjQUFBLEdBQUFFLENBQUE7TUFFMUcsT0FBT21DLGNBQWM7SUFDdkIsQ0FBQyxDQUFDLE9BQU9YLEtBQUssRUFBRTtNQUFBO01BQUExQixjQUFBLEdBQUFFLENBQUE7TUFDZEMsUUFBQSxDQUFBZ0IsTUFBTSxDQUFDTyxLQUFLLENBQUMsNkRBQTZELEVBQUVBLEtBQUssQ0FBQztNQUFDO01BQUExQixjQUFBLEdBQUFFLENBQUE7TUFDbkYsTUFBTSxJQUFJeUIsS0FBSyxDQUFDLDJEQUEyRCxDQUFDO0lBQzlFO0VBQ0Y7RUFFQTs7O0VBR0EsTUFBTWUsaUJBQWlCQSxDQUFDQyxhQUFBO0VBQUE7RUFBQSxDQUFBM0MsY0FBQSxHQUFBZSxDQUFBLFVBQXdCLEVBQUU7SUFBQTtJQUFBZixjQUFBLEdBQUFRLENBQUE7SUFBQVIsY0FBQSxHQUFBRSxDQUFBO0lBQ2hELElBQUk7TUFBQTtNQUFBRixjQUFBLEdBQUFFLENBQUE7TUFDRkMsUUFBQSxDQUFBZ0IsTUFBTSxDQUFDQyxLQUFLLENBQUMsZ0RBQWdELEVBQUU7UUFDN0R1QjtPQUNELENBQUM7TUFFRixNQUFNdEIsTUFBTTtNQUFBO01BQUEsQ0FBQXJCLGNBQUEsR0FBQUUsQ0FBQSxRQUFHLE1BQU0sSUFBSSxDQUFDSSxNQUFNLENBQUNnQixTQUE0QztxQ0FDOUNxQixhQUFhO09BQzNDO01BRUQsTUFBTUMsWUFBWTtNQUFBO01BQUEsQ0FBQTVDLGNBQUEsR0FBQUUsQ0FBQTtNQUFHO01BQUEsQ0FBQUYsY0FBQSxHQUFBZSxDQUFBLFdBQUFNLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRXdCLG1CQUFtQjtNQUFBO01BQUEsQ0FBQTdDLGNBQUEsR0FBQWUsQ0FBQSxXQUFJLENBQUM7TUFBQztNQUFBZixjQUFBLEdBQUFFLENBQUE7TUFFekRDLFFBQUEsQ0FBQWdCLE1BQU0sQ0FBQ29CLElBQUksQ0FBQyxjQUFjSyxZQUFZLHlDQUF5Q0QsYUFBYSxPQUFPLENBQUM7TUFBQztNQUFBM0MsY0FBQSxHQUFBRSxDQUFBO01BRXJHLE9BQU8wQyxZQUFZO0lBQ3JCLENBQUMsQ0FBQyxPQUFPbEIsS0FBSyxFQUFFO01BQUE7TUFBQTFCLGNBQUEsR0FBQUUsQ0FBQTtNQUNkQyxRQUFBLENBQUFnQixNQUFNLENBQUNPLEtBQUssQ0FBQyx1REFBdUQsRUFBRUEsS0FBSyxDQUFDO01BQUM7TUFBQTFCLGNBQUEsR0FBQUUsQ0FBQTtNQUM3RSxNQUFNLElBQUl5QixLQUFLLENBQUMsc0RBQXNELENBQUM7SUFDekU7RUFDRjtFQUVBOzs7RUFHQSxNQUFNbUIsa0JBQWtCQSxDQUFVQyxLQUFhLEVBQUVDLE1BQUE7RUFBQTtFQUFBLENBQUFoRCxjQUFBLEdBQUFlLENBQUEsV0FBZ0IsRUFBRTtJQUFBO0lBQUFmLGNBQUEsR0FBQVEsQ0FBQTtJQUFBUixjQUFBLEdBQUFFLENBQUE7SUFDakUsSUFBSTtNQUFBO01BQUFGLGNBQUEsR0FBQUUsQ0FBQTtNQUNGQyxRQUFBLENBQUFnQixNQUFNLENBQUNDLEtBQUssQ0FBQyw0QkFBNEIsRUFBRTtRQUFFMkIsS0FBSztRQUFFQztNQUFNLENBQUUsQ0FBQztNQUU3RCxNQUFNM0IsTUFBTTtNQUFBO01BQUEsQ0FBQXJCLGNBQUEsR0FBQUUsQ0FBQSxRQUFHLE1BQU0sSUFBSSxDQUFDSSxNQUFNLENBQUMyQyxlQUFlLENBQU1GLEtBQUssRUFBRSxHQUFHQyxNQUFNLENBQUM7TUFBQztNQUFBaEQsY0FBQSxHQUFBRSxDQUFBO01BRXhFLE9BQU9tQixNQUFNO0lBQ2YsQ0FBQyxDQUFDLE9BQU9LLEtBQUssRUFBRTtNQUFBO01BQUExQixjQUFBLEdBQUFFLENBQUE7TUFDZEMsUUFBQSxDQUFBZ0IsTUFBTSxDQUFDTyxLQUFLLENBQUMsbUNBQW1DLEVBQUVBLEtBQUssQ0FBQztNQUFDO01BQUExQixjQUFBLEdBQUFFLENBQUE7TUFDekQsTUFBTSxJQUFJeUIsS0FBSyxDQUFDLG9DQUFvQyxDQUFDO0lBQ3ZEO0VBQ0Y7RUFFQTs7O0VBR0EsTUFBTXVCLDJCQUEyQkEsQ0FBQTtJQUFBO0lBQUFsRCxjQUFBLEdBQUFRLENBQUE7SUFBQVIsY0FBQSxHQUFBRSxDQUFBO0lBSy9CLElBQUk7TUFDRixNQUFNaUQsa0JBQWtCO01BQUE7TUFBQSxDQUFBbkQsY0FBQSxHQUFBRSxDQUFBLFFBQUcsQ0FDekIsdUJBQXVCLEVBQ3ZCLG1CQUFtQixFQUNuQiwwQkFBMEIsRUFDMUIsMkJBQTJCLEVBQzNCLHFCQUFxQixFQUNyQix3QkFBd0IsQ0FDekI7TUFFRCxNQUFNbUIsTUFBTTtNQUFBO01BQUEsQ0FBQXJCLGNBQUEsR0FBQUUsQ0FBQSxRQUFHLE1BQU0sSUFBSSxDQUFDSSxNQUFNLENBQUNnQixTQUFxQzs7Ozt1Q0FJckM2QixrQkFBa0IsQ0FBQzVCLEdBQUcsQ0FBQzZCLENBQUMsSUFBSTtRQUFBO1FBQUFwRCxjQUFBLEdBQUFRLENBQUE7UUFBQVIsY0FBQSxHQUFBRSxDQUFBO1FBQUEsV0FBSWtELENBQUMsR0FBRztNQUFILENBQUcsQ0FBQyxDQUFDM0IsSUFBSSxDQUFDLEdBQUcsQ0FBQztPQUMvRTtNQUVELE1BQU00QixtQkFBbUI7TUFBQTtNQUFBLENBQUFyRCxjQUFBLEdBQUFFLENBQUEsUUFBR21CLE1BQU0sQ0FBQ0UsR0FBRyxDQUFDK0IsQ0FBQyxJQUFJO1FBQUE7UUFBQXRELGNBQUEsR0FBQVEsQ0FBQTtRQUFBUixjQUFBLEdBQUFFLENBQUE7UUFBQSxPQUFBb0QsQ0FBQyxDQUFDQyxZQUFZO01BQVosQ0FBWSxDQUFDO01BQzNELE1BQU1DLGlCQUFpQjtNQUFBO01BQUEsQ0FBQXhELGNBQUEsR0FBQUUsQ0FBQSxRQUFHaUQsa0JBQWtCLENBQUNNLE1BQU0sQ0FDakRDLElBQUksSUFBSTtRQUFBO1FBQUExRCxjQUFBLEdBQUFRLENBQUE7UUFBQVIsY0FBQSxHQUFBRSxDQUFBO1FBQUEsUUFBQ21ELG1CQUFtQixDQUFDTSxRQUFRLENBQUNELElBQUksQ0FBQztNQUFELENBQUMsQ0FDNUM7TUFBQztNQUFBMUQsY0FBQSxHQUFBRSxDQUFBO01BRUYsT0FBTztRQUNMMEQsU0FBUyxFQUFFSixpQkFBaUIsQ0FBQ0ssTUFBTSxLQUFLLENBQUM7UUFDekNDLFVBQVUsRUFBRVQsbUJBQW1CO1FBQy9CVSxPQUFPLEVBQUVQO09BQ1Y7SUFDSCxDQUFDLENBQUMsT0FBTzlCLEtBQUssRUFBRTtNQUFBO01BQUExQixjQUFBLEdBQUFFLENBQUE7TUFDZEMsUUFBQSxDQUFBZ0IsTUFBTSxDQUFDTyxLQUFLLENBQUMsMENBQTBDLEVBQUVBLEtBQUssQ0FBQztNQUFDO01BQUExQixjQUFBLEdBQUFFLENBQUE7TUFDaEUsT0FBTztRQUNMMEQsU0FBUyxFQUFFLEtBQUs7UUFDaEJFLFVBQVUsRUFBRSxFQUFFO1FBQ2RDLE9BQU8sRUFBRTtPQUNWO0lBQ0g7RUFDRjtFQUVBOzs7RUFHQSxNQUFNQyx1QkFBdUJBLENBQUE7SUFBQTtJQUFBaEUsY0FBQSxHQUFBUSxDQUFBO0lBQUFSLGNBQUEsR0FBQUUsQ0FBQTtJQUMzQixJQUFJO01BQUE7TUFBQUYsY0FBQSxHQUFBRSxDQUFBO01BQ0ZDLFFBQUEsQ0FBQWdCLE1BQU0sQ0FBQ29CLElBQUksQ0FBQyxpQ0FBaUMsQ0FBQztNQUU5QztNQUNBO01BQUE7TUFBQXZDLGNBQUEsR0FBQUUsQ0FBQTtNQUNBQyxRQUFBLENBQUFnQixNQUFNLENBQUM4QyxJQUFJLENBQUMsNERBQTRELENBQUM7TUFBQztNQUFBakUsY0FBQSxHQUFBRSxDQUFBO01BQzFFQyxRQUFBLENBQUFnQixNQUFNLENBQUNvQixJQUFJLENBQUMsdUVBQXVFLENBQUM7SUFFdEYsQ0FBQyxDQUFDLE9BQU9iLEtBQUssRUFBRTtNQUFBO01BQUExQixjQUFBLEdBQUFFLENBQUE7TUFDZEMsUUFBQSxDQUFBZ0IsTUFBTSxDQUFDTyxLQUFLLENBQUMscUNBQXFDLEVBQUVBLEtBQUssQ0FBQztNQUFDO01BQUExQixjQUFBLEdBQUFFLENBQUE7TUFDM0QsTUFBTSxJQUFJeUIsS0FBSyxDQUFDLHFDQUFxQyxDQUFDO0lBQ3hEO0VBQ0Y7RUFFQTs7O0VBR0EsTUFBTXVDLG1CQUFtQkEsQ0FBQTtJQUFBO0lBQUFsRSxjQUFBLEdBQUFRLENBQUE7SUFBQVIsY0FBQSxHQUFBRSxDQUFBO0lBTXZCLElBQUk7TUFDRjtNQUNBLE1BQU1tQixNQUFNO01BQUE7TUFBQSxDQUFBckIsY0FBQSxHQUFBRSxDQUFBLFFBQUcsTUFBTSxJQUFJLENBQUNJLE1BQU0sQ0FBQ2dCLFNBSzdCOzs7Ozs7Ozs7Ozs7T0FZSDtNQUFDO01BQUF0QixjQUFBLEdBQUFFLENBQUE7TUFFRixPQUFPbUIsTUFBTTtJQUNmLENBQUMsQ0FBQyxPQUFPSyxLQUFLLEVBQUU7TUFBQTtNQUFBMUIsY0FBQSxHQUFBRSxDQUFBO01BQ2RDLFFBQUEsQ0FBQWdCLE1BQU0sQ0FBQzhDLElBQUksQ0FBQyxtRkFBbUYsQ0FBQztNQUFDO01BQUFqRSxjQUFBLEdBQUFFLENBQUE7TUFDakcsT0FBTyxFQUFFO0lBQ1g7RUFDRjs7QUFDRDtBQUFBRixjQUFBLEdBQUFFLENBQUE7QUF0U0RpRSxPQUFBLENBQUE5RCx1QkFBQSxHQUFBQSx1QkFBQTtBQXdTQTtBQUNBLElBQUkrRCx1QkFBZ0Q7QUFBQztBQUFBcEUsY0FBQSxHQUFBRSxDQUFBO0FBRTlDLE1BQU1tRSwwQkFBMEIsR0FBSS9ELE1BQXNCLElBQTZCO0VBQUE7RUFBQU4sY0FBQSxHQUFBUSxDQUFBO0VBQUFSLGNBQUEsR0FBQUUsQ0FBQTtFQUM1RixJQUFJLENBQUNrRSx1QkFBdUIsRUFBRTtJQUFBO0lBQUFwRSxjQUFBLEdBQUFlLENBQUE7SUFBQWYsY0FBQSxHQUFBRSxDQUFBO0lBQzVCLElBQUksQ0FBQ0ksTUFBTSxFQUFFO01BQUE7TUFBQU4sY0FBQSxHQUFBZSxDQUFBO01BQUFmLGNBQUEsR0FBQUUsQ0FBQTtNQUNYLE1BQU0sSUFBSXlCLEtBQUssQ0FBQyxpRUFBaUUsQ0FBQztJQUNwRixDQUFDO0lBQUE7SUFBQTtNQUFBM0IsY0FBQSxHQUFBZSxDQUFBO0lBQUE7SUFBQWYsY0FBQSxHQUFBRSxDQUFBO0lBQ0RrRSx1QkFBdUIsR0FBRyxJQUFJL0QsdUJBQXVCLENBQUNDLE1BQU0sQ0FBQztFQUMvRCxDQUFDO0VBQUE7RUFBQTtJQUFBTixjQUFBLEdBQUFlLENBQUE7RUFBQTtFQUFBZixjQUFBLEdBQUFFLENBQUE7RUFDRCxPQUFPa0UsdUJBQXVCO0FBQ2hDLENBQUM7QUFBQztBQUFBcEUsY0FBQSxHQUFBRSxDQUFBO0FBUldpRSxPQUFBLENBQUFFLDBCQUEwQixHQUFBQSwwQkFBQSIsImlnbm9yZUxpc3QiOltdfQ==