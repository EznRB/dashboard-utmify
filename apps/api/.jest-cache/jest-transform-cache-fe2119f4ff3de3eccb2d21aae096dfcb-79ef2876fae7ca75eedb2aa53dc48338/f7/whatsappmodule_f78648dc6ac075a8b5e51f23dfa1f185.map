{"version":3,"names":["cov_d7yxpfxpz","actualCoverage","Module","ConfigModule","BullModule","ScheduleModule","WhatsAppService","CryptoService","WhatsAppController","WhatsAppWebhookController","PrismaService","JwtModule","PassportModule","JwtStrategy","WhatsAppProcessor","WhatsAppTemplateService","WhatsAppAutomationService","s","WhatsAppModule","__decorate","imports","forRoot","register","defaultStrategy","registerAsync","useFactory","f","secret","b","process","env","JWT_SECRET","signOptions","expiresIn","registerQueue","name","redis","host","REDIS_HOST","port","parseInt","REDIS_PORT","password","REDIS_PASSWORD","defaultJobOptions","removeOnComplete","removeOnFail","attempts","backoff","type","delay","controllers","providers","exports"],"sources":["C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\modules\\whatsapp.module.ts"],"sourcesContent":["import { Module } from '@nestjs/common';\nimport { ConfigModule } from '@nestjs/config';\nimport { BullModule } from '@nestjs/bull';\nimport { ScheduleModule } from '@nestjs/schedule';\nimport { WhatsAppService } from '../services/whatsapp.service';\nimport { CryptoService } from '../services/crypto.service';\nimport { WhatsAppController, WhatsAppWebhookController } from '../controllers/whatsapp.controller';\nimport { PrismaService } from '../database/prisma.service';\nimport { JwtModule } from '@nestjs/jwt';\nimport { PassportModule } from '@nestjs/passport';\nimport { JwtStrategy } from '../strategies/jwt.strategy';\nimport { WhatsAppProcessor } from '../processors/whatsapp.processor';\nimport { WhatsAppTemplateService } from '../services/whatsapp-template.service';\nimport { WhatsAppAutomationService } from '../services/whatsapp-automation.service';\n\n@Module({\n  imports: [\n    ConfigModule,\n    ScheduleModule.forRoot(),\n    PassportModule.register({ defaultStrategy: 'jwt' }),\n    JwtModule.registerAsync({\n      useFactory: () => ({\n        secret: process.env.JWT_SECRET || 'your-secret-key',\n        signOptions: {\n          expiresIn: '7d',\n        },\n      }),\n    }),\n    BullModule.registerQueue({\n      name: 'whatsapp',\n      redis: {\n        host: process.env.REDIS_HOST || 'localhost',\n        port: parseInt(process.env.REDIS_PORT || '6379'),\n        password: process.env.REDIS_PASSWORD,\n      },\n      defaultJobOptions: {\n        removeOnComplete: 100,\n        removeOnFail: 50,\n        attempts: 3,\n        backoff: {\n          type: 'exponential',\n          delay: 2000,\n        },\n      },\n    }),\n  ],\n  controllers: [WhatsAppController, WhatsAppWebhookController],\n  providers: [\n    WhatsAppService,\n    WhatsAppTemplateService,\n    WhatsAppAutomationService,\n    WhatsAppProcessor,\n    CryptoService,\n    PrismaService,\n    JwtStrategy,\n  ],\n  exports: [\n    WhatsAppService,\n    WhatsAppTemplateService,\n    WhatsAppAutomationService,\n    CryptoService,\n  ],\n})\nexport class WhatsAppModule {}"],"mappings":"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","ignoreList":[]}