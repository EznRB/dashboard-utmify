861268ed11b4aabad3f079ff97676765
/* istanbul ignore next */
function cov_2m5wgvitkk() {
  var path = "C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\stored-procedures.service.ts";
  var hash = "d571824bbd980422c1693e5569577ab219ba22ca";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\stored-procedures.service.ts",
    statementMap: {
      "0": {
        start: {
          line: 5,
          column: 8
        },
        end: {
          line: 5,
          column: 29
        }
      },
      "1": {
        start: {
          line: 11,
          column: 8
        },
        end: {
          line: 33,
          column: 9
        }
      },
      "2": {
        start: {
          line: 12,
          column: 26
        },
        end: {
          line: 12,
          column: 86
        }
      },
      "3": {
        start: {
          line: 13,
          column: 24
        },
        end: {
          line: 13,
          column: 45
        }
      },
      "4": {
        start: {
          line: 14,
          column: 12
        },
        end: {
          line: 19,
          column: 15
        }
      },
      "5": {
        start: {
          line: 20,
          column: 27
        },
        end: {
          line: 27,
          column: 7
        }
      },
      "6": {
        start: {
          line: 23,
          column: 57
        },
        end: {
          line: 23,
          column: 72
        }
      },
      "7": {
        start: {
          line: 28,
          column: 12
        },
        end: {
          line: 28,
          column: 37
        }
      },
      "8": {
        start: {
          line: 31,
          column: 12
        },
        end: {
          line: 31,
          column: 91
        }
      },
      "9": {
        start: {
          line: 32,
          column: 12
        },
        end: {
          line: 32,
          column: 86
        }
      },
      "10": {
        start: {
          line: 39,
          column: 8
        },
        end: {
          line: 59,
          column: 9
        }
      },
      "11": {
        start: {
          line: 40,
          column: 12
        },
        end: {
          line: 45,
          column: 15
        }
      },
      "12": {
        start: {
          line: 46,
          column: 27
        },
        end: {
          line: 53,
          column: 7
        }
      },
      "13": {
        start: {
          line: 54,
          column: 12
        },
        end: {
          line: 54,
          column: 26
        }
      },
      "14": {
        start: {
          line: 57,
          column: 12
        },
        end: {
          line: 57,
          column: 87
        }
      },
      "15": {
        start: {
          line: 58,
          column: 12
        },
        end: {
          line: 58,
          column: 82
        }
      },
      "16": {
        start: {
          line: 65,
          column: 8
        },
        end: {
          line: 83,
          column: 9
        }
      },
      "17": {
        start: {
          line: 66,
          column: 12
        },
        end: {
          line: 70,
          column: 15
        }
      },
      "18": {
        start: {
          line: 71,
          column: 27
        },
        end: {
          line: 77,
          column: 7
        }
      },
      "19": {
        start: {
          line: 78,
          column: 12
        },
        end: {
          line: 78,
          column: 26
        }
      },
      "20": {
        start: {
          line: 81,
          column: 12
        },
        end: {
          line: 81,
          column: 94
        }
      },
      "21": {
        start: {
          line: 82,
          column: 12
        },
        end: {
          line: 82,
          column: 89
        }
      },
      "22": {
        start: {
          line: 89,
          column: 8
        },
        end: {
          line: 105,
          column: 9
        }
      },
      "23": {
        start: {
          line: 90,
          column: 12
        },
        end: {
          line: 93,
          column: 15
        }
      },
      "24": {
        start: {
          line: 94,
          column: 27
        },
        end: {
          line: 99,
          column: 7
        }
      },
      "25": {
        start: {
          line: 100,
          column: 12
        },
        end: {
          line: 100,
          column: 37
        }
      },
      "26": {
        start: {
          line: 103,
          column: 12
        },
        end: {
          line: 103,
          column: 92
        }
      },
      "27": {
        start: {
          line: 104,
          column: 12
        },
        end: {
          line: 104,
          column: 87
        }
      },
      "28": {
        start: {
          line: 111,
          column: 8
        },
        end: {
          line: 126,
          column: 9
        }
      },
      "29": {
        start: {
          line: 112,
          column: 25
        },
        end: {
          line: 112,
          column: 81
        }
      },
      "30": {
        start: {
          line: 113,
          column: 12
        },
        end: {
          line: 115,
          column: 15
        }
      },
      "31": {
        start: {
          line: 116,
          column: 27
        },
        end: {
          line: 118,
          column: 7
        }
      },
      "32": {
        start: {
          line: 119,
          column: 35
        },
        end: {
          line: 119,
          column: 76
        }
      },
      "33": {
        start: {
          line: 120,
          column: 12
        },
        end: {
          line: 120,
          column: 118
        }
      },
      "34": {
        start: {
          line: 121,
          column: 12
        },
        end: {
          line: 121,
          column: 34
        }
      },
      "35": {
        start: {
          line: 124,
          column: 12
        },
        end: {
          line: 124,
          column: 95
        }
      },
      "36": {
        start: {
          line: 125,
          column: 12
        },
        end: {
          line: 125,
          column: 89
        }
      },
      "37": {
        start: {
          line: 132,
          column: 8
        },
        end: {
          line: 146,
          column: 9
        }
      },
      "38": {
        start: {
          line: 133,
          column: 12
        },
        end: {
          line: 135,
          column: 15
        }
      },
      "39": {
        start: {
          line: 136,
          column: 27
        },
        end: {
          line: 138,
          column: 7
        }
      },
      "40": {
        start: {
          line: 139,
          column: 33
        },
        end: {
          line: 139,
          column: 68
        }
      },
      "41": {
        start: {
          line: 140,
          column: 12
        },
        end: {
          line: 140,
          column: 113
        }
      },
      "42": {
        start: {
          line: 141,
          column: 12
        },
        end: {
          line: 141,
          column: 32
        }
      },
      "43": {
        start: {
          line: 144,
          column: 12
        },
        end: {
          line: 144,
          column: 89
        }
      },
      "44": {
        start: {
          line: 145,
          column: 12
        },
        end: {
          line: 145,
          column: 84
        }
      },
      "45": {
        start: {
          line: 152,
          column: 8
        },
        end: {
          line: 160,
          column: 9
        }
      },
      "46": {
        start: {
          line: 153,
          column: 12
        },
        end: {
          line: 153,
          column: 74
        }
      },
      "47": {
        start: {
          line: 154,
          column: 27
        },
        end: {
          line: 154,
          column: 78
        }
      },
      "48": {
        start: {
          line: 155,
          column: 12
        },
        end: {
          line: 155,
          column: 26
        }
      },
      "49": {
        start: {
          line: 158,
          column: 12
        },
        end: {
          line: 158,
          column: 69
        }
      },
      "50": {
        start: {
          line: 159,
          column: 12
        },
        end: {
          line: 159,
          column: 66
        }
      },
      "51": {
        start: {
          line: 166,
          column: 8
        },
        end: {
          line: 196,
          column: 9
        }
      },
      "52": {
        start: {
          line: 167,
          column: 39
        },
        end: {
          line: 174,
          column: 13
        }
      },
      "53": {
        start: {
          line: 175,
          column: 27
        },
        end: {
          line: 180,
          column: 7
        }
      },
      "54": {
        start: {
          line: 179,
          column: 67
        },
        end: {
          line: 179,
          column: 75
        }
      },
      "55": {
        start: {
          line: 181,
          column: 40
        },
        end: {
          line: 181,
          column: 71
        }
      },
      "56": {
        start: {
          line: 181,
          column: 56
        },
        end: {
          line: 181,
          column: 70
        }
      },
      "57": {
        start: {
          line: 182,
          column: 38
        },
        end: {
          line: 182,
          column: 108
        }
      },
      "58": {
        start: {
          line: 182,
          column: 72
        },
        end: {
          line: 182,
          column: 107
        }
      },
      "59": {
        start: {
          line: 183,
          column: 12
        },
        end: {
          line: 187,
          column: 14
        }
      },
      "60": {
        start: {
          line: 190,
          column: 12
        },
        end: {
          line: 190,
          column: 76
        }
      },
      "61": {
        start: {
          line: 191,
          column: 12
        },
        end: {
          line: 195,
          column: 14
        }
      },
      "62": {
        start: {
          line: 202,
          column: 8
        },
        end: {
          line: 212,
          column: 9
        }
      },
      "63": {
        start: {
          line: 203,
          column: 12
        },
        end: {
          line: 203,
          column: 59
        }
      },
      "64": {
        start: {
          line: 206,
          column: 12
        },
        end: {
          line: 206,
          column: 86
        }
      },
      "65": {
        start: {
          line: 207,
          column: 12
        },
        end: {
          line: 207,
          column: 97
        }
      },
      "66": {
        start: {
          line: 210,
          column: 12
        },
        end: {
          line: 210,
          column: 71
        }
      },
      "67": {
        start: {
          line: 211,
          column: 12
        },
        end: {
          line: 211,
          column: 67
        }
      },
      "68": {
        start: {
          line: 218,
          column: 8
        },
        end: {
          line: 238,
          column: 9
        }
      },
      "69": {
        start: {
          line: 220,
          column: 27
        },
        end: {
          line: 232,
          column: 7
        }
      },
      "70": {
        start: {
          line: 233,
          column: 12
        },
        end: {
          line: 233,
          column: 26
        }
      },
      "71": {
        start: {
          line: 236,
          column: 12
        },
        end: {
          line: 236,
          column: 109
        }
      },
      "72": {
        start: {
          line: 237,
          column: 12
        },
        end: {
          line: 237,
          column: 22
        }
      },
      "73": {
        start: {
          line: 243,
          column: 42
        },
        end: {
          line: 251,
          column: 1
        }
      },
      "74": {
        start: {
          line: 244,
          column: 4
        },
        end: {
          line: 249,
          column: 5
        }
      },
      "75": {
        start: {
          line: 245,
          column: 8
        },
        end: {
          line: 247,
          column: 9
        }
      },
      "76": {
        start: {
          line: 246,
          column: 12
        },
        end: {
          line: 246,
          column: 95
        }
      },
      "77": {
        start: {
          line: 248,
          column: 8
        },
        end: {
          line: 248,
          column: 70
        }
      },
      "78": {
        start: {
          line: 250,
          column: 4
        },
        end: {
          line: 250,
          column: 35
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 4,
            column: 4
          },
          end: {
            line: 4,
            column: 5
          }
        },
        loc: {
          start: {
            line: 4,
            column: 24
          },
          end: {
            line: 6,
            column: 5
          }
        },
        line: 4
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 10,
            column: 4
          },
          end: {
            line: 10,
            column: 5
          }
        },
        loc: {
          start: {
            line: 10,
            column: 79
          },
          end: {
            line: 34,
            column: 5
          }
        },
        line: 10
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 23,
            column: 51
          },
          end: {
            line: 23,
            column: 52
          }
        },
        loc: {
          start: {
            line: 23,
            column: 57
          },
          end: {
            line: 23,
            column: 72
          }
        },
        line: 23
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 38,
            column: 4
          },
          end: {
            line: 38,
            column: 5
          }
        },
        loc: {
          start: {
            line: 38,
            column: 74
          },
          end: {
            line: 60,
            column: 5
          }
        },
        line: 38
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 64,
            column: 4
          },
          end: {
            line: 64,
            column: 5
          }
        },
        loc: {
          start: {
            line: 64,
            column: 65
          },
          end: {
            line: 84,
            column: 5
          }
        },
        line: 64
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 88,
            column: 4
          },
          end: {
            line: 88,
            column: 5
          }
        },
        loc: {
          start: {
            line: 88,
            column: 63
          },
          end: {
            line: 106,
            column: 5
          }
        },
        line: 88
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 110,
            column: 4
          },
          end: {
            line: 110,
            column: 5
          }
        },
        loc: {
          start: {
            line: 110,
            column: 45
          },
          end: {
            line: 127,
            column: 5
          }
        },
        line: 110
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 131,
            column: 4
          },
          end: {
            line: 131,
            column: 5
          }
        },
        loc: {
          start: {
            line: 131,
            column: 48
          },
          end: {
            line: 147,
            column: 5
          }
        },
        line: 131
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 151,
            column: 4
          },
          end: {
            line: 151,
            column: 5
          }
        },
        loc: {
          start: {
            line: 151,
            column: 49
          },
          end: {
            line: 161,
            column: 5
          }
        },
        line: 151
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 165,
            column: 4
          },
          end: {
            line: 165,
            column: 5
          }
        },
        loc: {
          start: {
            line: 165,
            column: 40
          },
          end: {
            line: 197,
            column: 5
          }
        },
        line: 165
      },
      "10": {
        name: "(anonymous_10)",
        decl: {
          start: {
            line: 179,
            column: 62
          },
          end: {
            line: 179,
            column: 63
          }
        },
        loc: {
          start: {
            line: 179,
            column: 67
          },
          end: {
            line: 179,
            column: 75
          }
        },
        line: 179
      },
      "11": {
        name: "(anonymous_11)",
        decl: {
          start: {
            line: 181,
            column: 51
          },
          end: {
            line: 181,
            column: 52
          }
        },
        loc: {
          start: {
            line: 181,
            column: 56
          },
          end: {
            line: 181,
            column: 70
          }
        },
        line: 181
      },
      "12": {
        name: "(anonymous_12)",
        decl: {
          start: {
            line: 182,
            column: 64
          },
          end: {
            line: 182,
            column: 65
          }
        },
        loc: {
          start: {
            line: 182,
            column: 72
          },
          end: {
            line: 182,
            column: 107
          }
        },
        line: 182
      },
      "13": {
        name: "(anonymous_13)",
        decl: {
          start: {
            line: 201,
            column: 4
          },
          end: {
            line: 201,
            column: 5
          }
        },
        loc: {
          start: {
            line: 201,
            column: 36
          },
          end: {
            line: 213,
            column: 5
          }
        },
        line: 201
      },
      "14": {
        name: "(anonymous_14)",
        decl: {
          start: {
            line: 217,
            column: 4
          },
          end: {
            line: 217,
            column: 5
          }
        },
        loc: {
          start: {
            line: 217,
            column: 32
          },
          end: {
            line: 239,
            column: 5
          }
        },
        line: 217
      },
      "15": {
        name: "(anonymous_15)",
        decl: {
          start: {
            line: 243,
            column: 42
          },
          end: {
            line: 243,
            column: 43
          }
        },
        loc: {
          start: {
            line: 243,
            column: 54
          },
          end: {
            line: 251,
            column: 1
          }
        },
        line: 243
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 12,
            column: 26
          },
          end: {
            line: 12,
            column: 86
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 12,
            column: 26
          },
          end: {
            line: 12,
            column: 35
          }
        }, {
          start: {
            line: 12,
            column: 39
          },
          end: {
            line: 12,
            column: 86
          }
        }],
        line: 12
      },
      "1": {
        loc: {
          start: {
            line: 13,
            column: 24
          },
          end: {
            line: 13,
            column: 45
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 13,
            column: 24
          },
          end: {
            line: 13,
            column: 31
          }
        }, {
          start: {
            line: 13,
            column: 35
          },
          end: {
            line: 13,
            column: 45
          }
        }],
        line: 13
      },
      "2": {
        loc: {
          start: {
            line: 23,
            column: 12
          },
          end: {
            line: 23,
            column: 95
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 23,
            column: 26
          },
          end: {
            line: 23,
            column: 86
          }
        }, {
          start: {
            line: 23,
            column: 89
          },
          end: {
            line: 23,
            column: 95
          }
        }],
        line: 23
      },
      "3": {
        loc: {
          start: {
            line: 28,
            column: 19
          },
          end: {
            line: 28,
            column: 36
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 28,
            column: 19
          },
          end: {
            line: 28,
            column: 28
          }
        }, {
          start: {
            line: 28,
            column: 32
          },
          end: {
            line: 28,
            column: 36
          }
        }],
        line: 28
      },
      "4": {
        loc: {
          start: {
            line: 38,
            column: 62
          },
          end: {
            line: 38,
            column: 72
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 38,
            column: 70
          },
          end: {
            line: 38,
            column: 72
          }
        }],
        line: 38
      },
      "5": {
        loc: {
          start: {
            line: 88,
            column: 47
          },
          end: {
            line: 88,
            column: 61
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 88,
            column: 59
          },
          end: {
            line: 88,
            column: 61
          }
        }],
        line: 88
      },
      "6": {
        loc: {
          start: {
            line: 100,
            column: 19
          },
          end: {
            line: 100,
            column: 36
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 100,
            column: 19
          },
          end: {
            line: 100,
            column: 28
          }
        }, {
          start: {
            line: 100,
            column: 32
          },
          end: {
            line: 100,
            column: 36
          }
        }],
        line: 100
      },
      "7": {
        loc: {
          start: {
            line: 112,
            column: 25
          },
          end: {
            line: 112,
            column: 81
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 112,
            column: 25
          },
          end: {
            line: 112,
            column: 35
          }
        }, {
          start: {
            line: 112,
            column: 39
          },
          end: {
            line: 112,
            column: 81
          }
        }],
        line: 112
      },
      "8": {
        loc: {
          start: {
            line: 119,
            column: 35
          },
          end: {
            line: 119,
            column: 76
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 119,
            column: 35
          },
          end: {
            line: 119,
            column: 71
          }
        }, {
          start: {
            line: 119,
            column: 75
          },
          end: {
            line: 119,
            column: 76
          }
        }],
        line: 119
      },
      "9": {
        loc: {
          start: {
            line: 131,
            column: 28
          },
          end: {
            line: 131,
            column: 46
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 131,
            column: 44
          },
          end: {
            line: 131,
            column: 46
          }
        }],
        line: 131
      },
      "10": {
        loc: {
          start: {
            line: 139,
            column: 33
          },
          end: {
            line: 139,
            column: 68
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 139,
            column: 33
          },
          end: {
            line: 139,
            column: 63
          }
        }, {
          start: {
            line: 139,
            column: 67
          },
          end: {
            line: 139,
            column: 68
          }
        }],
        line: 139
      },
      "11": {
        loc: {
          start: {
            line: 151,
            column: 36
          },
          end: {
            line: 151,
            column: 47
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 151,
            column: 45
          },
          end: {
            line: 151,
            column: 47
          }
        }],
        line: 151
      },
      "12": {
        loc: {
          start: {
            line: 244,
            column: 4
          },
          end: {
            line: 249,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 244,
            column: 4
          },
          end: {
            line: 249,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 244
      },
      "13": {
        loc: {
          start: {
            line: 245,
            column: 8
          },
          end: {
            line: 247,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 245,
            column: 8
          },
          end: {
            line: 247,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 245
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0,
      "48": 0,
      "49": 0,
      "50": 0,
      "51": 0,
      "52": 0,
      "53": 0,
      "54": 0,
      "55": 0,
      "56": 0,
      "57": 0,
      "58": 0,
      "59": 0,
      "60": 0,
      "61": 0,
      "62": 0,
      "63": 0,
      "64": 0,
      "65": 0,
      "66": 0,
      "67": 0,
      "68": 0,
      "69": 0,
      "70": 0,
      "71": 0,
      "72": 0,
      "73": 0,
      "74": 0,
      "75": 0,
      "76": 0,
      "77": 0,
      "78": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0],
      "5": [0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0],
      "10": [0, 0],
      "11": [0],
      "12": [0, 0],
      "13": [0, 0]
    },
    inputSourceMap: {
      file: "C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\stored-procedures.service.ts",
      mappings: "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",
      names: [],
      sources: ["C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\services\\stored-procedures.service.ts"],
      sourcesContent: ["import { PrismaService } from '../database/prisma.service';\nimport { logger } from '../utils/logger';\n\n// Interfaces for stored procedure results\nexport interface StoredProcedureKPIResult {\n  revenue: number;\n  ad_spend: number;\n  impressions: number;\n  clicks: number;\n  conversions: number;\n  roas: number;\n  roi: number;\n  cpc: number;\n  cpm: number;\n  cac: number;\n  ctr: number;\n  conversion_rate: number;\n  arpu: number;\n  ltv: number;\n  margin: number;\n  profit: number;\n}\n\nexport interface TopCampaignResult {\n  campaign_id: string;\n  campaign_name: string;\n  revenue: number;\n  ad_spend: number;\n  roas: number;\n  conversions: number;\n}\n\nexport interface FunnelMetricResult {\n  stage_name: string;\n  stage_order: number;\n  users: number;\n  conversion_rate: number;\n  dropoff_rate: number;\n}\n\nexport interface RealtimeDashboardResult {\n  total_impressions: number;\n  total_clicks: number;\n  total_conversions: number;\n  total_revenue: number;\n  total_ad_spend: number;\n  avg_ctr: number;\n  avg_conversion_rate: number;\n  current_roas: number;\n}\n\nexport class StoredProceduresService {\n  constructor(private prisma: PrismaService) {}\n\n  /**\n   * Calculate KPI metrics using optimized stored procedure\n   */\n  async calculateKPIMetrics(\n    organizationId: string,\n    campaignIds?: string[],\n    startDate?: Date,\n    endDate?: Date\n  ): Promise<StoredProcedureKPIResult | null> {\n    try {\n      const start = startDate || new Date(Date.now() - 30 * 24 * 60 * 60 * 1000); // Default: 30 days ago\n      const end = endDate || new Date();\n\n      logger.debug('Executing calculate_kpi_metrics stored procedure', {\n        organizationId,\n        campaignIds,\n        startDate: start,\n        endDate: end,\n      });\n\n      const result = await this.prisma.$queryRaw<StoredProcedureKPIResult[]>`\n        SELECT * FROM calculate_kpi_metrics(\n          ${organizationId}::uuid,\n          ${campaignIds ? `ARRAY[${campaignIds.map(id => `'${id}'::uuid`).join(',')}]` : 'NULL'}::uuid[],\n          ${start}::date,\n          ${end}::date\n        )\n      `;\n\n      return result[0] || null;\n    } catch (error) {\n      logger.error('Error executing calculate_kpi_metrics stored procedure:', error);\n      throw new Error('Failed to calculate KPI metrics using stored procedure');\n    }\n  }\n\n  /**\n   * Get top performing campaigns using stored procedure\n   */\n  async getTopCampaigns(\n    organizationId: string,\n    startDate: Date,\n    endDate: Date,\n    limit: number = 10\n  ): Promise<TopCampaignResult[]> {\n    try {\n      logger.debug('Executing get_top_campaigns stored procedure', {\n        organizationId,\n        startDate,\n        endDate,\n        limit,\n      });\n\n      const result = await this.prisma.$queryRaw<TopCampaignResult[]>`\n        SELECT * FROM get_top_campaigns(\n          ${organizationId}::uuid,\n          ${startDate}::date,\n          ${endDate}::date,\n          ${limit}::integer\n        )\n      `;\n\n      return result;\n    } catch (error) {\n      logger.error('Error executing get_top_campaigns stored procedure:', error);\n      throw new Error('Failed to get top campaigns using stored procedure');\n    }\n  }\n\n  /**\n   * Calculate funnel metrics using stored procedure\n   */\n  async calculateFunnelMetrics(\n    campaignId: string,\n    startDate: Date,\n    endDate: Date\n  ): Promise<FunnelMetricResult[]> {\n    try {\n      logger.debug('Executing calculate_funnel_metrics stored procedure', {\n        campaignId,\n        startDate,\n        endDate,\n      });\n\n      const result = await this.prisma.$queryRaw<FunnelMetricResult[]>`\n        SELECT * FROM calculate_funnel_metrics(\n          ${campaignId}::uuid,\n          ${startDate}::date,\n          ${endDate}::date\n        )\n      `;\n\n      return result;\n    } catch (error) {\n      logger.error('Error executing calculate_funnel_metrics stored procedure:', error);\n      throw new Error('Failed to calculate funnel metrics using stored procedure');\n    }\n  }\n\n  /**\n   * Get real-time dashboard metrics using stored procedure\n   */\n  async getRealtimeDashboard(\n    organizationId: string,\n    hoursBack: number = 24\n  ): Promise<RealtimeDashboardResult | null> {\n    try {\n      logger.debug('Executing get_realtime_dashboard stored procedure', {\n        organizationId,\n        hoursBack,\n      });\n\n      const result = await this.prisma.$queryRaw<RealtimeDashboardResult[]>`\n        SELECT * FROM get_realtime_dashboard(\n          ${organizationId}::uuid,\n          ${hoursBack}::integer\n        )\n      `;\n\n      return result[0] || null;\n    } catch (error) {\n      logger.error('Error executing get_realtime_dashboard stored procedure:', error);\n      throw new Error('Failed to get realtime dashboard using stored procedure');\n    }\n  }\n\n  /**\n   * Aggregate hourly metrics to daily using stored procedure\n   */\n  async aggregateHourlyToDaily(targetDate?: Date): Promise<number> {\n    try {\n      const date = targetDate || new Date(Date.now() - 24 * 60 * 60 * 1000); // Default: yesterday\n\n      logger.debug('Executing aggregate_hourly_to_daily stored procedure', {\n        targetDate: date,\n      });\n\n      const result = await this.prisma.$queryRaw<{ aggregate_hourly_to_daily: number }[]>`\n        SELECT aggregate_hourly_to_daily(${date}::date) as aggregate_hourly_to_daily\n      `;\n\n      const processedCount = result[0]?.aggregate_hourly_to_daily || 0;\n      \n      logger.info(`Aggregated ${processedCount} campaign metrics for date ${date.toISOString().split('T')[0]}`);\n      \n      return processedCount;\n    } catch (error) {\n      logger.error('Error executing aggregate_hourly_to_daily stored procedure:', error);\n      throw new Error('Failed to aggregate hourly metrics using stored procedure');\n    }\n  }\n\n  /**\n   * Clean up old metrics data using stored procedure\n   */\n  async cleanupOldMetrics(retentionDays: number = 90): Promise<number> {\n    try {\n      logger.debug('Executing cleanup_old_metrics stored procedure', {\n        retentionDays,\n      });\n\n      const result = await this.prisma.$queryRaw<{ cleanup_old_metrics: number }[]>`\n        SELECT cleanup_old_metrics(${retentionDays}::integer) as cleanup_old_metrics\n      `;\n\n      const deletedCount = result[0]?.cleanup_old_metrics || 0;\n      \n      logger.info(`Cleaned up ${deletedCount} old metric records with retention of ${retentionDays} days`);\n      \n      return deletedCount;\n    } catch (error) {\n      logger.error('Error executing cleanup_old_metrics stored procedure:', error);\n      throw new Error('Failed to cleanup old metrics using stored procedure');\n    }\n  }\n\n  /**\n   * Execute custom SQL query with proper error handling\n   */\n  async executeCustomQuery<T = any>(query: string, params: any[] = []): Promise<T[]> {\n    try {\n      logger.debug('Executing custom SQL query', { query, params });\n\n      const result = await this.prisma.$queryRawUnsafe<T[]>(query, ...params);\n      \n      return result;\n    } catch (error) {\n      logger.error('Error executing custom SQL query:', error);\n      throw new Error('Failed to execute custom SQL query');\n    }\n  }\n\n  /**\n   * Check if stored procedures are available\n   */\n  async checkStoredProceduresHealth(): Promise<{\n    available: boolean;\n    procedures: string[];\n    missing: string[];\n  }> {\n    try {\n      const expectedProcedures = [\n        'calculate_kpi_metrics',\n        'get_top_campaigns',\n        'calculate_funnel_metrics',\n        'aggregate_hourly_to_daily',\n        'cleanup_old_metrics',\n        'get_realtime_dashboard',\n      ];\n\n      const result = await this.prisma.$queryRaw<{ routine_name: string }[]>`\n        SELECT routine_name \n        FROM information_schema.routines \n        WHERE routine_type = 'FUNCTION' \n        AND routine_name = ANY(ARRAY[${expectedProcedures.map(p => `'${p}'`).join(',')}])\n      `;\n\n      const availableProcedures = result.map(r => r.routine_name);\n      const missingProcedures = expectedProcedures.filter(\n        proc => !availableProcedures.includes(proc)\n      );\n\n      return {\n        available: missingProcedures.length === 0,\n        procedures: availableProcedures,\n        missing: missingProcedures,\n      };\n    } catch (error) {\n      logger.error('Error checking stored procedures health:', error);\n      return {\n        available: false,\n        procedures: [],\n        missing: [],\n      };\n    }\n  }\n\n  /**\n   * Install stored procedures from migration file\n   */\n  async installStoredProcedures(): Promise<void> {\n    try {\n      logger.info('Installing stored procedures...');\n\n      // This would typically be handled by a migration system\n      // For now, we'll just log that procedures should be installed manually\n      logger.warn('Stored procedures should be installed via migration system');\n      logger.info('Run the SQL file: prisma/migrations/001_create_metrics_procedures.sql');\n      \n    } catch (error) {\n      logger.error('Error installing stored procedures:', error);\n      throw new Error('Failed to install stored procedures');\n    }\n  }\n\n  /**\n   * Get performance statistics for stored procedures\n   */\n  async getPerformanceStats(): Promise<{\n    procedure_name: string;\n    calls: number;\n    total_time: number;\n    mean_time: number;\n  }[]> {\n    try {\n      // This requires pg_stat_statements extension\n      const result = await this.prisma.$queryRaw<{\n        procedure_name: string;\n        calls: number;\n        total_time: number;\n        mean_time: number;\n      }[]>`\n        SELECT \n          regexp_replace(query, '^SELECT \\* FROM (\\w+)\\(.*', '\\\\1') as procedure_name,\n          calls,\n          total_exec_time as total_time,\n          mean_exec_time as mean_time\n        FROM pg_stat_statements \n        WHERE query LIKE 'SELECT * FROM calculate_%' \n           OR query LIKE 'SELECT * FROM get_%'\n           OR query LIKE 'SELECT * FROM aggregate_%'\n           OR query LIKE 'SELECT * FROM cleanup_%'\n        ORDER BY calls DESC\n      `;\n\n      return result;\n    } catch (error) {\n      logger.warn('Performance stats not available (pg_stat_statements extension may not be enabled)');\n      return [];\n    }\n  }\n}\n\n// Singleton instance\nlet storedProceduresService: StoredProceduresService;\n\nexport const getStoredProceduresService = (prisma?: PrismaService): StoredProceduresService => {\n  if (!storedProceduresService) {\n    if (!prisma) {\n      throw new Error('PrismaService is required to initialize StoredProceduresService');\n    }\n    storedProceduresService = new StoredProceduresService(prisma);\n  }\n  return storedProceduresService;\n};"],
      version: 3
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "d571824bbd980422c1693e5569577ab219ba22ca"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_2m5wgvitkk = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_2m5wgvitkk();
import { logger } from '../utils/logger';
export class StoredProceduresService {
  prisma;
  constructor(prisma) {
    /* istanbul ignore next */
    cov_2m5wgvitkk().f[0]++;
    cov_2m5wgvitkk().s[0]++;
    this.prisma = prisma;
  }
  /**
   * Calculate KPI metrics using optimized stored procedure
   */
  async calculateKPIMetrics(organizationId, campaignIds, startDate, endDate) {
    /* istanbul ignore next */
    cov_2m5wgvitkk().f[1]++;
    cov_2m5wgvitkk().s[1]++;
    try {
      const start =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[2]++,
      /* istanbul ignore next */
      (cov_2m5wgvitkk().b[0][0]++, startDate) ||
      /* istanbul ignore next */
      (cov_2m5wgvitkk().b[0][1]++, new Date(Date.now() - 30 * 24 * 60 * 60 * 1000))); // Default: 30 days ago
      const end =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[3]++,
      /* istanbul ignore next */
      (cov_2m5wgvitkk().b[1][0]++, endDate) ||
      /* istanbul ignore next */
      (cov_2m5wgvitkk().b[1][1]++, new Date()));
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[4]++;
      logger.debug('Executing calculate_kpi_metrics stored procedure', {
        organizationId,
        campaignIds,
        startDate: start,
        endDate: end
      });
      const result =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[5]++, await this.prisma.$queryRaw`
        SELECT * FROM calculate_kpi_metrics(
          ${organizationId}::uuid,
          ${campaignIds ?
      /* istanbul ignore next */
      (cov_2m5wgvitkk().b[2][0]++, `ARRAY[${campaignIds.map(id => {
        /* istanbul ignore next */
        cov_2m5wgvitkk().f[2]++;
        cov_2m5wgvitkk().s[6]++;
        return `'${id}'::uuid`;
      }).join(',')}]`) :
      /* istanbul ignore next */
      (cov_2m5wgvitkk().b[2][1]++, 'NULL')}::uuid[],
          ${start}::date,
          ${end}::date
        )
      `);
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[7]++;
      return /* istanbul ignore next */(cov_2m5wgvitkk().b[3][0]++, result[0]) ||
      /* istanbul ignore next */
      (cov_2m5wgvitkk().b[3][1]++, null);
    } catch (error) {
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[8]++;
      logger.error('Error executing calculate_kpi_metrics stored procedure:', error);
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[9]++;
      throw new Error('Failed to calculate KPI metrics using stored procedure');
    }
  }
  /**
   * Get top performing campaigns using stored procedure
   */
  async getTopCampaigns(organizationId, startDate, endDate, limit =
  /* istanbul ignore next */
  (cov_2m5wgvitkk().b[4][0]++, 10)) {
    /* istanbul ignore next */
    cov_2m5wgvitkk().f[3]++;
    cov_2m5wgvitkk().s[10]++;
    try {
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[11]++;
      logger.debug('Executing get_top_campaigns stored procedure', {
        organizationId,
        startDate,
        endDate,
        limit
      });
      const result =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[12]++, await this.prisma.$queryRaw`
        SELECT * FROM get_top_campaigns(
          ${organizationId}::uuid,
          ${startDate}::date,
          ${endDate}::date,
          ${limit}::integer
        )
      `);
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[13]++;
      return result;
    } catch (error) {
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[14]++;
      logger.error('Error executing get_top_campaigns stored procedure:', error);
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[15]++;
      throw new Error('Failed to get top campaigns using stored procedure');
    }
  }
  /**
   * Calculate funnel metrics using stored procedure
   */
  async calculateFunnelMetrics(campaignId, startDate, endDate) {
    /* istanbul ignore next */
    cov_2m5wgvitkk().f[4]++;
    cov_2m5wgvitkk().s[16]++;
    try {
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[17]++;
      logger.debug('Executing calculate_funnel_metrics stored procedure', {
        campaignId,
        startDate,
        endDate
      });
      const result =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[18]++, await this.prisma.$queryRaw`
        SELECT * FROM calculate_funnel_metrics(
          ${campaignId}::uuid,
          ${startDate}::date,
          ${endDate}::date
        )
      `);
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[19]++;
      return result;
    } catch (error) {
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[20]++;
      logger.error('Error executing calculate_funnel_metrics stored procedure:', error);
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[21]++;
      throw new Error('Failed to calculate funnel metrics using stored procedure');
    }
  }
  /**
   * Get real-time dashboard metrics using stored procedure
   */
  async getRealtimeDashboard(organizationId, hoursBack =
  /* istanbul ignore next */
  (cov_2m5wgvitkk().b[5][0]++, 24)) {
    /* istanbul ignore next */
    cov_2m5wgvitkk().f[5]++;
    cov_2m5wgvitkk().s[22]++;
    try {
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[23]++;
      logger.debug('Executing get_realtime_dashboard stored procedure', {
        organizationId,
        hoursBack
      });
      const result =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[24]++, await this.prisma.$queryRaw`
        SELECT * FROM get_realtime_dashboard(
          ${organizationId}::uuid,
          ${hoursBack}::integer
        )
      `);
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[25]++;
      return /* istanbul ignore next */(cov_2m5wgvitkk().b[6][0]++, result[0]) ||
      /* istanbul ignore next */
      (cov_2m5wgvitkk().b[6][1]++, null);
    } catch (error) {
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[26]++;
      logger.error('Error executing get_realtime_dashboard stored procedure:', error);
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[27]++;
      throw new Error('Failed to get realtime dashboard using stored procedure');
    }
  }
  /**
   * Aggregate hourly metrics to daily using stored procedure
   */
  async aggregateHourlyToDaily(targetDate) {
    /* istanbul ignore next */
    cov_2m5wgvitkk().f[6]++;
    cov_2m5wgvitkk().s[28]++;
    try {
      const date =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[29]++,
      /* istanbul ignore next */
      (cov_2m5wgvitkk().b[7][0]++, targetDate) ||
      /* istanbul ignore next */
      (cov_2m5wgvitkk().b[7][1]++, new Date(Date.now() - 24 * 60 * 60 * 1000))); // Default: yesterday
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[30]++;
      logger.debug('Executing aggregate_hourly_to_daily stored procedure', {
        targetDate: date
      });
      const result =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[31]++, await this.prisma.$queryRaw`
        SELECT aggregate_hourly_to_daily(${date}::date) as aggregate_hourly_to_daily
      `);
      const processedCount =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[32]++,
      /* istanbul ignore next */
      (cov_2m5wgvitkk().b[8][0]++, result[0]?.aggregate_hourly_to_daily) ||
      /* istanbul ignore next */
      (cov_2m5wgvitkk().b[8][1]++, 0));
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[33]++;
      logger.info(`Aggregated ${processedCount} campaign metrics for date ${date.toISOString().split('T')[0]}`);
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[34]++;
      return processedCount;
    } catch (error) {
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[35]++;
      logger.error('Error executing aggregate_hourly_to_daily stored procedure:', error);
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[36]++;
      throw new Error('Failed to aggregate hourly metrics using stored procedure');
    }
  }
  /**
   * Clean up old metrics data using stored procedure
   */
  async cleanupOldMetrics(retentionDays =
  /* istanbul ignore next */
  (cov_2m5wgvitkk().b[9][0]++, 90)) {
    /* istanbul ignore next */
    cov_2m5wgvitkk().f[7]++;
    cov_2m5wgvitkk().s[37]++;
    try {
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[38]++;
      logger.debug('Executing cleanup_old_metrics stored procedure', {
        retentionDays
      });
      const result =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[39]++, await this.prisma.$queryRaw`
        SELECT cleanup_old_metrics(${retentionDays}::integer) as cleanup_old_metrics
      `);
      const deletedCount =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[40]++,
      /* istanbul ignore next */
      (cov_2m5wgvitkk().b[10][0]++, result[0]?.cleanup_old_metrics) ||
      /* istanbul ignore next */
      (cov_2m5wgvitkk().b[10][1]++, 0));
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[41]++;
      logger.info(`Cleaned up ${deletedCount} old metric records with retention of ${retentionDays} days`);
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[42]++;
      return deletedCount;
    } catch (error) {
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[43]++;
      logger.error('Error executing cleanup_old_metrics stored procedure:', error);
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[44]++;
      throw new Error('Failed to cleanup old metrics using stored procedure');
    }
  }
  /**
   * Execute custom SQL query with proper error handling
   */
  async executeCustomQuery(query, params =
  /* istanbul ignore next */
  (cov_2m5wgvitkk().b[11][0]++, [])) {
    /* istanbul ignore next */
    cov_2m5wgvitkk().f[8]++;
    cov_2m5wgvitkk().s[45]++;
    try {
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[46]++;
      logger.debug('Executing custom SQL query', {
        query,
        params
      });
      const result =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[47]++, await this.prisma.$queryRawUnsafe(query, ...params));
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[48]++;
      return result;
    } catch (error) {
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[49]++;
      logger.error('Error executing custom SQL query:', error);
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[50]++;
      throw new Error('Failed to execute custom SQL query');
    }
  }
  /**
   * Check if stored procedures are available
   */
  async checkStoredProceduresHealth() {
    /* istanbul ignore next */
    cov_2m5wgvitkk().f[9]++;
    cov_2m5wgvitkk().s[51]++;
    try {
      const expectedProcedures =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[52]++, ['calculate_kpi_metrics', 'get_top_campaigns', 'calculate_funnel_metrics', 'aggregate_hourly_to_daily', 'cleanup_old_metrics', 'get_realtime_dashboard']);
      const result =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[53]++, await this.prisma.$queryRaw`
        SELECT routine_name 
        FROM information_schema.routines 
        WHERE routine_type = 'FUNCTION' 
        AND routine_name = ANY(ARRAY[${expectedProcedures.map(p => {
        /* istanbul ignore next */
        cov_2m5wgvitkk().f[10]++;
        cov_2m5wgvitkk().s[54]++;
        return `'${p}'`;
      }).join(',')}])
      `);
      const availableProcedures =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[55]++, result.map(r => {
        /* istanbul ignore next */
        cov_2m5wgvitkk().f[11]++;
        cov_2m5wgvitkk().s[56]++;
        return r.routine_name;
      }));
      const missingProcedures =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[57]++, expectedProcedures.filter(proc => {
        /* istanbul ignore next */
        cov_2m5wgvitkk().f[12]++;
        cov_2m5wgvitkk().s[58]++;
        return !availableProcedures.includes(proc);
      }));
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[59]++;
      return {
        available: missingProcedures.length === 0,
        procedures: availableProcedures,
        missing: missingProcedures
      };
    } catch (error) {
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[60]++;
      logger.error('Error checking stored procedures health:', error);
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[61]++;
      return {
        available: false,
        procedures: [],
        missing: []
      };
    }
  }
  /**
   * Install stored procedures from migration file
   */
  async installStoredProcedures() {
    /* istanbul ignore next */
    cov_2m5wgvitkk().f[13]++;
    cov_2m5wgvitkk().s[62]++;
    try {
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[63]++;
      logger.info('Installing stored procedures...');
      // This would typically be handled by a migration system
      // For now, we'll just log that procedures should be installed manually
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[64]++;
      logger.warn('Stored procedures should be installed via migration system');
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[65]++;
      logger.info('Run the SQL file: prisma/migrations/001_create_metrics_procedures.sql');
    } catch (error) {
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[66]++;
      logger.error('Error installing stored procedures:', error);
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[67]++;
      throw new Error('Failed to install stored procedures');
    }
  }
  /**
   * Get performance statistics for stored procedures
   */
  async getPerformanceStats() {
    /* istanbul ignore next */
    cov_2m5wgvitkk().f[14]++;
    cov_2m5wgvitkk().s[68]++;
    try {
      // This requires pg_stat_statements extension
      const result =
      /* istanbul ignore next */
      (cov_2m5wgvitkk().s[69]++, await this.prisma.$queryRaw`
        SELECT 
          regexp_replace(query, '^SELECT \* FROM (\w+)\(.*', '\\1') as procedure_name,
          calls,
          total_exec_time as total_time,
          mean_exec_time as mean_time
        FROM pg_stat_statements 
        WHERE query LIKE 'SELECT * FROM calculate_%' 
           OR query LIKE 'SELECT * FROM get_%'
           OR query LIKE 'SELECT * FROM aggregate_%'
           OR query LIKE 'SELECT * FROM cleanup_%'
        ORDER BY calls DESC
      `);
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[70]++;
      return result;
    } catch (error) {
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[71]++;
      logger.warn('Performance stats not available (pg_stat_statements extension may not be enabled)');
      /* istanbul ignore next */
      cov_2m5wgvitkk().s[72]++;
      return [];
    }
  }
}
// Singleton instance
let storedProceduresService;
/* istanbul ignore next */
cov_2m5wgvitkk().s[73]++;
export const getStoredProceduresService = prisma => {
  /* istanbul ignore next */
  cov_2m5wgvitkk().f[15]++;
  cov_2m5wgvitkk().s[74]++;
  if (!storedProceduresService) {
    /* istanbul ignore next */
    cov_2m5wgvitkk().b[12][0]++;
    cov_2m5wgvitkk().s[75]++;
    if (!prisma) {
      /* istanbul ignore next */
      cov_2m5wgvitkk().b[13][0]++;
      cov_2m5wgvitkk().s[76]++;
      throw new Error('PrismaService is required to initialize StoredProceduresService');
    } else
    /* istanbul ignore next */
    {
      cov_2m5wgvitkk().b[13][1]++;
    }
    cov_2m5wgvitkk().s[77]++;
    storedProceduresService = new StoredProceduresService(prisma);
  } else
  /* istanbul ignore next */
  {
    cov_2m5wgvitkk().b[12][1]++;
  }
  cov_2m5wgvitkk().s[78]++;
  return storedProceduresService;
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJsb2dnZXIiLCJTdG9yZWRQcm9jZWR1cmVzU2VydmljZSIsInByaXNtYSIsImNvbnN0cnVjdG9yIiwiY292XzJtNXdndml0a2siLCJmIiwicyIsImNhbGN1bGF0ZUtQSU1ldHJpY3MiLCJvcmdhbml6YXRpb25JZCIsImNhbXBhaWduSWRzIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsInN0YXJ0IiwiYiIsIkRhdGUiLCJub3ciLCJlbmQiLCJkZWJ1ZyIsInJlc3VsdCIsIiRxdWVyeVJhdyIsIm1hcCIsImlkIiwiam9pbiIsImVycm9yIiwiRXJyb3IiLCJnZXRUb3BDYW1wYWlnbnMiLCJsaW1pdCIsImNhbGN1bGF0ZUZ1bm5lbE1ldHJpY3MiLCJjYW1wYWlnbklkIiwiZ2V0UmVhbHRpbWVEYXNoYm9hcmQiLCJob3Vyc0JhY2siLCJhZ2dyZWdhdGVIb3VybHlUb0RhaWx5IiwidGFyZ2V0RGF0ZSIsImRhdGUiLCJwcm9jZXNzZWRDb3VudCIsImFnZ3JlZ2F0ZV9ob3VybHlfdG9fZGFpbHkiLCJpbmZvIiwidG9JU09TdHJpbmciLCJzcGxpdCIsImNsZWFudXBPbGRNZXRyaWNzIiwicmV0ZW50aW9uRGF5cyIsImRlbGV0ZWRDb3VudCIsImNsZWFudXBfb2xkX21ldHJpY3MiLCJleGVjdXRlQ3VzdG9tUXVlcnkiLCJxdWVyeSIsInBhcmFtcyIsIiRxdWVyeVJhd1Vuc2FmZSIsImNoZWNrU3RvcmVkUHJvY2VkdXJlc0hlYWx0aCIsImV4cGVjdGVkUHJvY2VkdXJlcyIsInAiLCJhdmFpbGFibGVQcm9jZWR1cmVzIiwiciIsInJvdXRpbmVfbmFtZSIsIm1pc3NpbmdQcm9jZWR1cmVzIiwiZmlsdGVyIiwicHJvYyIsImluY2x1ZGVzIiwiYXZhaWxhYmxlIiwibGVuZ3RoIiwicHJvY2VkdXJlcyIsIm1pc3NpbmciLCJpbnN0YWxsU3RvcmVkUHJvY2VkdXJlcyIsIndhcm4iLCJnZXRQZXJmb3JtYW5jZVN0YXRzIiwic3RvcmVkUHJvY2VkdXJlc1NlcnZpY2UiLCJnZXRTdG9yZWRQcm9jZWR1cmVzU2VydmljZSJdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcRW56byBNYXJjZWxvXFxEZXNrdG9wXFxQcm9qZXRvcyBFbXByZXNhXFxTYWFzIFV0bWlmeVxcdXRtaWZ5LWNsb25lXFxhcHBzXFxhcGlcXHNyY1xcc2VydmljZXNcXHN0b3JlZC1wcm9jZWR1cmVzLnNlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hU2VydmljZSB9IGZyb20gJy4uL2RhdGFiYXNlL3ByaXNtYS5zZXJ2aWNlJztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJy4uL3V0aWxzL2xvZ2dlcic7XG5cbi8vIEludGVyZmFjZXMgZm9yIHN0b3JlZCBwcm9jZWR1cmUgcmVzdWx0c1xuZXhwb3J0IGludGVyZmFjZSBTdG9yZWRQcm9jZWR1cmVLUElSZXN1bHQge1xuICByZXZlbnVlOiBudW1iZXI7XG4gIGFkX3NwZW5kOiBudW1iZXI7XG4gIGltcHJlc3Npb25zOiBudW1iZXI7XG4gIGNsaWNrczogbnVtYmVyO1xuICBjb252ZXJzaW9uczogbnVtYmVyO1xuICByb2FzOiBudW1iZXI7XG4gIHJvaTogbnVtYmVyO1xuICBjcGM6IG51bWJlcjtcbiAgY3BtOiBudW1iZXI7XG4gIGNhYzogbnVtYmVyO1xuICBjdHI6IG51bWJlcjtcbiAgY29udmVyc2lvbl9yYXRlOiBudW1iZXI7XG4gIGFycHU6IG51bWJlcjtcbiAgbHR2OiBudW1iZXI7XG4gIG1hcmdpbjogbnVtYmVyO1xuICBwcm9maXQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUb3BDYW1wYWlnblJlc3VsdCB7XG4gIGNhbXBhaWduX2lkOiBzdHJpbmc7XG4gIGNhbXBhaWduX25hbWU6IHN0cmluZztcbiAgcmV2ZW51ZTogbnVtYmVyO1xuICBhZF9zcGVuZDogbnVtYmVyO1xuICByb2FzOiBudW1iZXI7XG4gIGNvbnZlcnNpb25zOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRnVubmVsTWV0cmljUmVzdWx0IHtcbiAgc3RhZ2VfbmFtZTogc3RyaW5nO1xuICBzdGFnZV9vcmRlcjogbnVtYmVyO1xuICB1c2VyczogbnVtYmVyO1xuICBjb252ZXJzaW9uX3JhdGU6IG51bWJlcjtcbiAgZHJvcG9mZl9yYXRlOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVhbHRpbWVEYXNoYm9hcmRSZXN1bHQge1xuICB0b3RhbF9pbXByZXNzaW9uczogbnVtYmVyO1xuICB0b3RhbF9jbGlja3M6IG51bWJlcjtcbiAgdG90YWxfY29udmVyc2lvbnM6IG51bWJlcjtcbiAgdG90YWxfcmV2ZW51ZTogbnVtYmVyO1xuICB0b3RhbF9hZF9zcGVuZDogbnVtYmVyO1xuICBhdmdfY3RyOiBudW1iZXI7XG4gIGF2Z19jb252ZXJzaW9uX3JhdGU6IG51bWJlcjtcbiAgY3VycmVudF9yb2FzOiBudW1iZXI7XG59XG5cbmV4cG9ydCBjbGFzcyBTdG9yZWRQcm9jZWR1cmVzU2VydmljZSB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcHJpc21hOiBQcmlzbWFTZXJ2aWNlKSB7fVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgS1BJIG1ldHJpY3MgdXNpbmcgb3B0aW1pemVkIHN0b3JlZCBwcm9jZWR1cmVcbiAgICovXG4gIGFzeW5jIGNhbGN1bGF0ZUtQSU1ldHJpY3MoXG4gICAgb3JnYW5pemF0aW9uSWQ6IHN0cmluZyxcbiAgICBjYW1wYWlnbklkcz86IHN0cmluZ1tdLFxuICAgIHN0YXJ0RGF0ZT86IERhdGUsXG4gICAgZW5kRGF0ZT86IERhdGVcbiAgKTogUHJvbWlzZTxTdG9yZWRQcm9jZWR1cmVLUElSZXN1bHQgfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0YXJ0ID0gc3RhcnREYXRlIHx8IG5ldyBEYXRlKERhdGUubm93KCkgLSAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApOyAvLyBEZWZhdWx0OiAzMCBkYXlzIGFnb1xuICAgICAgY29uc3QgZW5kID0gZW5kRGF0ZSB8fCBuZXcgRGF0ZSgpO1xuXG4gICAgICBsb2dnZXIuZGVidWcoJ0V4ZWN1dGluZyBjYWxjdWxhdGVfa3BpX21ldHJpY3Mgc3RvcmVkIHByb2NlZHVyZScsIHtcbiAgICAgICAgb3JnYW5pemF0aW9uSWQsXG4gICAgICAgIGNhbXBhaWduSWRzLFxuICAgICAgICBzdGFydERhdGU6IHN0YXJ0LFxuICAgICAgICBlbmREYXRlOiBlbmQsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5wcmlzbWEuJHF1ZXJ5UmF3PFN0b3JlZFByb2NlZHVyZUtQSVJlc3VsdFtdPmBcbiAgICAgICAgU0VMRUNUICogRlJPTSBjYWxjdWxhdGVfa3BpX21ldHJpY3MoXG4gICAgICAgICAgJHtvcmdhbml6YXRpb25JZH06OnV1aWQsXG4gICAgICAgICAgJHtjYW1wYWlnbklkcyA/IGBBUlJBWVske2NhbXBhaWduSWRzLm1hcChpZCA9PiBgJyR7aWR9Jzo6dXVpZGApLmpvaW4oJywnKX1dYCA6ICdOVUxMJ306OnV1aWRbXSxcbiAgICAgICAgICAke3N0YXJ0fTo6ZGF0ZSxcbiAgICAgICAgICAke2VuZH06OmRhdGVcbiAgICAgICAgKVxuICAgICAgYDtcblxuICAgICAgcmV0dXJuIHJlc3VsdFswXSB8fCBudWxsO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGV4ZWN1dGluZyBjYWxjdWxhdGVfa3BpX21ldHJpY3Mgc3RvcmVkIHByb2NlZHVyZTonLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBjYWxjdWxhdGUgS1BJIG1ldHJpY3MgdXNpbmcgc3RvcmVkIHByb2NlZHVyZScpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdG9wIHBlcmZvcm1pbmcgY2FtcGFpZ25zIHVzaW5nIHN0b3JlZCBwcm9jZWR1cmVcbiAgICovXG4gIGFzeW5jIGdldFRvcENhbXBhaWducyhcbiAgICBvcmdhbml6YXRpb25JZDogc3RyaW5nLFxuICAgIHN0YXJ0RGF0ZTogRGF0ZSxcbiAgICBlbmREYXRlOiBEYXRlLFxuICAgIGxpbWl0OiBudW1iZXIgPSAxMFxuICApOiBQcm9taXNlPFRvcENhbXBhaWduUmVzdWx0W10+IHtcbiAgICB0cnkge1xuICAgICAgbG9nZ2VyLmRlYnVnKCdFeGVjdXRpbmcgZ2V0X3RvcF9jYW1wYWlnbnMgc3RvcmVkIHByb2NlZHVyZScsIHtcbiAgICAgICAgb3JnYW5pemF0aW9uSWQsXG4gICAgICAgIHN0YXJ0RGF0ZSxcbiAgICAgICAgZW5kRGF0ZSxcbiAgICAgICAgbGltaXQsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5wcmlzbWEuJHF1ZXJ5UmF3PFRvcENhbXBhaWduUmVzdWx0W10+YFxuICAgICAgICBTRUxFQ1QgKiBGUk9NIGdldF90b3BfY2FtcGFpZ25zKFxuICAgICAgICAgICR7b3JnYW5pemF0aW9uSWR9Ojp1dWlkLFxuICAgICAgICAgICR7c3RhcnREYXRlfTo6ZGF0ZSxcbiAgICAgICAgICAke2VuZERhdGV9OjpkYXRlLFxuICAgICAgICAgICR7bGltaXR9OjppbnRlZ2VyXG4gICAgICAgIClcbiAgICAgIGA7XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZXhlY3V0aW5nIGdldF90b3BfY2FtcGFpZ25zIHN0b3JlZCBwcm9jZWR1cmU6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZ2V0IHRvcCBjYW1wYWlnbnMgdXNpbmcgc3RvcmVkIHByb2NlZHVyZScpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgZnVubmVsIG1ldHJpY3MgdXNpbmcgc3RvcmVkIHByb2NlZHVyZVxuICAgKi9cbiAgYXN5bmMgY2FsY3VsYXRlRnVubmVsTWV0cmljcyhcbiAgICBjYW1wYWlnbklkOiBzdHJpbmcsXG4gICAgc3RhcnREYXRlOiBEYXRlLFxuICAgIGVuZERhdGU6IERhdGVcbiAgKTogUHJvbWlzZTxGdW5uZWxNZXRyaWNSZXN1bHRbXT4ge1xuICAgIHRyeSB7XG4gICAgICBsb2dnZXIuZGVidWcoJ0V4ZWN1dGluZyBjYWxjdWxhdGVfZnVubmVsX21ldHJpY3Mgc3RvcmVkIHByb2NlZHVyZScsIHtcbiAgICAgICAgY2FtcGFpZ25JZCxcbiAgICAgICAgc3RhcnREYXRlLFxuICAgICAgICBlbmREYXRlLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucHJpc21hLiRxdWVyeVJhdzxGdW5uZWxNZXRyaWNSZXN1bHRbXT5gXG4gICAgICAgIFNFTEVDVCAqIEZST00gY2FsY3VsYXRlX2Z1bm5lbF9tZXRyaWNzKFxuICAgICAgICAgICR7Y2FtcGFpZ25JZH06OnV1aWQsXG4gICAgICAgICAgJHtzdGFydERhdGV9OjpkYXRlLFxuICAgICAgICAgICR7ZW5kRGF0ZX06OmRhdGVcbiAgICAgICAgKVxuICAgICAgYDtcblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBleGVjdXRpbmcgY2FsY3VsYXRlX2Z1bm5lbF9tZXRyaWNzIHN0b3JlZCBwcm9jZWR1cmU6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gY2FsY3VsYXRlIGZ1bm5lbCBtZXRyaWNzIHVzaW5nIHN0b3JlZCBwcm9jZWR1cmUnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHJlYWwtdGltZSBkYXNoYm9hcmQgbWV0cmljcyB1c2luZyBzdG9yZWQgcHJvY2VkdXJlXG4gICAqL1xuICBhc3luYyBnZXRSZWFsdGltZURhc2hib2FyZChcbiAgICBvcmdhbml6YXRpb25JZDogc3RyaW5nLFxuICAgIGhvdXJzQmFjazogbnVtYmVyID0gMjRcbiAgKTogUHJvbWlzZTxSZWFsdGltZURhc2hib2FyZFJlc3VsdCB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgbG9nZ2VyLmRlYnVnKCdFeGVjdXRpbmcgZ2V0X3JlYWx0aW1lX2Rhc2hib2FyZCBzdG9yZWQgcHJvY2VkdXJlJywge1xuICAgICAgICBvcmdhbml6YXRpb25JZCxcbiAgICAgICAgaG91cnNCYWNrLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucHJpc21hLiRxdWVyeVJhdzxSZWFsdGltZURhc2hib2FyZFJlc3VsdFtdPmBcbiAgICAgICAgU0VMRUNUICogRlJPTSBnZXRfcmVhbHRpbWVfZGFzaGJvYXJkKFxuICAgICAgICAgICR7b3JnYW5pemF0aW9uSWR9Ojp1dWlkLFxuICAgICAgICAgICR7aG91cnNCYWNrfTo6aW50ZWdlclxuICAgICAgICApXG4gICAgICBgO1xuXG4gICAgICByZXR1cm4gcmVzdWx0WzBdIHx8IG51bGw7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZXhlY3V0aW5nIGdldF9yZWFsdGltZV9kYXNoYm9hcmQgc3RvcmVkIHByb2NlZHVyZTonLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBnZXQgcmVhbHRpbWUgZGFzaGJvYXJkIHVzaW5nIHN0b3JlZCBwcm9jZWR1cmUnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWdncmVnYXRlIGhvdXJseSBtZXRyaWNzIHRvIGRhaWx5IHVzaW5nIHN0b3JlZCBwcm9jZWR1cmVcbiAgICovXG4gIGFzeW5jIGFnZ3JlZ2F0ZUhvdXJseVRvRGFpbHkodGFyZ2V0RGF0ZT86IERhdGUpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkYXRlID0gdGFyZ2V0RGF0ZSB8fCBuZXcgRGF0ZShEYXRlLm5vdygpIC0gMjQgKiA2MCAqIDYwICogMTAwMCk7IC8vIERlZmF1bHQ6IHllc3RlcmRheVxuXG4gICAgICBsb2dnZXIuZGVidWcoJ0V4ZWN1dGluZyBhZ2dyZWdhdGVfaG91cmx5X3RvX2RhaWx5IHN0b3JlZCBwcm9jZWR1cmUnLCB7XG4gICAgICAgIHRhcmdldERhdGU6IGRhdGUsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5wcmlzbWEuJHF1ZXJ5UmF3PHsgYWdncmVnYXRlX2hvdXJseV90b19kYWlseTogbnVtYmVyIH1bXT5gXG4gICAgICAgIFNFTEVDVCBhZ2dyZWdhdGVfaG91cmx5X3RvX2RhaWx5KCR7ZGF0ZX06OmRhdGUpIGFzIGFnZ3JlZ2F0ZV9ob3VybHlfdG9fZGFpbHlcbiAgICAgIGA7XG5cbiAgICAgIGNvbnN0IHByb2Nlc3NlZENvdW50ID0gcmVzdWx0WzBdPy5hZ2dyZWdhdGVfaG91cmx5X3RvX2RhaWx5IHx8IDA7XG4gICAgICBcbiAgICAgIGxvZ2dlci5pbmZvKGBBZ2dyZWdhdGVkICR7cHJvY2Vzc2VkQ291bnR9IGNhbXBhaWduIG1ldHJpY3MgZm9yIGRhdGUgJHtkYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXX1gKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHByb2Nlc3NlZENvdW50O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGV4ZWN1dGluZyBhZ2dyZWdhdGVfaG91cmx5X3RvX2RhaWx5IHN0b3JlZCBwcm9jZWR1cmU6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gYWdncmVnYXRlIGhvdXJseSBtZXRyaWNzIHVzaW5nIHN0b3JlZCBwcm9jZWR1cmUnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW4gdXAgb2xkIG1ldHJpY3MgZGF0YSB1c2luZyBzdG9yZWQgcHJvY2VkdXJlXG4gICAqL1xuICBhc3luYyBjbGVhbnVwT2xkTWV0cmljcyhyZXRlbnRpb25EYXlzOiBudW1iZXIgPSA5MCk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgdHJ5IHtcbiAgICAgIGxvZ2dlci5kZWJ1ZygnRXhlY3V0aW5nIGNsZWFudXBfb2xkX21ldHJpY3Mgc3RvcmVkIHByb2NlZHVyZScsIHtcbiAgICAgICAgcmV0ZW50aW9uRGF5cyxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnByaXNtYS4kcXVlcnlSYXc8eyBjbGVhbnVwX29sZF9tZXRyaWNzOiBudW1iZXIgfVtdPmBcbiAgICAgICAgU0VMRUNUIGNsZWFudXBfb2xkX21ldHJpY3MoJHtyZXRlbnRpb25EYXlzfTo6aW50ZWdlcikgYXMgY2xlYW51cF9vbGRfbWV0cmljc1xuICAgICAgYDtcblxuICAgICAgY29uc3QgZGVsZXRlZENvdW50ID0gcmVzdWx0WzBdPy5jbGVhbnVwX29sZF9tZXRyaWNzIHx8IDA7XG4gICAgICBcbiAgICAgIGxvZ2dlci5pbmZvKGBDbGVhbmVkIHVwICR7ZGVsZXRlZENvdW50fSBvbGQgbWV0cmljIHJlY29yZHMgd2l0aCByZXRlbnRpb24gb2YgJHtyZXRlbnRpb25EYXlzfSBkYXlzYCk7XG4gICAgICBcbiAgICAgIHJldHVybiBkZWxldGVkQ291bnQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZXhlY3V0aW5nIGNsZWFudXBfb2xkX21ldHJpY3Mgc3RvcmVkIHByb2NlZHVyZTonLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBjbGVhbnVwIG9sZCBtZXRyaWNzIHVzaW5nIHN0b3JlZCBwcm9jZWR1cmUnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBjdXN0b20gU1FMIHF1ZXJ5IHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nXG4gICAqL1xuICBhc3luYyBleGVjdXRlQ3VzdG9tUXVlcnk8VCA9IGFueT4ocXVlcnk6IHN0cmluZywgcGFyYW1zOiBhbnlbXSA9IFtdKTogUHJvbWlzZTxUW10+IHtcbiAgICB0cnkge1xuICAgICAgbG9nZ2VyLmRlYnVnKCdFeGVjdXRpbmcgY3VzdG9tIFNRTCBxdWVyeScsIHsgcXVlcnksIHBhcmFtcyB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5wcmlzbWEuJHF1ZXJ5UmF3VW5zYWZlPFRbXT4ocXVlcnksIC4uLnBhcmFtcyk7XG4gICAgICBcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZXhlY3V0aW5nIGN1c3RvbSBTUUwgcXVlcnk6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZXhlY3V0ZSBjdXN0b20gU1FMIHF1ZXJ5Jyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHN0b3JlZCBwcm9jZWR1cmVzIGFyZSBhdmFpbGFibGVcbiAgICovXG4gIGFzeW5jIGNoZWNrU3RvcmVkUHJvY2VkdXJlc0hlYWx0aCgpOiBQcm9taXNlPHtcbiAgICBhdmFpbGFibGU6IGJvb2xlYW47XG4gICAgcHJvY2VkdXJlczogc3RyaW5nW107XG4gICAgbWlzc2luZzogc3RyaW5nW107XG4gIH0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZXhwZWN0ZWRQcm9jZWR1cmVzID0gW1xuICAgICAgICAnY2FsY3VsYXRlX2twaV9tZXRyaWNzJyxcbiAgICAgICAgJ2dldF90b3BfY2FtcGFpZ25zJyxcbiAgICAgICAgJ2NhbGN1bGF0ZV9mdW5uZWxfbWV0cmljcycsXG4gICAgICAgICdhZ2dyZWdhdGVfaG91cmx5X3RvX2RhaWx5JyxcbiAgICAgICAgJ2NsZWFudXBfb2xkX21ldHJpY3MnLFxuICAgICAgICAnZ2V0X3JlYWx0aW1lX2Rhc2hib2FyZCcsXG4gICAgICBdO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnByaXNtYS4kcXVlcnlSYXc8eyByb3V0aW5lX25hbWU6IHN0cmluZyB9W10+YFxuICAgICAgICBTRUxFQ1Qgcm91dGluZV9uYW1lIFxuICAgICAgICBGUk9NIGluZm9ybWF0aW9uX3NjaGVtYS5yb3V0aW5lcyBcbiAgICAgICAgV0hFUkUgcm91dGluZV90eXBlID0gJ0ZVTkNUSU9OJyBcbiAgICAgICAgQU5EIHJvdXRpbmVfbmFtZSA9IEFOWShBUlJBWVske2V4cGVjdGVkUHJvY2VkdXJlcy5tYXAocCA9PiBgJyR7cH0nYCkuam9pbignLCcpfV0pXG4gICAgICBgO1xuXG4gICAgICBjb25zdCBhdmFpbGFibGVQcm9jZWR1cmVzID0gcmVzdWx0Lm1hcChyID0+IHIucm91dGluZV9uYW1lKTtcbiAgICAgIGNvbnN0IG1pc3NpbmdQcm9jZWR1cmVzID0gZXhwZWN0ZWRQcm9jZWR1cmVzLmZpbHRlcihcbiAgICAgICAgcHJvYyA9PiAhYXZhaWxhYmxlUHJvY2VkdXJlcy5pbmNsdWRlcyhwcm9jKVxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYXZhaWxhYmxlOiBtaXNzaW5nUHJvY2VkdXJlcy5sZW5ndGggPT09IDAsXG4gICAgICAgIHByb2NlZHVyZXM6IGF2YWlsYWJsZVByb2NlZHVyZXMsXG4gICAgICAgIG1pc3Npbmc6IG1pc3NpbmdQcm9jZWR1cmVzLFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBjaGVja2luZyBzdG9yZWQgcHJvY2VkdXJlcyBoZWFsdGg6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYXZhaWxhYmxlOiBmYWxzZSxcbiAgICAgICAgcHJvY2VkdXJlczogW10sXG4gICAgICAgIG1pc3Npbmc6IFtdLFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSW5zdGFsbCBzdG9yZWQgcHJvY2VkdXJlcyBmcm9tIG1pZ3JhdGlvbiBmaWxlXG4gICAqL1xuICBhc3luYyBpbnN0YWxsU3RvcmVkUHJvY2VkdXJlcygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgbG9nZ2VyLmluZm8oJ0luc3RhbGxpbmcgc3RvcmVkIHByb2NlZHVyZXMuLi4nKTtcblxuICAgICAgLy8gVGhpcyB3b3VsZCB0eXBpY2FsbHkgYmUgaGFuZGxlZCBieSBhIG1pZ3JhdGlvbiBzeXN0ZW1cbiAgICAgIC8vIEZvciBub3csIHdlJ2xsIGp1c3QgbG9nIHRoYXQgcHJvY2VkdXJlcyBzaG91bGQgYmUgaW5zdGFsbGVkIG1hbnVhbGx5XG4gICAgICBsb2dnZXIud2FybignU3RvcmVkIHByb2NlZHVyZXMgc2hvdWxkIGJlIGluc3RhbGxlZCB2aWEgbWlncmF0aW9uIHN5c3RlbScpO1xuICAgICAgbG9nZ2VyLmluZm8oJ1J1biB0aGUgU1FMIGZpbGU6IHByaXNtYS9taWdyYXRpb25zLzAwMV9jcmVhdGVfbWV0cmljc19wcm9jZWR1cmVzLnNxbCcpO1xuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgaW5zdGFsbGluZyBzdG9yZWQgcHJvY2VkdXJlczonLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBpbnN0YWxsIHN0b3JlZCBwcm9jZWR1cmVzJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBwZXJmb3JtYW5jZSBzdGF0aXN0aWNzIGZvciBzdG9yZWQgcHJvY2VkdXJlc1xuICAgKi9cbiAgYXN5bmMgZ2V0UGVyZm9ybWFuY2VTdGF0cygpOiBQcm9taXNlPHtcbiAgICBwcm9jZWR1cmVfbmFtZTogc3RyaW5nO1xuICAgIGNhbGxzOiBudW1iZXI7XG4gICAgdG90YWxfdGltZTogbnVtYmVyO1xuICAgIG1lYW5fdGltZTogbnVtYmVyO1xuICB9W10+IHtcbiAgICB0cnkge1xuICAgICAgLy8gVGhpcyByZXF1aXJlcyBwZ19zdGF0X3N0YXRlbWVudHMgZXh0ZW5zaW9uXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnByaXNtYS4kcXVlcnlSYXc8e1xuICAgICAgICBwcm9jZWR1cmVfbmFtZTogc3RyaW5nO1xuICAgICAgICBjYWxsczogbnVtYmVyO1xuICAgICAgICB0b3RhbF90aW1lOiBudW1iZXI7XG4gICAgICAgIG1lYW5fdGltZTogbnVtYmVyO1xuICAgICAgfVtdPmBcbiAgICAgICAgU0VMRUNUIFxuICAgICAgICAgIHJlZ2V4cF9yZXBsYWNlKHF1ZXJ5LCAnXlNFTEVDVCBcXCogRlJPTSAoXFx3KylcXCguKicsICdcXFxcMScpIGFzIHByb2NlZHVyZV9uYW1lLFxuICAgICAgICAgIGNhbGxzLFxuICAgICAgICAgIHRvdGFsX2V4ZWNfdGltZSBhcyB0b3RhbF90aW1lLFxuICAgICAgICAgIG1lYW5fZXhlY190aW1lIGFzIG1lYW5fdGltZVxuICAgICAgICBGUk9NIHBnX3N0YXRfc3RhdGVtZW50cyBcbiAgICAgICAgV0hFUkUgcXVlcnkgTElLRSAnU0VMRUNUICogRlJPTSBjYWxjdWxhdGVfJScgXG4gICAgICAgICAgIE9SIHF1ZXJ5IExJS0UgJ1NFTEVDVCAqIEZST00gZ2V0XyUnXG4gICAgICAgICAgIE9SIHF1ZXJ5IExJS0UgJ1NFTEVDVCAqIEZST00gYWdncmVnYXRlXyUnXG4gICAgICAgICAgIE9SIHF1ZXJ5IExJS0UgJ1NFTEVDVCAqIEZST00gY2xlYW51cF8lJ1xuICAgICAgICBPUkRFUiBCWSBjYWxscyBERVNDXG4gICAgICBgO1xuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIud2FybignUGVyZm9ybWFuY2Ugc3RhdHMgbm90IGF2YWlsYWJsZSAocGdfc3RhdF9zdGF0ZW1lbnRzIGV4dGVuc2lvbiBtYXkgbm90IGJlIGVuYWJsZWQpJyk7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG59XG5cbi8vIFNpbmdsZXRvbiBpbnN0YW5jZVxubGV0IHN0b3JlZFByb2NlZHVyZXNTZXJ2aWNlOiBTdG9yZWRQcm9jZWR1cmVzU2VydmljZTtcblxuZXhwb3J0IGNvbnN0IGdldFN0b3JlZFByb2NlZHVyZXNTZXJ2aWNlID0gKHByaXNtYT86IFByaXNtYVNlcnZpY2UpOiBTdG9yZWRQcm9jZWR1cmVzU2VydmljZSA9PiB7XG4gIGlmICghc3RvcmVkUHJvY2VkdXJlc1NlcnZpY2UpIHtcbiAgICBpZiAoIXByaXNtYSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdQcmlzbWFTZXJ2aWNlIGlzIHJlcXVpcmVkIHRvIGluaXRpYWxpemUgU3RvcmVkUHJvY2VkdXJlc1NlcnZpY2UnKTtcbiAgICB9XG4gICAgc3RvcmVkUHJvY2VkdXJlc1NlcnZpY2UgPSBuZXcgU3RvcmVkUHJvY2VkdXJlc1NlcnZpY2UocHJpc21hKTtcbiAgfVxuICByZXR1cm4gc3RvcmVkUHJvY2VkdXJlc1NlcnZpY2U7XG59OyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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