b60d0daf89f2b9e944b8da76a7b7f24c
/* istanbul ignore next */
function cov_1kcq82k1ge() {
  var path = "C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\middleware\\tenant.middleware.ts";
  var hash = "41395d82572d6ffe42b9f74b5cb60086e501f37c";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\middleware\\tenant.middleware.ts",
    statementMap: {
      "0": {
        start: {
          line: 5,
          column: 32
        },
        end: {
          line: 81,
          column: 1
        }
      },
      "1": {
        start: {
          line: 6,
          column: 4
        },
        end: {
          line: 80,
          column: 5
        }
      },
      "2": {
        start: {
          line: 7,
          column: 25
        },
        end: {
          line: 7,
          column: 29
        }
      },
      "3": {
        start: {
          line: 9,
          column: 21
        },
        end: {
          line: 9,
          column: 47
        }
      },
      "4": {
        start: {
          line: 10,
          column: 26
        },
        end: {
          line: 10,
          column: 48
        }
      },
      "5": {
        start: {
          line: 11,
          column: 8
        },
        end: {
          line: 14,
          column: 9
        }
      },
      "6": {
        start: {
          line: 12,
          column: 12
        },
        end: {
          line: 12,
          column: 35
        }
      },
      "7": {
        start: {
          line: 13,
          column: 12
        },
        end: {
          line: 13,
          column: 72
        }
      },
      "8": {
        start: {
          line: 16,
          column: 8
        },
        end: {
          line: 21,
          column: 9
        }
      },
      "9": {
        start: {
          line: 17,
          column: 12
        },
        end: {
          line: 17,
          column: 66
        }
      },
      "10": {
        start: {
          line: 18,
          column: 12
        },
        end: {
          line: 20,
          column: 13
        }
      },
      "11": {
        start: {
          line: 19,
          column: 16
        },
        end: {
          line: 19,
          column: 73
        }
      },
      "12": {
        start: {
          line: 23,
          column: 8
        },
        end: {
          line: 28,
          column: 9
        }
      },
      "13": {
        start: {
          line: 24,
          column: 12
        },
        end: {
          line: 24,
          column: 55
        }
      },
      "14": {
        start: {
          line: 25,
          column: 12
        },
        end: {
          line: 27,
          column: 13
        }
      },
      "15": {
        start: {
          line: 26,
          column: 16
        },
        end: {
          line: 26,
          column: 78
        }
      },
      "16": {
        start: {
          line: 30,
          column: 8
        },
        end: {
          line: 33,
          column: 9
        }
      },
      "17": {
        start: {
          line: 31,
          column: 12
        },
        end: {
          line: 31,
          column: 32
        }
      },
      "18": {
        start: {
          line: 32,
          column: 12
        },
        end: {
          line: 32,
          column: 76
        }
      },
      "19": {
        start: {
          line: 34,
          column: 8
        },
        end: {
          line: 39,
          column: 9
        }
      },
      "20": {
        start: {
          line: 35,
          column: 12
        },
        end: {
          line: 38,
          column: 15
        }
      },
      "21": {
        start: {
          line: 41,
          column: 29
        },
        end: {
          line: 53,
          column: 10
        }
      },
      "22": {
        start: {
          line: 54,
          column: 8
        },
        end: {
          line: 60,
          column: 9
        }
      },
      "23": {
        start: {
          line: 55,
          column: 12
        },
        end: {
          line: 55,
          column: 80
        }
      },
      "24": {
        start: {
          line: 56,
          column: 12
        },
        end: {
          line: 59,
          column: 15
        }
      },
      "25": {
        start: {
          line: 62,
          column: 8
        },
        end: {
          line: 69,
          column: 10
        }
      },
      "26": {
        start: {
          line: 71,
          column: 8
        },
        end: {
          line: 71,
          column: 72
        }
      },
      "27": {
        start: {
          line: 72,
          column: 8
        },
        end: {
          line: 72,
          column: 88
        }
      },
      "28": {
        start: {
          line: 75,
          column: 8
        },
        end: {
          line: 75,
          column: 78
        }
      },
      "29": {
        start: {
          line: 76,
          column: 8
        },
        end: {
          line: 79,
          column: 11
        }
      },
      "30": {
        start: {
          line: 87,
          column: 4
        },
        end: {
          line: 88,
          column: 20
        }
      },
      "31": {
        start: {
          line: 88,
          column: 8
        },
        end: {
          line: 88,
          column: 20
        }
      },
      "32": {
        start: {
          line: 90,
          column: 28
        },
        end: {
          line: 90,
          column: 46
        }
      },
      "33": {
        start: {
          line: 91,
          column: 18
        },
        end: {
          line: 91,
          column: 44
        }
      },
      "34": {
        start: {
          line: 93,
          column: 4
        },
        end: {
          line: 95,
          column: 5
        }
      },
      "35": {
        start: {
          line: 94,
          column: 8
        },
        end: {
          line: 94,
          column: 20
        }
      },
      "36": {
        start: {
          line: 97,
          column: 4
        },
        end: {
          line: 99,
          column: 5
        }
      },
      "37": {
        start: {
          line: 98,
          column: 8
        },
        end: {
          line: 98,
          column: 24
        }
      },
      "38": {
        start: {
          line: 100,
          column: 4
        },
        end: {
          line: 100,
          column: 16
        }
      },
      "39": {
        start: {
          line: 106,
          column: 4
        },
        end: {
          line: 116,
          column: 5
        }
      },
      "40": {
        start: {
          line: 108,
          column: 8
        },
        end: {
          line: 108,
          column: 78
        }
      },
      "41": {
        start: {
          line: 110,
          column: 8
        },
        end: {
          line: 110,
          column: 77
        }
      },
      "42": {
        start: {
          line: 111,
          column: 8
        },
        end: {
          line: 111,
          column: 54
        }
      },
      "43": {
        start: {
          line: 114,
          column: 8
        },
        end: {
          line: 114,
          column: 78
        }
      },
      "44": {
        start: {
          line: 115,
          column: 8
        },
        end: {
          line: 115,
          column: 20
        }
      },
      "45": {
        start: {
          line: 122,
          column: 4
        },
        end: {
          line: 122,
          column: 43
        }
      },
      "46": {
        start: {
          line: 128,
          column: 4
        },
        end: {
          line: 128,
          column: 41
        }
      },
      "47": {
        start: {
          line: 134,
          column: 4
        },
        end: {
          line: 134,
          column: 40
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 5,
            column: 32
          },
          end: {
            line: 5,
            column: 33
          }
        },
        loc: {
          start: {
            line: 5,
            column: 58
          },
          end: {
            line: 81,
            column: 1
          }
        },
        line: 5
      },
      "1": {
        name: "extractSubdomain",
        decl: {
          start: {
            line: 86,
            column: 9
          },
          end: {
            line: 86,
            column: 25
          }
        },
        loc: {
          start: {
            line: 86,
            column: 32
          },
          end: {
            line: 101,
            column: 1
          }
        },
        line: 86
      },
      "2": {
        name: "setTenantSchema",
        decl: {
          start: {
            line: 105,
            column: 15
          },
          end: {
            line: 105,
            column: 30
          }
        },
        loc: {
          start: {
            line: 105,
            column: 43
          },
          end: {
            line: 117,
            column: 1
          }
        },
        line: 105
      },
      "3": {
        name: "validateTenantAccess",
        decl: {
          start: {
            line: 121,
            column: 16
          },
          end: {
            line: 121,
            column: 36
          }
        },
        loc: {
          start: {
            line: 121,
            column: 67
          },
          end: {
            line: 123,
            column: 1
          }
        },
        line: 121
      },
      "4": {
        name: "generateCacheKey",
        decl: {
          start: {
            line: 127,
            column: 16
          },
          end: {
            line: 127,
            column: 32
          }
        },
        loc: {
          start: {
            line: 127,
            column: 50
          },
          end: {
            line: 129,
            column: 1
          }
        },
        line: 127
      },
      "5": {
        name: "generateQueueName",
        decl: {
          start: {
            line: 133,
            column: 16
          },
          end: {
            line: 133,
            column: 33
          }
        },
        loc: {
          start: {
            line: 133,
            column: 57
          },
          end: {
            line: 135,
            column: 1
          }
        },
        line: 133
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 9,
            column: 21
          },
          end: {
            line: 9,
            column: 47
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 9,
            column: 21
          },
          end: {
            line: 9,
            column: 41
          }
        }, {
          start: {
            line: 9,
            column: 45
          },
          end: {
            line: 9,
            column: 47
          }
        }],
        line: 9
      },
      "1": {
        loc: {
          start: {
            line: 11,
            column: 8
          },
          end: {
            line: 14,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 11,
            column: 8
          },
          end: {
            line: 14,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 11
      },
      "2": {
        loc: {
          start: {
            line: 11,
            column: 12
          },
          end: {
            line: 11,
            column: 67
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 11,
            column: 12
          },
          end: {
            line: 11,
            column: 21
          }
        }, {
          start: {
            line: 11,
            column: 25
          },
          end: {
            line: 11,
            column: 44
          }
        }, {
          start: {
            line: 11,
            column: 48
          },
          end: {
            line: 11,
            column: 67
          }
        }],
        line: 11
      },
      "3": {
        loc: {
          start: {
            line: 16,
            column: 8
          },
          end: {
            line: 21,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 16,
            column: 8
          },
          end: {
            line: 21,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 16
      },
      "4": {
        loc: {
          start: {
            line: 17,
            column: 25
          },
          end: {
            line: 17,
            column: 65
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 17,
            column: 25
          },
          end: {
            line: 17,
            column: 57
          }
        }, {
          start: {
            line: 17,
            column: 61
          },
          end: {
            line: 17,
            column: 65
          }
        }],
        line: 17
      },
      "5": {
        loc: {
          start: {
            line: 18,
            column: 12
          },
          end: {
            line: 20,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 18,
            column: 12
          },
          end: {
            line: 20,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 18
      },
      "6": {
        loc: {
          start: {
            line: 23,
            column: 8
          },
          end: {
            line: 28,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 23,
            column: 8
          },
          end: {
            line: 28,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 23
      },
      "7": {
        loc: {
          start: {
            line: 23,
            column: 12
          },
          end: {
            line: 23,
            column: 65
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 23,
            column: 12
          },
          end: {
            line: 23,
            column: 23
          }
        }, {
          start: {
            line: 23,
            column: 27
          },
          end: {
            line: 23,
            column: 65
          }
        }],
        line: 23
      },
      "8": {
        loc: {
          start: {
            line: 24,
            column: 25
          },
          end: {
            line: 24,
            column: 54
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 24,
            column: 25
          },
          end: {
            line: 24,
            column: 46
          }
        }, {
          start: {
            line: 24,
            column: 50
          },
          end: {
            line: 24,
            column: 54
          }
        }],
        line: 24
      },
      "9": {
        loc: {
          start: {
            line: 25,
            column: 12
          },
          end: {
            line: 27,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 25,
            column: 12
          },
          end: {
            line: 27,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 25
      },
      "10": {
        loc: {
          start: {
            line: 30,
            column: 8
          },
          end: {
            line: 33,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 30,
            column: 8
          },
          end: {
            line: 33,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 30
      },
      "11": {
        loc: {
          start: {
            line: 30,
            column: 12
          },
          end: {
            line: 30,
            column: 65
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 30,
            column: 12
          },
          end: {
            line: 30,
            column: 23
          }
        }, {
          start: {
            line: 30,
            column: 27
          },
          end: {
            line: 30,
            column: 65
          }
        }],
        line: 30
      },
      "12": {
        loc: {
          start: {
            line: 34,
            column: 8
          },
          end: {
            line: 39,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 34,
            column: 8
          },
          end: {
            line: 39,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 34
      },
      "13": {
        loc: {
          start: {
            line: 54,
            column: 8
          },
          end: {
            line: 60,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 54,
            column: 8
          },
          end: {
            line: 60,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 54
      },
      "14": {
        loc: {
          start: {
            line: 87,
            column: 4
          },
          end: {
            line: 88,
            column: 20
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 87,
            column: 4
          },
          end: {
            line: 88,
            column: 20
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 87
      },
      "15": {
        loc: {
          start: {
            line: 93,
            column: 4
          },
          end: {
            line: 95,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 93,
            column: 4
          },
          end: {
            line: 95,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 93
      },
      "16": {
        loc: {
          start: {
            line: 93,
            column: 8
          },
          end: {
            line: 93,
            column: 86
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 93,
            column: 8
          },
          end: {
            line: 93,
            column: 45
          }
        }, {
          start: {
            line: 93,
            column: 49
          },
          end: {
            line: 93,
            column: 86
          }
        }],
        line: 93
      },
      "17": {
        loc: {
          start: {
            line: 97,
            column: 4
          },
          end: {
            line: 99,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 97,
            column: 4
          },
          end: {
            line: 99,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 97
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0,
      "43": 0,
      "44": 0,
      "45": 0,
      "46": 0,
      "47": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0],
      "13": [0, 0],
      "14": [0, 0],
      "15": [0, 0],
      "16": [0, 0],
      "17": [0, 0]
    },
    inputSourceMap: {
      file: "C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\middleware\\tenant.middleware.ts",
      mappings: "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",
      names: [],
      sources: ["C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\middleware\\tenant.middleware.ts"],
      sourcesContent: ["import { FastifyRequest, FastifyReply } from 'fastify'\nimport { logger } from '../utils/logger'\n\nexport interface TenantInfo {\n  id: string\n  slug: string\n  name: string\n  planType: string\n  isActive: boolean\n  schema: string\n}\n\ndeclare module 'fastify' {\n  interface FastifyRequest {\n    tenant?: TenantInfo\n  }\n}\n\n/**\n * Middleware para identificar e configurar o tenant atual\n */\nexport const tenantMiddleware = async (\n  request: FastifyRequest,\n  reply: FastifyReply\n) => {\n  try {\n    let tenantSlug: string | null = null\n\n    // 1. Extrair tenant do subdomain (empresa.utmify.com)\n    const host = request.headers.host || ''\n    const subdomain = extractSubdomain(host)\n    \n    if (subdomain && subdomain !== 'www' && subdomain !== 'api') {\n      tenantSlug = subdomain\n      logger.debug(`Tenant extra\xEDdo do subdomain: ${tenantSlug}`)\n    }\n\n    // 2. Fallback: extrair do header X-Tenant-Slug\n    if (!tenantSlug) {\n      tenantSlug = request.headers['x-tenant-slug'] as string || null\n      if (tenantSlug) {\n        logger.debug(`Tenant extra\xEDdo do header: ${tenantSlug}`)\n      }\n    }\n\n    // 3. Fallback: extrair do query parameter (para desenvolvimento)\n    if (!tenantSlug && process.env.NODE_ENV === 'development') {\n      tenantSlug = (request.query as any)?.tenant || null\n      if (tenantSlug) {\n        logger.debug(`Tenant extra\xEDdo do query param: ${tenantSlug}`)\n      }\n    }\n\n    // 4. Para desenvolvimento, usar tenant padr\xE3o se n\xE3o especificado\n    if (!tenantSlug && process.env.NODE_ENV === 'development') {\n      tenantSlug = 'demo'\n      logger.debug('Usando tenant padr\xE3o para desenvolvimento: demo')\n    }\n\n    if (!tenantSlug) {\n      return reply.code(400).send({\n        error: 'Bad Request',\n        message: 'Tenant n\xE3o identificado. Verifique o subdomain ou header X-Tenant-Slug.'\n      })\n    }\n\n    // 5. Buscar organiza\xE7\xE3o no banco de dados\n    const organization = await request.server.db.organization.findUnique({\n      where: { \n        slug: tenantSlug,\n        isActive: true \n      },\n      select: {\n        id: true,\n        slug: true,\n        name: true,\n        planType: true,\n        isActive: true\n      }\n    })\n\n    if (!organization) {\n      logger.warn(`Organiza\xE7\xE3o n\xE3o encontrada ou inativa: ${tenantSlug}`)\n      return reply.code(404).send({\n        error: 'Not Found',\n        message: `Organiza\xE7\xE3o '${tenantSlug}' n\xE3o encontrada ou inativa.`\n      })\n    }\n\n    // 6. Adicionar informa\xE7\xF5es do tenant ao request\n    request.tenant = {\n      id: organization.id,\n      slug: organization.slug,\n      name: organization.name,\n      planType: organization.planType,\n      isActive: organization.isActive,\n      schema: `tenant_${organization.slug}`\n    }\n\n    // 7. Setar schema PostgreSQL para isolamento\n    await setTenantSchema(request.tenant.schema, request.server.db)\n\n    logger.debug(`Tenant configurado: ${organization.name} (${organization.slug})`)\n    \n  } catch (error) {\n    logger.error(`Erro no middleware de tenant: ${error.message}`, error)\n    \n    return reply.code(500).send({\n      error: 'Internal Server Error',\n      message: 'Erro interno ao processar tenant.'\n    })\n  }\n}\n\n/**\n * Extrai o subdomain do host\n * Exemplo: empresa.utmify.com -> empresa\n */\nfunction extractSubdomain(host: string): string | null {\n  if (!host) return null\n\n  // Remove porta se existir\n  const hostWithoutPort = host.split(':')[0]\n  const parts = hostWithoutPort.split('.')\n\n  // Para desenvolvimento local (localhost:3000)\n  if (hostWithoutPort.includes('localhost') || hostWithoutPort.includes('127.0.0.1')) {\n    return null\n  }\n\n  // Para dom\xEDnios como empresa.utmify.com\n  if (parts.length >= 3) {\n    return parts[0]\n  }\n\n  return null\n}\n\n/**\n * Configura o schema PostgreSQL para o tenant atual\n */\nasync function setTenantSchema(schema: string, db: any): Promise<void> {\n  try {\n    // Criar schema se n\xE3o existir\n    await db.$executeRawUnsafe(`CREATE SCHEMA IF NOT EXISTS \"${schema}\"`)\n    \n    // Setar search_path para o schema do tenant\n    await db.$executeRawUnsafe(`SET search_path TO \"${schema}\", public`)\n    \n    logger.debug(`Schema configurado: ${schema}`)\n  } catch (error) {\n    logger.error(`Erro ao configurar schema ${schema}: ${error.message}`)\n    throw error\n  }\n}\n\n/**\n * Valida se o usu\xE1rio tem acesso ao tenant atual\n */\nexport function validateTenantAccess(userOrganizationId: string, tenantId: string): boolean {\n  return userOrganizationId === tenantId\n}\n\n/**\n * Gera chave de cache com prefixo do tenant\n */\nexport function generateCacheKey(tenantSlug: string, key: string): string {\n  return `tenant:${tenantSlug}:${key}`\n}\n\n/**\n * Gera nome da fila com isolamento por tenant\n */\nexport function generateQueueName(tenantSlug: string, queueName: string): string {\n  return `${tenantSlug}_${queueName}`\n}"],
      version: 3
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "41395d82572d6ffe42b9f74b5cb60086e501f37c"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1kcq82k1ge = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1kcq82k1ge();
import { logger } from '../utils/logger';
/**
 * Middleware para identificar e configurar o tenant atual
 */
/* istanbul ignore next */
cov_1kcq82k1ge().s[0]++;
export const tenantMiddleware = async (request, reply) => {
  /* istanbul ignore next */
  cov_1kcq82k1ge().f[0]++;
  cov_1kcq82k1ge().s[1]++;
  try {
    let tenantSlug =
    /* istanbul ignore next */
    (cov_1kcq82k1ge().s[2]++, null);
    // 1. Extrair tenant do subdomain (empresa.utmify.com)
    const host =
    /* istanbul ignore next */
    (cov_1kcq82k1ge().s[3]++,
    /* istanbul ignore next */
    (cov_1kcq82k1ge().b[0][0]++, request.headers.host) ||
    /* istanbul ignore next */
    (cov_1kcq82k1ge().b[0][1]++, ''));
    const subdomain =
    /* istanbul ignore next */
    (cov_1kcq82k1ge().s[4]++, extractSubdomain(host));
    /* istanbul ignore next */
    cov_1kcq82k1ge().s[5]++;
    if (
    /* istanbul ignore next */
    (cov_1kcq82k1ge().b[2][0]++, subdomain) &&
    /* istanbul ignore next */
    (cov_1kcq82k1ge().b[2][1]++, subdomain !== 'www') &&
    /* istanbul ignore next */
    (cov_1kcq82k1ge().b[2][2]++, subdomain !== 'api')) {
      /* istanbul ignore next */
      cov_1kcq82k1ge().b[1][0]++;
      cov_1kcq82k1ge().s[6]++;
      tenantSlug = subdomain;
      /* istanbul ignore next */
      cov_1kcq82k1ge().s[7]++;
      logger.debug(`Tenant extraído do subdomain: ${tenantSlug}`);
    } else
    /* istanbul ignore next */
    {
      cov_1kcq82k1ge().b[1][1]++;
    }
    // 2. Fallback: extrair do header X-Tenant-Slug
    cov_1kcq82k1ge().s[8]++;
    if (!tenantSlug) {
      /* istanbul ignore next */
      cov_1kcq82k1ge().b[3][0]++;
      cov_1kcq82k1ge().s[9]++;
      tenantSlug =
      /* istanbul ignore next */
      (cov_1kcq82k1ge().b[4][0]++, request.headers['x-tenant-slug']) ||
      /* istanbul ignore next */
      (cov_1kcq82k1ge().b[4][1]++, null);
      /* istanbul ignore next */
      cov_1kcq82k1ge().s[10]++;
      if (tenantSlug) {
        /* istanbul ignore next */
        cov_1kcq82k1ge().b[5][0]++;
        cov_1kcq82k1ge().s[11]++;
        logger.debug(`Tenant extraído do header: ${tenantSlug}`);
      } else
      /* istanbul ignore next */
      {
        cov_1kcq82k1ge().b[5][1]++;
      }
    } else
    /* istanbul ignore next */
    {
      cov_1kcq82k1ge().b[3][1]++;
    }
    // 3. Fallback: extrair do query parameter (para desenvolvimento)
    cov_1kcq82k1ge().s[12]++;
    if (
    /* istanbul ignore next */
    (cov_1kcq82k1ge().b[7][0]++, !tenantSlug) &&
    /* istanbul ignore next */
    (cov_1kcq82k1ge().b[7][1]++, process.env.NODE_ENV === 'development')) {
      /* istanbul ignore next */
      cov_1kcq82k1ge().b[6][0]++;
      cov_1kcq82k1ge().s[13]++;
      tenantSlug =
      /* istanbul ignore next */
      (cov_1kcq82k1ge().b[8][0]++, request.query?.tenant) ||
      /* istanbul ignore next */
      (cov_1kcq82k1ge().b[8][1]++, null);
      /* istanbul ignore next */
      cov_1kcq82k1ge().s[14]++;
      if (tenantSlug) {
        /* istanbul ignore next */
        cov_1kcq82k1ge().b[9][0]++;
        cov_1kcq82k1ge().s[15]++;
        logger.debug(`Tenant extraído do query param: ${tenantSlug}`);
      } else
      /* istanbul ignore next */
      {
        cov_1kcq82k1ge().b[9][1]++;
      }
    } else
    /* istanbul ignore next */
    {
      cov_1kcq82k1ge().b[6][1]++;
    }
    // 4. Para desenvolvimento, usar tenant padrão se não especificado
    cov_1kcq82k1ge().s[16]++;
    if (
    /* istanbul ignore next */
    (cov_1kcq82k1ge().b[11][0]++, !tenantSlug) &&
    /* istanbul ignore next */
    (cov_1kcq82k1ge().b[11][1]++, process.env.NODE_ENV === 'development')) {
      /* istanbul ignore next */
      cov_1kcq82k1ge().b[10][0]++;
      cov_1kcq82k1ge().s[17]++;
      tenantSlug = 'demo';
      /* istanbul ignore next */
      cov_1kcq82k1ge().s[18]++;
      logger.debug('Usando tenant padrão para desenvolvimento: demo');
    } else
    /* istanbul ignore next */
    {
      cov_1kcq82k1ge().b[10][1]++;
    }
    cov_1kcq82k1ge().s[19]++;
    if (!tenantSlug) {
      /* istanbul ignore next */
      cov_1kcq82k1ge().b[12][0]++;
      cov_1kcq82k1ge().s[20]++;
      return reply.code(400).send({
        error: 'Bad Request',
        message: 'Tenant não identificado. Verifique o subdomain ou header X-Tenant-Slug.'
      });
    } else
    /* istanbul ignore next */
    {
      cov_1kcq82k1ge().b[12][1]++;
    }
    // 5. Buscar organização no banco de dados
    const organization =
    /* istanbul ignore next */
    (cov_1kcq82k1ge().s[21]++, await request.server.db.organization.findUnique({
      where: {
        slug: tenantSlug,
        isActive: true
      },
      select: {
        id: true,
        slug: true,
        name: true,
        planType: true,
        isActive: true
      }
    }));
    /* istanbul ignore next */
    cov_1kcq82k1ge().s[22]++;
    if (!organization) {
      /* istanbul ignore next */
      cov_1kcq82k1ge().b[13][0]++;
      cov_1kcq82k1ge().s[23]++;
      logger.warn(`Organização não encontrada ou inativa: ${tenantSlug}`);
      /* istanbul ignore next */
      cov_1kcq82k1ge().s[24]++;
      return reply.code(404).send({
        error: 'Not Found',
        message: `Organização '${tenantSlug}' não encontrada ou inativa.`
      });
    } else
    /* istanbul ignore next */
    {
      cov_1kcq82k1ge().b[13][1]++;
    }
    // 6. Adicionar informações do tenant ao request
    cov_1kcq82k1ge().s[25]++;
    request.tenant = {
      id: organization.id,
      slug: organization.slug,
      name: organization.name,
      planType: organization.planType,
      isActive: organization.isActive,
      schema: `tenant_${organization.slug}`
    };
    // 7. Setar schema PostgreSQL para isolamento
    /* istanbul ignore next */
    cov_1kcq82k1ge().s[26]++;
    await setTenantSchema(request.tenant.schema, request.server.db);
    /* istanbul ignore next */
    cov_1kcq82k1ge().s[27]++;
    logger.debug(`Tenant configurado: ${organization.name} (${organization.slug})`);
  } catch (error) {
    /* istanbul ignore next */
    cov_1kcq82k1ge().s[28]++;
    logger.error(`Erro no middleware de tenant: ${error.message}`, error);
    /* istanbul ignore next */
    cov_1kcq82k1ge().s[29]++;
    return reply.code(500).send({
      error: 'Internal Server Error',
      message: 'Erro interno ao processar tenant.'
    });
  }
};
/**
 * Extrai o subdomain do host
 * Exemplo: empresa.utmify.com -> empresa
 */
function extractSubdomain(host) {
  /* istanbul ignore next */
  cov_1kcq82k1ge().f[1]++;
  cov_1kcq82k1ge().s[30]++;
  if (!host) {
    /* istanbul ignore next */
    cov_1kcq82k1ge().b[14][0]++;
    cov_1kcq82k1ge().s[31]++;
    return null;
  } else
  /* istanbul ignore next */
  {
    cov_1kcq82k1ge().b[14][1]++;
  }
  // Remove porta se existir
  const hostWithoutPort =
  /* istanbul ignore next */
  (cov_1kcq82k1ge().s[32]++, host.split(':')[0]);
  const parts =
  /* istanbul ignore next */
  (cov_1kcq82k1ge().s[33]++, hostWithoutPort.split('.'));
  // Para desenvolvimento local (localhost:3000)
  /* istanbul ignore next */
  cov_1kcq82k1ge().s[34]++;
  if (
  /* istanbul ignore next */
  (cov_1kcq82k1ge().b[16][0]++, hostWithoutPort.includes('localhost')) ||
  /* istanbul ignore next */
  (cov_1kcq82k1ge().b[16][1]++, hostWithoutPort.includes('127.0.0.1'))) {
    /* istanbul ignore next */
    cov_1kcq82k1ge().b[15][0]++;
    cov_1kcq82k1ge().s[35]++;
    return null;
  } else
  /* istanbul ignore next */
  {
    cov_1kcq82k1ge().b[15][1]++;
  }
  // Para domínios como empresa.utmify.com
  cov_1kcq82k1ge().s[36]++;
  if (parts.length >= 3) {
    /* istanbul ignore next */
    cov_1kcq82k1ge().b[17][0]++;
    cov_1kcq82k1ge().s[37]++;
    return parts[0];
  } else
  /* istanbul ignore next */
  {
    cov_1kcq82k1ge().b[17][1]++;
  }
  cov_1kcq82k1ge().s[38]++;
  return null;
}
/**
 * Configura o schema PostgreSQL para o tenant atual
 */
async function setTenantSchema(schema, db) {
  /* istanbul ignore next */
  cov_1kcq82k1ge().f[2]++;
  cov_1kcq82k1ge().s[39]++;
  try {
    /* istanbul ignore next */
    cov_1kcq82k1ge().s[40]++;
    // Criar schema se não existir
    await db.$executeRawUnsafe(`CREATE SCHEMA IF NOT EXISTS "${schema}"`);
    // Setar search_path para o schema do tenant
    /* istanbul ignore next */
    cov_1kcq82k1ge().s[41]++;
    await db.$executeRawUnsafe(`SET search_path TO "${schema}", public`);
    /* istanbul ignore next */
    cov_1kcq82k1ge().s[42]++;
    logger.debug(`Schema configurado: ${schema}`);
  } catch (error) {
    /* istanbul ignore next */
    cov_1kcq82k1ge().s[43]++;
    logger.error(`Erro ao configurar schema ${schema}: ${error.message}`);
    /* istanbul ignore next */
    cov_1kcq82k1ge().s[44]++;
    throw error;
  }
}
/**
 * Valida se o usuário tem acesso ao tenant atual
 */
export function validateTenantAccess(userOrganizationId, tenantId) {
  /* istanbul ignore next */
  cov_1kcq82k1ge().f[3]++;
  cov_1kcq82k1ge().s[45]++;
  return userOrganizationId === tenantId;
}
/**
 * Gera chave de cache com prefixo do tenant
 */
export function generateCacheKey(tenantSlug, key) {
  /* istanbul ignore next */
  cov_1kcq82k1ge().f[4]++;
  cov_1kcq82k1ge().s[46]++;
  return `tenant:${tenantSlug}:${key}`;
}
/**
 * Gera nome da fila com isolamento por tenant
 */
export function generateQueueName(tenantSlug, queueName) {
  /* istanbul ignore next */
  cov_1kcq82k1ge().f[5]++;
  cov_1kcq82k1ge().s[47]++;
  return `${tenantSlug}_${queueName}`;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMWtjcTgyazFnZSIsImFjdHVhbENvdmVyYWdlIiwibG9nZ2VyIiwicyIsInRlbmFudE1pZGRsZXdhcmUiLCJyZXF1ZXN0IiwicmVwbHkiLCJmIiwidGVuYW50U2x1ZyIsImhvc3QiLCJiIiwiaGVhZGVycyIsInN1YmRvbWFpbiIsImV4dHJhY3RTdWJkb21haW4iLCJkZWJ1ZyIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsInF1ZXJ5IiwidGVuYW50IiwiY29kZSIsInNlbmQiLCJlcnJvciIsIm1lc3NhZ2UiLCJvcmdhbml6YXRpb24iLCJzZXJ2ZXIiLCJkYiIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsInNsdWciLCJpc0FjdGl2ZSIsInNlbGVjdCIsImlkIiwibmFtZSIsInBsYW5UeXBlIiwid2FybiIsInNjaGVtYSIsInNldFRlbmFudFNjaGVtYSIsImhvc3RXaXRob3V0UG9ydCIsInNwbGl0IiwicGFydHMiLCJpbmNsdWRlcyIsImxlbmd0aCIsIiRleGVjdXRlUmF3VW5zYWZlIiwidmFsaWRhdGVUZW5hbnRBY2Nlc3MiLCJ1c2VyT3JnYW5pemF0aW9uSWQiLCJ0ZW5hbnRJZCIsImdlbmVyYXRlQ2FjaGVLZXkiLCJrZXkiLCJnZW5lcmF0ZVF1ZXVlTmFtZSIsInF1ZXVlTmFtZSJdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcRW56byBNYXJjZWxvXFxEZXNrdG9wXFxQcm9qZXRvcyBFbXByZXNhXFxTYWFzIFV0bWlmeVxcdXRtaWZ5LWNsb25lXFxhcHBzXFxhcGlcXHNyY1xcbWlkZGxld2FyZVxcdGVuYW50Lm1pZGRsZXdhcmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmFzdGlmeVJlcXVlc3QsIEZhc3RpZnlSZXBseSB9IGZyb20gJ2Zhc3RpZnknXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuLi91dGlscy9sb2dnZXInXG5cbmV4cG9ydCBpbnRlcmZhY2UgVGVuYW50SW5mbyB7XG4gIGlkOiBzdHJpbmdcbiAgc2x1Zzogc3RyaW5nXG4gIG5hbWU6IHN0cmluZ1xuICBwbGFuVHlwZTogc3RyaW5nXG4gIGlzQWN0aXZlOiBib29sZWFuXG4gIHNjaGVtYTogc3RyaW5nXG59XG5cbmRlY2xhcmUgbW9kdWxlICdmYXN0aWZ5JyB7XG4gIGludGVyZmFjZSBGYXN0aWZ5UmVxdWVzdCB7XG4gICAgdGVuYW50PzogVGVuYW50SW5mb1xuICB9XG59XG5cbi8qKlxuICogTWlkZGxld2FyZSBwYXJhIGlkZW50aWZpY2FyIGUgY29uZmlndXJhciBvIHRlbmFudCBhdHVhbFxuICovXG5leHBvcnQgY29uc3QgdGVuYW50TWlkZGxld2FyZSA9IGFzeW5jIChcbiAgcmVxdWVzdDogRmFzdGlmeVJlcXVlc3QsXG4gIHJlcGx5OiBGYXN0aWZ5UmVwbHlcbikgPT4ge1xuICB0cnkge1xuICAgIGxldCB0ZW5hbnRTbHVnOiBzdHJpbmcgfCBudWxsID0gbnVsbFxuXG4gICAgLy8gMS4gRXh0cmFpciB0ZW5hbnQgZG8gc3ViZG9tYWluIChlbXByZXNhLnV0bWlmeS5jb20pXG4gICAgY29uc3QgaG9zdCA9IHJlcXVlc3QuaGVhZGVycy5ob3N0IHx8ICcnXG4gICAgY29uc3Qgc3ViZG9tYWluID0gZXh0cmFjdFN1YmRvbWFpbihob3N0KVxuICAgIFxuICAgIGlmIChzdWJkb21haW4gJiYgc3ViZG9tYWluICE9PSAnd3d3JyAmJiBzdWJkb21haW4gIT09ICdhcGknKSB7XG4gICAgICB0ZW5hbnRTbHVnID0gc3ViZG9tYWluXG4gICAgICBsb2dnZXIuZGVidWcoYFRlbmFudCBleHRyYcOtZG8gZG8gc3ViZG9tYWluOiAke3RlbmFudFNsdWd9YClcbiAgICB9XG5cbiAgICAvLyAyLiBGYWxsYmFjazogZXh0cmFpciBkbyBoZWFkZXIgWC1UZW5hbnQtU2x1Z1xuICAgIGlmICghdGVuYW50U2x1Zykge1xuICAgICAgdGVuYW50U2x1ZyA9IHJlcXVlc3QuaGVhZGVyc1sneC10ZW5hbnQtc2x1ZyddIGFzIHN0cmluZyB8fCBudWxsXG4gICAgICBpZiAodGVuYW50U2x1Zykge1xuICAgICAgICBsb2dnZXIuZGVidWcoYFRlbmFudCBleHRyYcOtZG8gZG8gaGVhZGVyOiAke3RlbmFudFNsdWd9YClcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAzLiBGYWxsYmFjazogZXh0cmFpciBkbyBxdWVyeSBwYXJhbWV0ZXIgKHBhcmEgZGVzZW52b2x2aW1lbnRvKVxuICAgIGlmICghdGVuYW50U2x1ZyAmJiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgdGVuYW50U2x1ZyA9IChyZXF1ZXN0LnF1ZXJ5IGFzIGFueSk/LnRlbmFudCB8fCBudWxsXG4gICAgICBpZiAodGVuYW50U2x1Zykge1xuICAgICAgICBsb2dnZXIuZGVidWcoYFRlbmFudCBleHRyYcOtZG8gZG8gcXVlcnkgcGFyYW06ICR7dGVuYW50U2x1Z31gKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIDQuIFBhcmEgZGVzZW52b2x2aW1lbnRvLCB1c2FyIHRlbmFudCBwYWRyw6NvIHNlIG7Do28gZXNwZWNpZmljYWRvXG4gICAgaWYgKCF0ZW5hbnRTbHVnICYmIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICB0ZW5hbnRTbHVnID0gJ2RlbW8nXG4gICAgICBsb2dnZXIuZGVidWcoJ1VzYW5kbyB0ZW5hbnQgcGFkcsOjbyBwYXJhIGRlc2Vudm9sdmltZW50bzogZGVtbycpXG4gICAgfVxuXG4gICAgaWYgKCF0ZW5hbnRTbHVnKSB7XG4gICAgICByZXR1cm4gcmVwbHkuY29kZSg0MDApLnNlbmQoe1xuICAgICAgICBlcnJvcjogJ0JhZCBSZXF1ZXN0JyxcbiAgICAgICAgbWVzc2FnZTogJ1RlbmFudCBuw6NvIGlkZW50aWZpY2Fkby4gVmVyaWZpcXVlIG8gc3ViZG9tYWluIG91IGhlYWRlciBYLVRlbmFudC1TbHVnLidcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gNS4gQnVzY2FyIG9yZ2FuaXphw6fDo28gbm8gYmFuY28gZGUgZGFkb3NcbiAgICBjb25zdCBvcmdhbml6YXRpb24gPSBhd2FpdCByZXF1ZXN0LnNlcnZlci5kYi5vcmdhbml6YXRpb24uZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyBcbiAgICAgICAgc2x1ZzogdGVuYW50U2x1ZyxcbiAgICAgICAgaXNBY3RpdmU6IHRydWUgXG4gICAgICB9LFxuICAgICAgc2VsZWN0OiB7XG4gICAgICAgIGlkOiB0cnVlLFxuICAgICAgICBzbHVnOiB0cnVlLFxuICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICBwbGFuVHlwZTogdHJ1ZSxcbiAgICAgICAgaXNBY3RpdmU6IHRydWVcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgaWYgKCFvcmdhbml6YXRpb24pIHtcbiAgICAgIGxvZ2dlci53YXJuKGBPcmdhbml6YcOnw6NvIG7Do28gZW5jb250cmFkYSBvdSBpbmF0aXZhOiAke3RlbmFudFNsdWd9YClcbiAgICAgIHJldHVybiByZXBseS5jb2RlKDQwNCkuc2VuZCh7XG4gICAgICAgIGVycm9yOiAnTm90IEZvdW5kJyxcbiAgICAgICAgbWVzc2FnZTogYE9yZ2FuaXphw6fDo28gJyR7dGVuYW50U2x1Z30nIG7Do28gZW5jb250cmFkYSBvdSBpbmF0aXZhLmBcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gNi4gQWRpY2lvbmFyIGluZm9ybWHDp8O1ZXMgZG8gdGVuYW50IGFvIHJlcXVlc3RcbiAgICByZXF1ZXN0LnRlbmFudCA9IHtcbiAgICAgIGlkOiBvcmdhbml6YXRpb24uaWQsXG4gICAgICBzbHVnOiBvcmdhbml6YXRpb24uc2x1ZyxcbiAgICAgIG5hbWU6IG9yZ2FuaXphdGlvbi5uYW1lLFxuICAgICAgcGxhblR5cGU6IG9yZ2FuaXphdGlvbi5wbGFuVHlwZSxcbiAgICAgIGlzQWN0aXZlOiBvcmdhbml6YXRpb24uaXNBY3RpdmUsXG4gICAgICBzY2hlbWE6IGB0ZW5hbnRfJHtvcmdhbml6YXRpb24uc2x1Z31gXG4gICAgfVxuXG4gICAgLy8gNy4gU2V0YXIgc2NoZW1hIFBvc3RncmVTUUwgcGFyYSBpc29sYW1lbnRvXG4gICAgYXdhaXQgc2V0VGVuYW50U2NoZW1hKHJlcXVlc3QudGVuYW50LnNjaGVtYSwgcmVxdWVzdC5zZXJ2ZXIuZGIpXG5cbiAgICBsb2dnZXIuZGVidWcoYFRlbmFudCBjb25maWd1cmFkbzogJHtvcmdhbml6YXRpb24ubmFtZX0gKCR7b3JnYW5pemF0aW9uLnNsdWd9KWApXG4gICAgXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKGBFcnJvIG5vIG1pZGRsZXdhcmUgZGUgdGVuYW50OiAke2Vycm9yLm1lc3NhZ2V9YCwgZXJyb3IpXG4gICAgXG4gICAgcmV0dXJuIHJlcGx5LmNvZGUoNTAwKS5zZW5kKHtcbiAgICAgIGVycm9yOiAnSW50ZXJuYWwgU2VydmVyIEVycm9yJyxcbiAgICAgIG1lc3NhZ2U6ICdFcnJvIGludGVybm8gYW8gcHJvY2Vzc2FyIHRlbmFudC4nXG4gICAgfSlcbiAgfVxufVxuXG4vKipcbiAqIEV4dHJhaSBvIHN1YmRvbWFpbiBkbyBob3N0XG4gKiBFeGVtcGxvOiBlbXByZXNhLnV0bWlmeS5jb20gLT4gZW1wcmVzYVxuICovXG5mdW5jdGlvbiBleHRyYWN0U3ViZG9tYWluKGhvc3Q6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICBpZiAoIWhvc3QpIHJldHVybiBudWxsXG5cbiAgLy8gUmVtb3ZlIHBvcnRhIHNlIGV4aXN0aXJcbiAgY29uc3QgaG9zdFdpdGhvdXRQb3J0ID0gaG9zdC5zcGxpdCgnOicpWzBdXG4gIGNvbnN0IHBhcnRzID0gaG9zdFdpdGhvdXRQb3J0LnNwbGl0KCcuJylcblxuICAvLyBQYXJhIGRlc2Vudm9sdmltZW50byBsb2NhbCAobG9jYWxob3N0OjMwMDApXG4gIGlmIChob3N0V2l0aG91dFBvcnQuaW5jbHVkZXMoJ2xvY2FsaG9zdCcpIHx8IGhvc3RXaXRob3V0UG9ydC5pbmNsdWRlcygnMTI3LjAuMC4xJykpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgLy8gUGFyYSBkb23DrW5pb3MgY29tbyBlbXByZXNhLnV0bWlmeS5jb21cbiAgaWYgKHBhcnRzLmxlbmd0aCA+PSAzKSB7XG4gICAgcmV0dXJuIHBhcnRzWzBdXG4gIH1cblxuICByZXR1cm4gbnVsbFxufVxuXG4vKipcbiAqIENvbmZpZ3VyYSBvIHNjaGVtYSBQb3N0Z3JlU1FMIHBhcmEgbyB0ZW5hbnQgYXR1YWxcbiAqL1xuYXN5bmMgZnVuY3Rpb24gc2V0VGVuYW50U2NoZW1hKHNjaGVtYTogc3RyaW5nLCBkYjogYW55KTogUHJvbWlzZTx2b2lkPiB7XG4gIHRyeSB7XG4gICAgLy8gQ3JpYXIgc2NoZW1hIHNlIG7Do28gZXhpc3RpclxuICAgIGF3YWl0IGRiLiRleGVjdXRlUmF3VW5zYWZlKGBDUkVBVEUgU0NIRU1BIElGIE5PVCBFWElTVFMgXCIke3NjaGVtYX1cImApXG4gICAgXG4gICAgLy8gU2V0YXIgc2VhcmNoX3BhdGggcGFyYSBvIHNjaGVtYSBkbyB0ZW5hbnRcbiAgICBhd2FpdCBkYi4kZXhlY3V0ZVJhd1Vuc2FmZShgU0VUIHNlYXJjaF9wYXRoIFRPIFwiJHtzY2hlbWF9XCIsIHB1YmxpY2ApXG4gICAgXG4gICAgbG9nZ2VyLmRlYnVnKGBTY2hlbWEgY29uZmlndXJhZG86ICR7c2NoZW1hfWApXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nZ2VyLmVycm9yKGBFcnJvIGFvIGNvbmZpZ3VyYXIgc2NoZW1hICR7c2NoZW1hfTogJHtlcnJvci5tZXNzYWdlfWApXG4gICAgdGhyb3cgZXJyb3JcbiAgfVxufVxuXG4vKipcbiAqIFZhbGlkYSBzZSBvIHVzdcOhcmlvIHRlbSBhY2Vzc28gYW8gdGVuYW50IGF0dWFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVRlbmFudEFjY2Vzcyh1c2VyT3JnYW5pemF0aW9uSWQ6IHN0cmluZywgdGVuYW50SWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICByZXR1cm4gdXNlck9yZ2FuaXphdGlvbklkID09PSB0ZW5hbnRJZFxufVxuXG4vKipcbiAqIEdlcmEgY2hhdmUgZGUgY2FjaGUgY29tIHByZWZpeG8gZG8gdGVuYW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUNhY2hlS2V5KHRlbmFudFNsdWc6IHN0cmluZywga2V5OiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gYHRlbmFudDoke3RlbmFudFNsdWd9OiR7a2V5fWBcbn1cblxuLyoqXG4gKiBHZXJhIG5vbWUgZGEgZmlsYSBjb20gaXNvbGFtZW50byBwb3IgdGVuYW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVF1ZXVlTmFtZSh0ZW5hbnRTbHVnOiBzdHJpbmcsIHF1ZXVlTmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIGAke3RlbmFudFNsdWd9XyR7cXVldWVOYW1lfWBcbn0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFzQ1E7SUFBQUEsY0FBQSxZQUFBQSxDQUFBO01BQUEsT0FBQUMsY0FBQTtJQUFBO0VBQUE7RUFBQSxPQUFBQSxjQUFBO0FBQUE7QUFBQUQsY0FBQTtBQXJDUixTQUFTRSxNQUFN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