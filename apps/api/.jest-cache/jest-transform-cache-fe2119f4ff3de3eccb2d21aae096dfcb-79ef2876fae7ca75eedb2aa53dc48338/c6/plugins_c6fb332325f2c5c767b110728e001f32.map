{"version":3,"names":["cors_1","cov_1rmlqkp9td","s","__importDefault","require","helmet_1","rate_limit_1","jwt_1","swagger_1","swagger_ui_1","env_1","logger_1","registerPlugins","app","f","register","default","contentSecurityPolicy","directives","defaultSrc","styleSrc","scriptSrc","imgSrc","crossOriginEmbedderPolicy","corsConfig","logger","info","secret","jwtConfig","sign","algorithm","issuer","audience","expiresIn","accessExpiresIn","verify","algorithms","config","ENABLE_RATE_LIMITING","b","rateLimitConfig","nameSpace","continueExceeding","allowList","req","url","onExceeding","warn","ip","method","onExceeded","ENABLE_SWAGGER","openapi","title","description","version","contact","name","email","license","servers","PORT","components","securitySchemes","bearerAuth","type","scheme","bearerFormat","security","tags","routePrefix","uiConfig","docExpansion","deepLinking","staticCSP","transformStaticCSP","header","transformSpecification","swaggerObject","transformSpecificationClone","contextPlugin","fastify","decorateRequest","addHook","request","requestId","Date","now","Math","random","toString","substr","log","child","databasePlugin","db","Promise","resolve","then","__importStar","decorate","$queryRaw","error","$disconnect","exports"],"sources":["C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\config\\plugins.ts"],"sourcesContent":["import type { FastifyInstance } from 'fastify'\nimport cors from '@fastify/cors'\nimport helmet from '@fastify/helmet'\nimport rateLimit from '@fastify/rate-limit'\nimport jwt from '@fastify/jwt'\nimport redis from '@fastify/redis'\nimport swagger from '@fastify/swagger'\nimport swaggerUi from '@fastify/swagger-ui'\n\nimport { config, corsConfig, rateLimitConfig, redisConfig, jwtConfig } from './env'\nimport { logger } from '@/utils/logger'\nimport websocketPlugin from '../plugins/websocket.plugin'\n// import { tenantMiddleware } from '../middleware/tenant.middleware'\n\nexport const registerPlugins = async (app: FastifyInstance) => {\n  // Security headers\n  await app.register(helmet, {\n    contentSecurityPolicy: {\n      directives: {\n        defaultSrc: [\"'self'\"],\n        styleSrc: [\"'self'\", \"'unsafe-inline'\"],\n        scriptSrc: [\"'self'\"],\n        imgSrc: [\"'self'\", 'data:', 'https:'],\n      },\n    },\n    crossOriginEmbedderPolicy: false,\n  })\n\n  // CORS\n  await app.register(cors, corsConfig)\n\n  // Redis connection disabled for now\n  // TODO: Re-enable when Redis is available\n  // await app.register(redis, {\n  //   ...redisConfig,\n  //   closeClient: true,\n  // })\n  logger.info('Redis plugin disabled - continuing without Redis')\n\n  // JWT authentication\n  await app.register(jwt, {\n    secret: jwtConfig.secret,\n    sign: {\n      algorithm: jwtConfig.algorithm,\n      issuer: jwtConfig.issuer,\n      audience: jwtConfig.audience,\n      expiresIn: jwtConfig.accessExpiresIn,\n    },\n    verify: {\n      algorithms: [jwtConfig.algorithm],\n      issuer: jwtConfig.issuer,\n      audience: jwtConfig.audience,\n    },\n  })\n\n  // Rate limiting (using in-memory store since Redis is disabled)\n  if (config.ENABLE_RATE_LIMITING) {\n    await app.register(rateLimit, {\n      ...rateLimitConfig,\n      // redis: app.redis, // Disabled since Redis is not available\n      nameSpace: 'utmify-rate-limit:',\n      continueExceeding: true,\n      allowList: (req) => {\n        // Skip rate limiting for health checks\n        return req.url === '/health'\n      },\n      onExceeding: (req) => {\n        logger.warn({\n          ip: req.ip,\n          url: req.url,\n          method: req.method,\n        }, 'Rate limit approaching')\n      },\n      onExceeded: (req) => {\n        logger.warn({\n          ip: req.ip,\n          url: req.url,\n          method: req.method,\n        }, 'Rate limit exceeded')\n      },\n    })\n  }\n\n  // Swagger documentation\n  if (config.ENABLE_SWAGGER) {\n    await app.register(swagger, {\n      openapi: {\n        info: {\n          title: 'Utmify API',\n          description: 'UTM tracking and campaign management API',\n          version: '1.0.0',\n          contact: {\n            name: 'Utmify Team',\n            email: 'support@utmify.com',\n          },\n          license: {\n            name: 'MIT',\n            url: 'https://opensource.org/licenses/MIT',\n          },\n        },\n        servers: [\n          {\n            url: `http://localhost:${config.PORT}`,\n            description: 'Development server',\n          },\n        ],\n        components: {\n          securitySchemes: {\n            bearerAuth: {\n              type: 'http',\n              scheme: 'bearer',\n              bearerFormat: 'JWT',\n            },\n          },\n        },\n        security: [\n          {\n            bearerAuth: [],\n          },\n        ],\n        tags: [\n          { name: 'Auth', description: 'Authentication endpoints' },\n          { name: 'Users', description: 'User management endpoints' },\n          { name: 'Organizations', description: 'Organization management endpoints' },\n          { name: 'Campaigns', description: 'Campaign management endpoints' },\n          { name: 'Metrics', description: 'Metrics and analytics endpoints' },\n          { name: 'Webhooks', description: 'Webhook management endpoints' },\n          { name: 'Ad Accounts', description: 'Ad account integration endpoints' },\n        ],\n      },\n    })\n\n    await app.register(swaggerUi, {\n      routePrefix: '/docs',\n      uiConfig: {\n        docExpansion: 'list',\n        deepLinking: false,\n      },\n      staticCSP: true,\n      transformStaticCSP: (header) => header,\n      transformSpecification: (swaggerObject) => {\n        return swaggerObject\n      },\n      transformSpecificationClone: true,\n    })\n  }\n\n  // Custom plugin for request context\n  await app.register(async function contextPlugin(fastify) {\n    // Note: user and organization decorators are handled by auth middleware\n    fastify.decorateRequest('requestId', null)\n    \n    fastify.addHook('onRequest', async (request) => {\n      // Generate unique request ID\n      request.requestId = `req_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`\n      \n      // Add request ID to logger context\n      request.log = request.log.child({ requestId: request.requestId })\n    })\n  })\n\n  // Custom plugin for database connection\n  await app.register(async function databasePlugin(fastify) {\n    const { db } = await import('@utmify/database')\n    \n    fastify.decorate('db', db)\n    \n    // Test database connection\n    try {\n      await db.$queryRaw`SELECT 1`\n      logger.info('✅ Database connected successfully')\n    } catch (error) {\n      logger.error(error, '❌ Database connection failed')\n      throw error\n    }\n    \n    // Graceful shutdown\n    fastify.addHook('onClose', async () => {\n      await db.$disconnect()\n      logger.info('Database connection closed')\n    })\n  })\n\n  // Custom plugin for Redis connection test - TEMPORARILY DISABLED\n  // await app.register(async function redisPlugin(fastify) {\n  //   try {\n  //     await fastify.redis.ping()\n  //     logger.info('✅ Redis connected successfully')\n  //   } catch (error) {\n  //     logger.error(error, '❌ Redis connection failed')\n  //     throw error\n  //   }\n  // })\n\n  // WebSocket plugin for real-time metrics - TEMPORARILY DISABLED\n  // await app.register(websocketPlugin)\n\n  // Tenant middleware for multi-tenancy - TEMPORARILY DISABLED\n  // app.addHook('preHandler', tenantMiddleware)\n  // logger.info('✅ Tenant middleware registered')\n\n  logger.info('✅ All plugins registered successfully')\n}\n\n// Extend Fastify types\ndeclare module 'fastify' {\n  interface FastifyInstance {\n    db: typeof import('@utmify/database').db\n  }\n  \n  interface FastifyRequest {\n    user?: {\n      id: string\n      email: string\n      role: string\n      organizationId: string\n    } | null\n    organization?: {\n      id: string\n      name: string\n      slug: string\n      planType: string\n    } | null\n    requestId?: string\n  }\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}