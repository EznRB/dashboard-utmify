{"version":3,"names":["addBreadcrumb","DEFAULT_CONFIG","cov_27a7le545w","s","contentSecurityPolicy","directives","reportOnly","reportUri","hsts","maxAge","includeSubDomains","preload","frameOptions","contentTypeOptions","referrerPolicy","permissionsPolicy","crossOriginEmbedderPolicy","crossOriginOpenerPolicy","crossOriginResourcePolicy","DEVELOPMENT_CONFIG","undefined","SecurityHeaders","config","isDevelopment","constructor","b","f","baseConfig","generateCSPHeader","cspParts","directive","sources","Object","entries","Array","isArray","length","push","join","generatePermissionsPolicyHeader","policies","feature","allowlist","origins","map","origin","applyHeaders","reply","cspHeader","headerName","header","hstsValue","permissionsHeader","removeHeader","error","category","message","data","level","createMiddleware","request","cspReportHandler","report","body","headers","ip","code","send","securityHeadersPlugin","fastify","options","process","env","NODE_ENV","securityHeaders","addHook","post","schema","type","properties","decorate","customDirectives","customHeaders","validateCSPDirectives","errors","validDirectives","keys","includes","unsafeDirectives","source","some","unsafe","valid"],"sources":["C:\\Users\\Enzo Marcelo\\Desktop\\Projetos Empresa\\Saas Utmify\\utmify-clone\\apps\\api\\src\\middleware\\securityHeaders.ts"],"sourcesContent":["import { FastifyInstance, FastifyRequest, FastifyReply } from 'fastify';\nimport { addBreadcrumb } from '@sentry/node';\n\n// Security headers configuration\ninterface SecurityHeadersConfig {\n  contentSecurityPolicy?: {\n    directives: Record<string, string | string[]>;\n    reportOnly?: boolean;\n    reportUri?: string;\n  };\n  hsts?: {\n    maxAge: number;\n    includeSubDomains?: boolean;\n    preload?: boolean;\n  };\n  frameOptions?: 'DENY' | 'SAMEORIGIN' | string;\n  contentTypeOptions?: boolean;\n  referrerPolicy?: string;\n  permissionsPolicy?: Record<string, string[]>;\n  crossOriginEmbedderPolicy?: 'require-corp' | 'credentialless';\n  crossOriginOpenerPolicy?: 'same-origin' | 'same-origin-allow-popups' | 'unsafe-none';\n  crossOriginResourcePolicy?: 'same-site' | 'same-origin' | 'cross-origin';\n}\n\n// Default security configuration for Utmify\nconst DEFAULT_CONFIG: SecurityHeadersConfig = {\n  // Content Security Policy - prevents XSS attacks\n  contentSecurityPolicy: {\n    directives: {\n      'default-src': [\"'self'\"],\n      'script-src': [\n        \"'self'\",\n        \"'unsafe-inline'\", // Required for some analytics\n        \"'unsafe-eval'\", // Required for some frameworks (use carefully)\n        'https://cdn.jsdelivr.net',\n        'https://unpkg.com',\n        'https://www.google-analytics.com',\n        'https://www.googletagmanager.com',\n        'https://connect.facebook.net',\n        'https://www.facebook.com',\n        'https://static.ads-twitter.com',\n        'https://analytics.twitter.com',\n      ],\n      'style-src': [\n        \"'self'\",\n        \"'unsafe-inline'\", // Required for styled-components and CSS-in-JS\n        'https://fonts.googleapis.com',\n        'https://cdn.jsdelivr.net',\n      ],\n      'img-src': [\n        \"'self'\",\n        'data:', // For base64 images\n        'blob:', // For generated images\n        'https:', // Allow HTTPS images\n        'https://www.google-analytics.com',\n        'https://www.facebook.com',\n        'https://px.ads.linkedin.com',\n        'https://t.co',\n      ],\n      'font-src': [\n        \"'self'\",\n        'https://fonts.gstatic.com',\n        'https://cdn.jsdelivr.net',\n        'data:', // For base64 fonts\n      ],\n      'connect-src': [\n        \"'self'\",\n        'https://api.utmify.com', // Your API domain\n        'https://www.google-analytics.com',\n        'https://analytics.google.com',\n        'https://stats.g.doubleclick.net',\n        'https://www.facebook.com',\n        'https://graph.facebook.com',\n        'https://api.twitter.com',\n        'https://api.linkedin.com',\n        'https://sentry.io', // For error reporting\n        'wss:', // WebSocket connections\n      ],\n      'frame-src': [\n        \"'self'\",\n        'https://www.youtube.com',\n        'https://player.vimeo.com',\n        'https://www.facebook.com',\n        'https://web.facebook.com',\n      ],\n      'worker-src': [\"'self'\", 'blob:'],\n      'child-src': [\"'self'\", 'blob:'],\n      'object-src': [\"'none'\"], // Prevent Flash/Java applets\n      'base-uri': [\"'self'\"], // Prevent base tag injection\n      'form-action': [\"'self'\"], // Restrict form submissions\n      'frame-ancestors': [\"'none'\"], // Prevent clickjacking\n      'upgrade-insecure-requests': [], // Upgrade HTTP to HTTPS\n    },\n    reportOnly: false,\n    reportUri: '/api/csp-report',\n  },\n  \n  // HTTP Strict Transport Security - force HTTPS\n  hsts: {\n    maxAge: 31536000, // 1 year\n    includeSubDomains: true,\n    preload: true,\n  },\n  \n  // X-Frame-Options - prevent clickjacking\n  frameOptions: 'DENY',\n  \n  // X-Content-Type-Options - prevent MIME sniffing\n  contentTypeOptions: true,\n  \n  // Referrer-Policy - control referrer information\n  referrerPolicy: 'strict-origin-when-cross-origin',\n  \n  // Permissions-Policy - control browser features\n  permissionsPolicy: {\n    'accelerometer': [],\n    'ambient-light-sensor': [],\n    'autoplay': ['self'],\n    'battery': [],\n    'camera': [],\n    'cross-origin-isolated': [],\n    'display-capture': [],\n    'document-domain': [],\n    'encrypted-media': [],\n    'execution-while-not-rendered': [],\n    'execution-while-out-of-viewport': [],\n    'fullscreen': ['self'],\n    'geolocation': [],\n    'gyroscope': [],\n    'keyboard-map': [],\n    'magnetometer': [],\n    'microphone': [],\n    'midi': [],\n    'navigation-override': [],\n    'payment': ['self'],\n    'picture-in-picture': [],\n    'publickey-credentials-get': [],\n    'screen-wake-lock': [],\n    'sync-xhr': [],\n    'usb': [],\n    'web-share': ['self'],\n    'xr-spatial-tracking': [],\n  },\n  \n  // Cross-Origin policies\n  crossOriginEmbedderPolicy: 'credentialless',\n  crossOriginOpenerPolicy: 'same-origin',\n  crossOriginResourcePolicy: 'cross-origin',\n};\n\n// Development configuration (more permissive)\nconst DEVELOPMENT_CONFIG: SecurityHeadersConfig = {\n  ...DEFAULT_CONFIG,\n  contentSecurityPolicy: {\n    ...DEFAULT_CONFIG.contentSecurityPolicy!,\n    directives: {\n      ...DEFAULT_CONFIG.contentSecurityPolicy!.directives,\n      'script-src': [\n        \"'self'\",\n        \"'unsafe-inline'\",\n        \"'unsafe-eval'\",\n        'localhost:*',\n        '127.0.0.1:*',\n        'https://cdn.jsdelivr.net',\n        'https://unpkg.com',\n      ],\n      'connect-src': [\n        \"'self'\",\n        'localhost:*',\n        '127.0.0.1:*',\n        'ws://localhost:*',\n        'wss://localhost:*',\n        'https://api.utmify.com',\n        'https://sentry.io',\n      ],\n    },\n    reportOnly: true, // Don't block in development\n  },\n  hsts: undefined, // Don't enforce HTTPS in development\n};\n\nclass SecurityHeaders {\n  private config: SecurityHeadersConfig;\n  private isDevelopment: boolean;\n  \n  constructor(config?: Partial<SecurityHeadersConfig>, isDevelopment = false) {\n    this.isDevelopment = isDevelopment;\n    const baseConfig = isDevelopment ? DEVELOPMENT_CONFIG : DEFAULT_CONFIG;\n    this.config = { ...baseConfig, ...config };\n  }\n  \n  // Generate CSP header value\n  private generateCSPHeader(): string {\n    if (!this.config.contentSecurityPolicy) return '';\n    \n    const { directives } = this.config.contentSecurityPolicy;\n    const cspParts: string[] = [];\n    \n    for (const [directive, sources] of Object.entries(directives)) {\n      if (Array.isArray(sources) && sources.length > 0) {\n        cspParts.push(`${directive} ${sources.join(' ')}`);\n      } else if (sources === true || (Array.isArray(sources) && sources.length === 0)) {\n        cspParts.push(directive);\n      }\n    }\n    \n    return cspParts.join('; ');\n  }\n  \n  // Generate Permissions Policy header value\n  private generatePermissionsPolicyHeader(): string {\n    if (!this.config.permissionsPolicy) return '';\n    \n    const policies: string[] = [];\n    \n    for (const [feature, allowlist] of Object.entries(this.config.permissionsPolicy)) {\n      if (allowlist.length === 0) {\n        policies.push(`${feature}=()`);\n      } else {\n        const origins = allowlist.map(origin => \n          origin === 'self' ? 'self' : `\"${origin}\"`\n        ).join(' ');\n        policies.push(`${feature}=(${origins})`);\n      }\n    }\n    \n    return policies.join(', ');\n  }\n  \n  // Apply security headers to response\n  applyHeaders(reply: FastifyReply): void {\n    try {\n      // Content Security Policy\n      if (this.config.contentSecurityPolicy) {\n        const cspHeader = this.generateCSPHeader();\n        if (cspHeader) {\n          const headerName = this.config.contentSecurityPolicy.reportOnly \n            ? 'Content-Security-Policy-Report-Only'\n            : 'Content-Security-Policy';\n          reply.header(headerName, cspHeader);\n        }\n      }\n      \n      // HTTP Strict Transport Security\n      if (this.config.hsts && !this.isDevelopment) {\n        const { maxAge, includeSubDomains, preload } = this.config.hsts;\n        let hstsValue = `max-age=${maxAge}`;\n        if (includeSubDomains) hstsValue += '; includeSubDomains';\n        if (preload) hstsValue += '; preload';\n        reply.header('Strict-Transport-Security', hstsValue);\n      }\n      \n      // X-Frame-Options\n      if (this.config.frameOptions) {\n        reply.header('X-Frame-Options', this.config.frameOptions);\n      }\n      \n      // X-Content-Type-Options\n      if (this.config.contentTypeOptions) {\n        reply.header('X-Content-Type-Options', 'nosniff');\n      }\n      \n      // Referrer-Policy\n      if (this.config.referrerPolicy) {\n        reply.header('Referrer-Policy', this.config.referrerPolicy);\n      }\n      \n      // Permissions-Policy\n      if (this.config.permissionsPolicy) {\n        const permissionsHeader = this.generatePermissionsPolicyHeader();\n        if (permissionsHeader) {\n          reply.header('Permissions-Policy', permissionsHeader);\n        }\n      }\n      \n      // Cross-Origin policies\n      if (this.config.crossOriginEmbedderPolicy) {\n        reply.header('Cross-Origin-Embedder-Policy', this.config.crossOriginEmbedderPolicy);\n      }\n      \n      if (this.config.crossOriginOpenerPolicy) {\n        reply.header('Cross-Origin-Opener-Policy', this.config.crossOriginOpenerPolicy);\n      }\n      \n      if (this.config.crossOriginResourcePolicy) {\n        reply.header('Cross-Origin-Resource-Policy', this.config.crossOriginResourcePolicy);\n      }\n      \n      // Additional security headers\n      reply.header('X-DNS-Prefetch-Control', 'off');\n      reply.header('X-Download-Options', 'noopen');\n      reply.header('X-Permitted-Cross-Domain-Policies', 'none');\n      reply.header('X-XSS-Protection', '0'); // Disabled as CSP is more effective\n      \n      // Remove server information\n      reply.removeHeader('Server');\n      reply.removeHeader('X-Powered-By');\n      \n    } catch (error) {\n      // Log error but don't fail the request\n      addBreadcrumb({\n        category: 'security',\n        message: 'Failed to apply security headers',\n        data: { error: error.message },\n        level: 'error',\n      });\n    }\n  }\n  \n  // Create middleware function\n  createMiddleware() {\n    return async (request: FastifyRequest, reply: FastifyReply) => {\n      this.applyHeaders(reply);\n    };\n  }\n}\n\n// CSP violation reporting endpoint\nexport async function cspReportHandler(request: FastifyRequest, reply: FastifyReply) {\n  try {\n    const report = request.body as any;\n    \n    // Log CSP violation\n    addBreadcrumb({\n      category: 'security',\n      message: 'CSP violation reported',\n      data: {\n        'blocked-uri': report['csp-report']?.['blocked-uri'],\n        'violated-directive': report['csp-report']?.['violated-directive'],\n        'original-policy': report['csp-report']?.['original-policy'],\n        'document-uri': report['csp-report']?.['document-uri'],\n        'referrer': report['csp-report']?.['referrer'],\n        'user-agent': request.headers['user-agent'],\n        'ip': request.ip,\n      },\n      level: 'warning',\n    });\n    \n    // You might want to store these reports in a database for analysis\n    // await storeCSPViolation(report);\n    \n    reply.code(204).send();\n  } catch (error) {\n    reply.code(400).send({ error: 'Invalid CSP report' });\n  }\n}\n\n// Plugin to register security headers middleware\nexport async function securityHeadersPlugin(fastify: FastifyInstance, options: {\n  config?: Partial<SecurityHeadersConfig>;\n  isDevelopment?: boolean;\n} = {}) {\n  const { config, isDevelopment = process.env.NODE_ENV === 'development' } = options;\n  \n  const securityHeaders = new SecurityHeaders(config, isDevelopment);\n  \n  // Apply security headers to all responses\n  fastify.addHook('onSend', async (request, reply) => {\n    securityHeaders.applyHeaders(reply);\n  });\n  \n  // Register CSP report endpoint\n  fastify.post('/api/csp-report', {\n    schema: {\n      body: {\n        type: 'object',\n        properties: {\n          'csp-report': {\n            type: 'object',\n            properties: {\n              'blocked-uri': { type: 'string' },\n              'violated-directive': { type: 'string' },\n              'original-policy': { type: 'string' },\n              'document-uri': { type: 'string' },\n              'referrer': { type: 'string' },\n            },\n          },\n        },\n      },\n    },\n  }, cspReportHandler);\n  \n  // Utility function to get current CSP\n  fastify.decorate('getCSPHeader', () => {\n    return securityHeaders['generateCSPHeader']();\n  });\n  \n  // Utility function to temporarily modify CSP for specific routes\n  fastify.decorate('withCustomCSP', (customDirectives: Record<string, string[]>) => {\n    return (request: FastifyRequest, reply: FastifyReply) => {\n      const customHeaders = new SecurityHeaders({\n        contentSecurityPolicy: {\n          directives: {\n            ...DEFAULT_CONFIG.contentSecurityPolicy!.directives,\n            ...customDirectives,\n          },\n        },\n      }, isDevelopment);\n      \n      customHeaders.applyHeaders(reply);\n    };\n  });\n}\n\n// Utility function to validate CSP directives\nexport function validateCSPDirectives(directives: Record<string, string[]>): {\n  valid: boolean;\n  errors: string[];\n} {\n  const errors: string[] = [];\n  const validDirectives = [\n    'default-src', 'script-src', 'style-src', 'img-src', 'font-src',\n    'connect-src', 'frame-src', 'worker-src', 'child-src', 'object-src',\n    'base-uri', 'form-action', 'frame-ancestors', 'upgrade-insecure-requests',\n    'block-all-mixed-content', 'require-sri-for', 'sandbox',\n  ];\n  \n  for (const directive of Object.keys(directives)) {\n    if (!validDirectives.includes(directive)) {\n      errors.push(`Invalid CSP directive: ${directive}`);\n    }\n  }\n  \n  // Check for unsafe directives in production\n  if (process.env.NODE_ENV === 'production') {\n    const unsafeDirectives = ['unsafe-inline', 'unsafe-eval', 'unsafe-hashes'];\n    \n    for (const [directive, sources] of Object.entries(directives)) {\n      if (Array.isArray(sources)) {\n        for (const source of sources) {\n          if (unsafeDirectives.some(unsafe => source.includes(unsafe))) {\n            errors.push(`Unsafe CSP source in production: ${source} in ${directive}`);\n          }\n        }\n      }\n    }\n  }\n  \n  return {\n    valid: errors.length === 0,\n    errors,\n  };\n}\n\n// Export configurations and classes\nexport { SecurityHeaders, DEFAULT_CONFIG, DEVELOPMENT_CONFIG };\nexport type { SecurityHeadersConfig };\nexport default securityHeadersPlugin;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}